{"version":3,"file":"core-chart.umd.js","sources":["../../../../../src/core/chart/extended-chart-type.ts","../../../../../src/core/chart/register-chart-plugins.ts","../../../../../src/core/chart/chart.ts","../../../../../src/core/chart/chart-module.ts","../../../../../src/core/chart/public-api.ts","../../../../../src/core/chart/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {ChartType} from 'chart.js';\n\nexport type ExtendedChartType = ChartType|'horizontalBar'|'scatter'|'pie';\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Chart} from 'chart.js';\n\nexport function registerChartPlugins(plugins: any[]) {\n  if (plugins != null && plugins.length > 0) {\n    plugins.forEach(plugin => Chart.plugins.register(plugin));\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  Input,\n  OnChanges,\n  Renderer2,\n  SimpleChanges,\n  ViewEncapsulation\n} from '@angular/core';\n\nimport {\n  ChartData,\n  ChartPoint,\n  ChartLegendLabelItem,\n  ChartOptions,\n  ChartSize,\n  ChartTooltipModel,\n  ChartTooltipItem,\n  Chart,\n} from 'chart.js';\n\nimport {deepCopy} from '@ajf/core/utils';\nimport {ExtendedChartType} from './extended-chart-type';\n\n\n@Component({\n  selector: 'ajf-chart',\n  templateUrl: 'chart.html',\n  styleUrls: ['chart.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None\n})\nexport class AjfChartComponent implements AfterViewInit, OnChanges {\n  @Input() data: ChartData;\n  @Input() options: ChartOptions;\n  @Input() chartType: ExtendedChartType;\n\n  private _chart: Chart|null;\n  private _chartCanvasElement: any;\n  private _chartTypesNeedPoints: ExtendedChartType[] = ['scatter', 'bubble'];\n\n  constructor(private _el: ElementRef, private _renderer: Renderer2) {}\n\n  ngAfterViewInit(): void {\n    this._rebuildChart();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if ('chartType' in changes) {\n      this._rebuildChart();\n    } else if ('options' in changes || 'data' in changes) {\n      this._updateChart();\n    }\n  }\n\n  private _fixData(chartType: ExtendedChartType, data: ChartData): ChartData {\n    const newData: ChartData = deepCopy(data);\n    let maxPointsNum = 0;\n    (newData.datasets || []).forEach((dataset) => {\n      if (dataset.label == null) {\n        dataset.label = '';\n      }\n      maxPointsNum = Math.max(maxPointsNum, (dataset.data || []).length);\n      const datasetType = dataset.type != null ? <ExtendedChartType>dataset.type : chartType;\n      if (this._chartTypesNeedPoints.indexOf(datasetType) > -1) {\n        dataset.data = (<any[]>(dataset.data || [])).map((d, idx) => {\n          if (typeof d === 'number') {\n            return <any>{x: idx, y: d, r: d};\n          }\n          return <ChartPoint>d;\n        });\n      }\n    });\n    const labels = newData.labels || [];\n    if (maxPointsNum > 0 && labels.length < maxPointsNum) {\n      for (let i = labels.length; i < maxPointsNum; i++) {\n        labels.push('');\n      }\n      newData.labels = labels;\n    }\n    return newData;\n  }\n\n  private _updateChart(): void {\n    if (this._chart == null) {\n      this._rebuildChart();\n    } else {\n      (<any>this._chart).options = {\n        ...deepCopy((<any>this._chart).options),\n        ...deepCopy(this.options || {})\n      };\n      this._chart.data = {...deepCopy(this._chart.data), ...deepCopy(this.data)};\n      this._chart.update();\n    }\n  }\n\n  private _rebuildChart(): void {\n    if (this._chart != null) {\n      this._chart.destroy();\n      this._chart = null;\n    }\n    if (this._chartCanvasElement != null) {\n      this._renderer.removeChild(this._el.nativeElement, this._chartCanvasElement);\n      this._chartCanvasElement = null;\n    }\n    if (this.data != null) {\n      this._chartCanvasElement = this._renderer.createElement('canvas');\n      this._renderer.setStyle(this._chartCanvasElement, 'width', 'inherit');\n      this._renderer.setStyle(this._chartCanvasElement, 'height', 'inherit');\n      this._renderer.appendChild(this._el.nativeElement, this._chartCanvasElement);\n      const ctx = this._chartCanvasElement.getContext('2d');\n      this._chart = new Chart(ctx, {\n        type: this.chartType,\n        data: this._fixData(this.chartType, this.data),\n        options: this._fixChartOptions(this.options)\n      });\n    }\n  }\n\n  private _fixChartOptions(options: ChartOptions): ChartOptions {\n    options = options || {};\n    if (options.legendCallback) {\n      const legendCallback = (typeof options.legendCallback === 'string'\n        ? new Function(options.legendCallback)\n        : options.legendCallback) as (chart: Chart) => string;\n      options.legendCallback = legendCallback;\n    }\n    if (options.onHover) {\n      const onHover = (typeof options.onHover === 'string'\n        ? new Function(options.onHover)\n        : options.onHover) as (\n          this: Chart, event: MouseEvent, activeElements: {}[]) => any;\n      options.onHover = onHover;\n    }\n    if (options.onClick) {\n      const onClick = (typeof options.onClick === 'string'\n        ? new Function(options.onClick)\n        : options.onClick) as (event?: MouseEvent, activeElements?: {}[]) =>\n        any;\n      options.onClick = onClick;\n    }\n    if (options.onResize) {\n      const onResize = (typeof options.onResize === 'string'\n        ? new Function(options.onResize)\n        : options.onResize) as (this: Chart, newSize: ChartSize) => void;\n      options.onResize = onResize;\n    }\n    if (options.legend) {\n      const legend = options.legend;\n      if (legend.onClick) {\n        const onClick = (typeof legend.onClick === 'string'\n          ? new Function(legend.onClick)\n          : legend.onClick) as (event: MouseEvent, legendItem: ChartLegendLabelItem) => void;\n        legend.onClick = onClick;\n      }\n      if (legend.onHover) {\n        const onHover = (typeof legend.onHover === 'string'\n          ? new Function(legend.onHover)\n          : legend.onHover) as (event: MouseEvent, legendItem: ChartLegendLabelItem) => void;\n        legend.onHover = onHover;\n      }\n      if (legend.onLeave) {\n        const onLeave = (typeof legend.onLeave === 'string'\n          ? new Function(legend.onLeave)\n          : legend.onLeave) as (event: MouseEvent, legendItem: ChartLegendLabelItem) => void;\n        legend.onLeave = onLeave;\n      }\n      if (legend.labels) {\n        const labels = legend.labels;\n        if (labels.generateLabels) {\n          const generateLabels = (typeof labels.generateLabels === 'string'\n            ? new Function(labels.generateLabels)\n            : labels.generateLabels) as (chart: Chart) =>\n            ChartLegendLabelItem[];\n          labels.generateLabels = generateLabels;\n        }\n        if (labels.filter) {\n          const filter = (typeof labels.filter === 'string'\n            ? new Function(labels.filter)\n            : labels.filter) as (legendItem: ChartLegendLabelItem, data: ChartData) => any;\n          labels.filter = filter;\n        }\n      }\n    }\n    if (options.tooltips) {\n      const tooltips = options.tooltips;\n      if (tooltips.custom) {\n        const custom = (typeof tooltips.custom === 'string'\n          ? new Function(tooltips.custom)\n          : tooltips.custom) as (tooltipModel: ChartTooltipModel) => void;\n        tooltips.custom = custom;\n      }\n      if (tooltips.callbacks) {\n        const callbacks = tooltips.callbacks;\n        for (const key in callbacks) {\n          const callback = (callbacks as any)[key] as\n            (item: ChartTooltipItem[], data: ChartData) => string | string[];\n          (callbacks as any)[key] = typeof callback === 'string'\n            ? new Function(callback)\n            : callback;\n        }\n      }\n      if (tooltips.filter) {\n        const filter = (typeof tooltips.filter === 'string'\n          ? new Function(tooltips.filter)\n          : tooltips.filter) as (item: ChartTooltipItem, data: ChartData) =>\n            boolean;\n        tooltips.filter = filter;\n      }\n      if (tooltips.itemSort) {\n        const itemSort = (typeof tooltips.itemSort === 'string'\n          ? new Function(tooltips.itemSort)\n          : tooltips.itemSort) as (\n            itemA: ChartTooltipItem, itemB: ChartTooltipItem, data?: ChartData) => number;\n        tooltips.itemSort = itemSort;\n      }\n    }\n    if (options.hover) {\n      const hover = options.hover;\n      if (hover.onHover) {\n        const onHover = (typeof hover.onHover === 'string'\n          ? new Function(hover.onHover)\n          : hover.onHover) as (\n            this: Chart, event: MouseEvent, activeElements: {}[]) => any;\n        hover.onHover = onHover;\n      }\n    }\n    if (options.animation) {\n      const animation = options.animation;\n      if (animation.onProgress) {\n        const onProgress = (typeof animation.onProgress === 'string'\n          ? new Function(animation.onProgress)\n          : animation.onProgress) as (chart: any) => void;\n        animation.onProgress = onProgress;\n      }\n      if (animation.onComplete) {\n        const onComplete = (typeof animation.onComplete === 'string'\n          ? new Function(animation.onComplete)\n          : animation.onComplete) as (chart: any) => void;\n        animation.onComplete = onComplete;\n      }\n    }\n    if (options.scales == null) {\n      options.scales = {xAxes: [], yAxes: []};\n    }\n    if (options.scales.xAxes == null) {\n      options.scales.xAxes = [];\n    }\n    if (options.scales.yAxes == null) {\n      options.scales.yAxes = [];\n    }\n    options.scales.yAxes.forEach((yAxe) => {\n      if (yAxe.ticks && yAxe.ticks.callback) {\n        const callback = (typeof yAxe.ticks.callback === 'string'\n          ? new Function(yAxe.ticks.callback)\n          : yAxe.ticks.callback) as (value: any, index: any, values: any) =>\n          string | number;\n        yAxe.ticks.callback = callback;\n      }\n    });\n    options.scales.xAxes.forEach((xAxe) => {\n      if (xAxe.ticks && xAxe.ticks.callback) {\n        const callback = (typeof xAxe.ticks.callback === 'string'\n          ? new Function(xAxe.ticks.callback)\n          : xAxe.ticks.callback) as (value: any, index: any, values: any) =>\n          string | number;\n        xAxe.ticks.callback = callback;\n      }\n    });\n    if (this.chartType == 'pie') {\n      let newOptions = <any>options;\n      newOptions.pieceLabel = {\n        render: function(args: any) {\n          if (args.label) {\n            return args.label + ':' + args.value;\n          } else {\n            return args.value;\n          }\n        },\n        position: 'outside'\n      };\n      return newOptions;\n    }\n    return options;\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {NgModule} from '@angular/core';\n\nimport {AjfChartComponent} from './chart';\n\n@NgModule({\n  declarations: [\n    AjfChartComponent,\n  ],\n  exports: [\n    AjfChartComponent,\n  ],\n})\nexport class AjfChartModule {\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport * from './extended-chart-type';\nexport * from './register-chart-plugins';\nexport * from './chart';\nexport * from './chart-module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Chart","deepCopy","Component","ChangeDetectionStrategy","ViewEncapsulation","ElementRef","Renderer2","Input","NgModule"],"mappings":"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"}