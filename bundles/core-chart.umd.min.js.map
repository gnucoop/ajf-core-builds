{"version":3,"sources":["src/core/core-chart.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ajf","core","chart","Chart","utils","ng","this","chart_js","AjfChartModule","AjfChartComponent","_el","_renderer","_chartTypesNeedPoints","prototype","ngAfterViewInit","_rebuildChart","ngOnChanges","changes","_this","_updateChart","instance","canvasDataUrl","_chartCanvasElement","toDataURL","_fixData","chartType","data","newData","deepCopy","maxPointsNum","datasets","forEach","dataset","label","Math","max","length","indexOf","type","map","d","idx","x","y","r","labels","i","push","_chart","options","Object","assign","update","destroy","removeChild","nativeElement","createElement","setStyle","appendChild","ctx","getContext","_fixChartOptions","legendCallback","Function","onHover","onClick","onResize","legend","onLeave","generateLabels","filter","tooltips","custom","callbacks","key","callback","itemSort","hover","animation","onProgress","onComplete","scales","xAxes","yAxes","yAxe","ticks","xAxe","newOptions","pieceLabel","render","args","value","position","decorators","Component","selector","template","changeDetection","ChangeDetectionStrategy","OnPush","encapsulation","ViewEncapsulation","None","styles","ctorParameters","ElementRef","Renderer2","propDecorators","Input","NgModule","declarations","registerChartPlugins","plugins","plugin","register","defineProperty"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('chart.js'), require('@ajf/core/utils'), require('@angular/core')) :\n    typeof define === 'function' && define.amd ? define('@ajf/core/chart', ['exports', 'chart.js', '@ajf/core/utils', '@angular/core'], factory) :\n    (global = global || self, factory((global.ajf = global.ajf || {}, global.ajf.core = global.ajf.core || {}, global.ajf.core.chart = {}), global.Chart, global.ajf.core.utils, global.ng.core));\n}(this, (function (exports, chart_js, utils, core) { 'use strict';\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    function registerChartPlugins(plugins) {\n        if (plugins != null && plugins.length > 0) {\n            plugins.forEach(function (plugin) { return chart_js.Chart.plugins.register(plugin); });\n        }\n    }\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfChartComponent = /** @class */ (function () {\n        function AjfChartComponent(_el, _renderer) {\n            this._el = _el;\n            this._renderer = _renderer;\n            this._chartTypesNeedPoints = ['scatter', 'bubble'];\n        }\n        AjfChartComponent.prototype.ngAfterViewInit = function () {\n            this._rebuildChart();\n        };\n        AjfChartComponent.prototype.ngOnChanges = function (changes) {\n            var _this = this;\n            if ('chartType' in changes) {\n                this._rebuildChart();\n            }\n            else if ('options' in changes || 'data' in changes) {\n                this._updateChart();\n            }\n            if ('instance' in changes) {\n                this.instance.canvasDataUrl = function () {\n                    if (_this._chartCanvasElement == null) {\n                        return '';\n                    }\n                    return _this._chartCanvasElement.toDataURL();\n                };\n            }\n        };\n        AjfChartComponent.prototype._fixData = function (chartType, data) {\n            var _this = this;\n            var newData = utils.deepCopy(data);\n            var maxPointsNum = 0;\n            (newData.datasets || []).forEach(function (dataset) {\n                if (dataset.label == null) {\n                    dataset.label = '';\n                }\n                maxPointsNum = Math.max(maxPointsNum, (dataset.data || []).length);\n                var datasetType = dataset.type != null ? dataset.type : chartType;\n                if (_this._chartTypesNeedPoints.indexOf(datasetType) > -1) {\n                    dataset.data = (dataset.data || []).map(function (d, idx) {\n                        if (typeof d === 'number') {\n                            return { x: idx, y: d, r: d };\n                        }\n                        return d;\n                    });\n                }\n            });\n            var labels = newData.labels || [];\n            if (maxPointsNum > 0 && labels.length < maxPointsNum) {\n                for (var i = labels.length; i < maxPointsNum; i++) {\n                    labels.push('');\n                }\n                newData.labels = labels;\n            }\n            return newData;\n        };\n        AjfChartComponent.prototype._updateChart = function () {\n            if (this._chart == null) {\n                this._rebuildChart();\n            }\n            else {\n                this._chart.options = Object.assign(Object.assign({}, utils.deepCopy(this._chart.options)), utils.deepCopy(this.options || {}));\n                this._chart.data = Object.assign(Object.assign({}, utils.deepCopy(this._chart.data)), utils.deepCopy(this.data));\n                this._chart.update();\n            }\n        };\n        AjfChartComponent.prototype._rebuildChart = function () {\n            if (this._chart != null) {\n                this._chart.destroy();\n                this._chart = null;\n            }\n            if (this._chartCanvasElement != null) {\n                this._renderer.removeChild(this._el.nativeElement, this._chartCanvasElement);\n                this._chartCanvasElement = null;\n            }\n            if (this.data != null) {\n                this._chartCanvasElement = this._renderer.createElement('canvas');\n                this._renderer.setStyle(this._chartCanvasElement, 'width', 'inherit');\n                this._renderer.setStyle(this._chartCanvasElement, 'height', 'inherit');\n                this._renderer.appendChild(this._el.nativeElement, this._chartCanvasElement);\n                var ctx = this._chartCanvasElement.getContext('2d');\n                this._chart = new chart_js.Chart(ctx, {\n                    type: this.chartType,\n                    data: this._fixData(this.chartType, this.data),\n                    options: this._fixChartOptions(this.options)\n                });\n            }\n        };\n        AjfChartComponent.prototype._fixChartOptions = function (options) {\n            options = options || {};\n            if (options.legendCallback) {\n                var legendCallback = (typeof options.legendCallback === 'string' ?\n                    new Function(options.legendCallback) :\n                    options.legendCallback);\n                options.legendCallback = legendCallback;\n            }\n            if (options.onHover) {\n                var onHover = (typeof options.onHover === 'string' ?\n                    new Function(options.onHover) :\n                    options.onHover);\n                options.onHover = onHover;\n            }\n            if (options.onClick) {\n                var onClick = (typeof options.onClick === 'string' ?\n                    new Function(options.onClick) :\n                    options.onClick);\n                options.onClick = onClick;\n            }\n            if (options.onResize) {\n                var onResize = (typeof options.onResize === 'string' ?\n                    new Function(options.onResize) :\n                    options.onResize);\n                options.onResize = onResize;\n            }\n            if (options.legend) {\n                var legend = options.legend;\n                if (legend.onClick) {\n                    var onClick = (typeof legend.onClick === 'string' ?\n                        new Function(legend.onClick) :\n                        legend.onClick);\n                    legend.onClick = onClick;\n                }\n                if (legend.onHover) {\n                    var onHover = (typeof legend.onHover === 'string' ?\n                        new Function(legend.onHover) :\n                        legend.onHover);\n                    legend.onHover = onHover;\n                }\n                if (legend.onLeave) {\n                    var onLeave = (typeof legend.onLeave === 'string' ?\n                        new Function(legend.onLeave) :\n                        legend.onLeave);\n                    legend.onLeave = onLeave;\n                }\n                if (legend.labels) {\n                    var labels = legend.labels;\n                    if (labels.generateLabels) {\n                        var generateLabels = (typeof labels.generateLabels === 'string' ?\n                            new Function(labels.generateLabels) :\n                            labels.generateLabels);\n                        labels.generateLabels = generateLabels;\n                    }\n                    if (labels.filter) {\n                        var filter = (typeof labels.filter === 'string' ? new Function(labels.filter) : labels.filter);\n                        labels.filter = filter;\n                    }\n                }\n            }\n            if (options.tooltips) {\n                var tooltips = options.tooltips;\n                if (tooltips.custom) {\n                    var custom = (typeof tooltips.custom === 'string' ?\n                        new Function(tooltips.custom) :\n                        tooltips.custom);\n                    tooltips.custom = custom;\n                }\n                if (tooltips.callbacks) {\n                    var callbacks = tooltips.callbacks;\n                    for (var key in callbacks) {\n                        var callback = callbacks[key];\n                        callbacks[key] =\n                            typeof callback === 'string' ? new Function(callback) : callback;\n                    }\n                }\n                if (tooltips.filter) {\n                    var filter = (typeof tooltips.filter === 'string' ? new Function(tooltips.filter) :\n                        tooltips.filter);\n                    tooltips.filter = filter;\n                }\n                if (tooltips.itemSort) {\n                    var itemSort = (typeof tooltips.itemSort === 'string' ? new Function(tooltips.itemSort) :\n                        tooltips.itemSort);\n                    tooltips.itemSort = itemSort;\n                }\n            }\n            if (options.hover) {\n                var hover = options.hover;\n                if (hover.onHover) {\n                    var onHover = (typeof hover.onHover === 'string' ? new Function(hover.onHover) : hover.onHover);\n                    hover.onHover = onHover;\n                }\n            }\n            if (options.animation) {\n                var animation = options.animation;\n                if (animation.onProgress) {\n                    var onProgress = (typeof animation.onProgress === 'string' ?\n                        new Function(animation.onProgress) :\n                        animation.onProgress);\n                    animation.onProgress = onProgress;\n                }\n                if (animation.onComplete) {\n                    var onComplete = (typeof animation.onComplete === 'string' ?\n                        new Function(animation.onComplete) :\n                        animation.onComplete);\n                    animation.onComplete = onComplete;\n                }\n            }\n            if (options.scales == null) {\n                options.scales = { xAxes: [], yAxes: [] };\n            }\n            if (options.scales.xAxes == null) {\n                options.scales.xAxes = [];\n            }\n            if (options.scales.yAxes == null) {\n                options.scales.yAxes = [];\n            }\n            options.scales.yAxes.forEach(function (yAxe) {\n                if (yAxe.ticks && yAxe.ticks.callback) {\n                    var callback = (typeof yAxe.ticks.callback === 'string' ?\n                        new Function(yAxe.ticks.callback) :\n                        yAxe.ticks.callback);\n                    yAxe.ticks.callback = callback;\n                }\n            });\n            options.scales.xAxes.forEach(function (xAxe) {\n                if (xAxe.ticks && xAxe.ticks.callback) {\n                    var callback = (typeof xAxe.ticks.callback === 'string' ?\n                        new Function(xAxe.ticks.callback) :\n                        xAxe.ticks.callback);\n                    xAxe.ticks.callback = callback;\n                }\n            });\n            if (this.chartType == 'pie') {\n                var newOptions = options;\n                newOptions.pieceLabel = Object.assign(Object.assign({}, Object.assign({ render: function (args) {\n                        if (args.label) {\n                            return args.label + ':' + args.value;\n                        }\n                        else {\n                            return args.value;\n                        }\n                    } }, newOptions.pieceLabel)), { position: 'outside' });\n                return newOptions;\n            }\n            return options;\n        };\n        return AjfChartComponent;\n    }());\n    AjfChartComponent.decorators = [\n        { type: core.Component, args: [{\n                    selector: 'ajf-chart',\n                    template: \"\",\n                    changeDetection: core.ChangeDetectionStrategy.OnPush,\n                    encapsulation: core.ViewEncapsulation.None,\n                    styles: [\"ajf-chart{display:block;width:inherit;height:inherit;position:relative}\\n\"]\n                },] }\n    ];\n    AjfChartComponent.ctorParameters = function () { return [\n        { type: core.ElementRef },\n        { type: core.Renderer2 }\n    ]; };\n    AjfChartComponent.propDecorators = {\n        data: [{ type: core.Input }],\n        options: [{ type: core.Input }],\n        chartType: [{ type: core.Input }],\n        instance: [{ type: core.Input }]\n    };\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfChartModule = /** @class */ (function () {\n        function AjfChartModule() {\n        }\n        return AjfChartModule;\n    }());\n    AjfChartModule.decorators = [\n        { type: core.NgModule, args: [{\n                    declarations: [\n                        AjfChartComponent,\n                    ],\n                    exports: [\n                        AjfChartComponent,\n                    ],\n                },] }\n    ];\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.AjfChartComponent = AjfChartComponent;\n    exports.AjfChartModule = AjfChartModule;\n    exports.registerChartPlugins = registerChartPlugins;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=core-chart.umd.js.map\n"]}