{"version":3,"file":"core-checkbox-group.umd.js","sources":["../../src/core/checkbox-group/checkbox-group-module.ts","../../src/core/checkbox-group/checkbox-group.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {NgModule} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\n\nimport {AjfCheckboxGroup} from './checkbox-group';\n\n\n@NgModule({\n  imports: [\n    FormsModule\n  ],\n  declarations: [\n    AjfCheckboxGroup\n  ],\n  exports: [\n    AjfCheckboxGroup\n  ]\n})\nexport class AjfCheckboxGroupModule { }\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AfterContentInit, Directive, EventEmitter, Input, forwardRef, OnInit,\n  Output} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\n\nimport {combineLatest, BehaviorSubject, Observable} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\nimport {coerceBooleanProperty} from '@ajf/core/utils';\n\n\nexport const AJF_CHECKBOX_GROUP_VALUE_ACCESSOR: any = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => AjfCheckboxGroup),\n  multi: true\n};\n\nexport class AjfCheckboxGroupItemChange<T> {\n  source: AjfCheckboxGroupItem<T>;\n  value: any;\n}\n\nexport class AjfCheckboxGroupChange<T> {\n  source: AjfCheckboxGroup<T>;\n  value: any;\n}\n\nlet _uniqueIdCounter = 0;\n\n\n@Directive({\n  selector: 'ajf-checkbox-group,[ajf-checkbox-group]',\n  providers: [AJF_CHECKBOX_GROUP_VALUE_ACCESSOR]\n})\nexport class AjfCheckboxGroup<T> implements AfterContentInit, ControlValueAccessor {\n  checkboxes: AjfCheckboxGroupItem<T>[] = [];\n\n  /** The value for the button toggle group. Should match currently selected button toggle. */\n  private _value: T[] = [];\n  get value(): T[] { return this._value; }\n  @Input() set value(newValue: T[]) {\n    if (this._value !== newValue) {\n      this._value = newValue;\n      this._updateSelectedCheckboxesFromValue();\n      this._emitChangeEvent();\n    }\n  }\n\n  /** The HTML name attribute applied to toggles in this group. */\n  private _name: string;\n  get name(): string { return this._name; }\n  @Input() set name(value: string) {\n    this._name = value;\n    this._updateCheckboxesNames();\n  }\n\n  /** Disables all toggles in the group. */\n  private _disabled:  boolean = false;\n  get disabled(): boolean { return this._disabled; }\n  @Input() set disabled(value) {\n    this._disabled = coerceBooleanProperty(value);\n  }\n\n  /** The currently selected button toggle, should match the value. */\n  private _selected: AjfCheckboxGroupItem<T>[] = [];\n  get selected() { return this._selected; }\n  set selected(selected: AjfCheckboxGroupItem<T>[]) {\n    this._selected = selected;\n    let values: T[] = [];\n    if (selected) {\n      selected.forEach(c => {\n        values.push(c.value);\n        if (!c.checked) {\n          c.checked = true;\n        }\n      });\n    }\n    this._value = values;\n  }\n\n  /** Event emitted when the group's value changes. */\n  private _change: EventEmitter<AjfCheckboxGroupChange<T>> =\n    new EventEmitter<AjfCheckboxGroupChange<T>>();\n    @Output() readonly change: Observable<AjfCheckboxGroupChange<T>> = this._change.asObservable();\n\n  /** onTouch function registered via registerOnTouch (ControlValueAccessor). */\n  onTouched: () => any = () => {};\n\n  /**\n   * Implemented as part of ControlValueAccessor.\n   */\n  writeValue(value: T[]) {\n    this.value = value;\n  }\n\n  /**\n   * Implemented as part of ControlValueAccessor.\n   */\n  registerOnChange(fn: (value: T[]) => void) {\n    this._controlValueAccessorChangeFn = fn;\n  }\n\n  /**\n   * Implemented as part of ControlValueAccessor.\n   */\n  registerOnTouched(fn: any) {\n    this.onTouched = fn;\n  }\n\n  addValue(value: T) {\n    let curValue = (this._value || []).slice(0);\n    if (curValue.indexOf(value) === -1) {\n      curValue.push(value);\n      this.value = curValue;\n    }\n  }\n\n  removeValue(value: T) {\n    let curValue = (this._value || []).slice(0);\n    let idx = curValue.indexOf(value);\n    if (idx > -1) {\n      curValue.splice(idx, 1);\n      this.value = curValue;\n    }\n  }\n\n  ngAfterContentInit(): void {\n    this._updateCheckboxesNames();\n    this._updateSelectedCheckboxesFromValue();\n  }\n\n  registerItem(item: AjfCheckboxGroupItem<T>): void {\n    this.checkboxes.push(item);\n  }\n\n  /** The method to be called in order to update ngModel. */\n  private _controlValueAccessorChangeFn: (value: any) => void = (_) => {};\n\n  private _updateCheckboxesNames(): void {\n    if (this.checkboxes == null) { return; }\n    this.checkboxes.forEach((checkbox) => {\n      if (checkbox == null) { return; }\n      checkbox.name = this._name;\n    });\n  }\n\n  private _updateSelectedCheckboxesFromValue(): void {\n    if (this.checkboxes == null) { return; }\n    this.checkboxes.forEach(checkbox => {\n      if (checkbox == null) { return; }\n      if ((this._value || []).indexOf(checkbox.value) > -1) {\n        checkbox.checked = true;\n      } else {\n        checkbox.checked = false;\n      }\n    });\n  }\n\n  /** Dispatch change event with current selection and group value. */\n  private _emitChangeEvent(): void {\n    let event = new AjfCheckboxGroupChange<T>();\n    event.source = this;\n    event.value = this._value;\n    this._controlValueAccessorChangeFn(event.value);\n    this._change.emit(event);\n  }\n}\n\nexport class AjfCheckboxGroupItem<T> implements OnInit {\n  /** The unique ID for this button toggle. */\n  private _checkboxId: BehaviorSubject<string> = new BehaviorSubject<string>('');\n  readonly checkboxId: Observable<string> = this._checkboxId.asObservable();\n\n  set id(id: string) { this._checkboxId.next(id); }\n\n  name: string;\n\n  /** The parent button toggle group (exclusive selection). Optional. */\n  readonly checkboxGroup: AjfCheckboxGroup<T>;\n\n  /** Whether or not this button toggle is checked. */\n  private _checkedState: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  readonly checkedState: Observable<boolean> = this._checkedState.asObservable();\n  get checked(): boolean { return this._checkedState.getValue(); }\n  set checked(checked: boolean) { this._checkedState.next(checked); }\n\n  /** Whether or not this button toggle is disabled. */\n  private _disabledState: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  readonly disabledState: Observable<boolean> = this._disabledState.asObservable();\n  get disabled(): boolean {\n    const disabled = this._disabledState.getValue();\n    return disabled || (this.checkboxGroup != null && this.checkboxGroup.disabled);\n  }\n  set disabled(disabled: boolean) {\n    this._disabledState.next(disabled != null && disabled !== false);\n  }\n\n  /** Value assigned to this button toggle. */\n  private _value: T;\n  get value(): T { return this._value; }\n  set value(value: T) {\n    if (this._value !== value) {\n      this._value = value;\n    }\n  }\n\n  private _checkedIconVal: BehaviorSubject<string> = new BehaviorSubject<string>('');\n  get checkedIcon(): string { return this._checkedIconVal.getValue(); }\n  set checkedIcon(icon: string) { this._checkedIconVal.next(icon); }\n\n  private _notCheckedIconVal: BehaviorSubject<string> =\n      new BehaviorSubject<string>('');\n  get notCheckedIcon(): string { return this._notCheckedIconVal.getValue(); }\n  set notCheckedIcon(icon: string) { this._notCheckedIconVal.next(icon); }\n\n  readonly icon: Observable<string>;\n\n  /** Event emitted when the group value changes. */\n  private _change: EventEmitter<AjfCheckboxGroupItemChange<T>>\n    = new EventEmitter<AjfCheckboxGroupItemChange<T>>();\n  readonly change: Observable<AjfCheckboxGroupItemChange<T>> = this._change.asObservable();\n\n  constructor(checkboxGroup?: AjfCheckboxGroup<T>) {\n    this.icon = combineLatest(\n      this._checkedState, this._checkedIconVal, this._notCheckedIconVal\n    ).pipe(\n      map(r => r[0] ? r[1] : r[2])\n    );\n\n    if (checkboxGroup) {\n      this.checkboxGroup = checkboxGroup;\n      this.checkboxGroup.registerItem(this);\n    }\n  }\n\n  ngOnInit() {\n    if (this.id == null) {\n      this.id = `ajf-checkbox-group-item-${_uniqueIdCounter++}`;\n    }\n\n    if (\n      this.checkboxGroup && this.checkboxGroup.value &&\n      this.checkboxGroup.value.indexOf(this._value) > -1\n    ) {\n      this.checked = true;\n    }\n  }\n\n  /** Checks the button toggle due to an interaction with the underlying native input. */\n  onInputChange(event: Event) {\n    event.stopPropagation();\n\n    this._toggle();\n  }\n\n  /** Toggle the state of the current button toggle. */\n  private _toggle(): void {\n    this.checked = !this.checked;\n\n    if (this.checkboxGroup != null) {\n      if (this.checked) {\n        this.checkboxGroup.addValue(this._value);\n      } else {\n        this.checkboxGroup.removeValue(this._value);\n      }\n    }\n  }\n}\n"],"names":["FormsModule","NgModule","combineLatest","map","EventEmitter","BehaviorSubject","Output","Input","Directive","coerceBooleanProperty","forwardRef","NG_VALUE_ACCESSOR"],"mappings":"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"}