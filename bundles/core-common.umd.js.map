{"version":3,"file":"core-common.umd.js","sources":["../../../../../../src/core/common/apply-styles-directive.ts","../../../../../../src/core/common/auto-focus.directive.ts","../../../../../../src/core/common/dnd.directive.ts","../../../../../../src/core/common/format-if-number.ts","../../../../../../src/core/common/translate-if-string.ts","../../../../../../src/core/common/video.directive.ts","../../../../../../src/core/common/common-module.ts","../../../../../../src/core/common/public-api.ts","../../../../../../src/core/common/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Input, Directive, ElementRef, Renderer2} from '@angular/core';\n\n\n@Directive({ selector: '[applyStyles]' })\nexport class ApplyStylesDirective {\n  private _cssStyles: { [style: string]: any; };\n  @Input()\n  set applyStyles(cssStyles: { [style: string]: any; }|null) {\n    if (cssStyles != null && this._cssStyles !== cssStyles) {\n      this._cssStyles = cssStyles;\n      this._updateStyles();\n    }\n  }\n\n  constructor(private _el: ElementRef, private _renderer: Renderer2) { }\n\n  private _updateStyles(): void {\n    if (this._cssStyles == null) {\n      return;\n    }\n\n    Object.keys(this._cssStyles).forEach((style: string) => {\n      try {\n        this._renderer.setStyle(\n          this._el.nativeElement,\n          style,\n          `${this._cssStyles[style]}`\n        );\n      } catch (e) { }\n    });\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\nimport {AfterContentInit, Directive, ElementRef, Input} from '@angular/core';\n\n@Directive({selector: '[autoFocus]' })\nexport class AutofocusDirective implements AfterContentInit {\n\n    @Input()\n    appAutoFocus: boolean;\n\n    constructor(private _el: ElementRef) {\n    }\n\n    ngAfterContentInit() {\n        this._el.nativeElement.focus();\n    }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Directive, Output, EventEmitter} from '@angular/core';\n\n@Directive({\n  selector: '[ajfDnd]',\n  host: {\n    '[style.background]': 'background',\n    '(dragover)': 'onDragOver($event)',\n    '(dragleave)': 'onDragLeave($event)',\n    '(drop)': 'onDrop($event)',\n  }\n})\nexport class AjfDndDirective {\n  @Output() file: EventEmitter<any> = new EventEmitter<any>();\n\n  background = '#eee';\n\n  onDragOver(evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    this.background = '#999';\n  }\n\n  onDragLeave(evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    this.background = '#eee';\n  }\n\n  onDrop(evt: any) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    let files: FileList = evt.dataTransfer.files;\n    if (files.length > 0) {\n      this.background = '#eee';\n      this.file.emit(files);\n    }\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Pipe} from '@angular/core';\nimport {DecimalPipe} from '@angular/common';\n\n\n@Pipe({name: 'ajfFormatIfNumber'})\nexport class FormatIfNumber extends DecimalPipe {\n    transform(value: any, digitsInfo?: string, locale?: string) {\n        if (typeof value === 'number') {\n            return super.transform(value, digitsInfo, locale);\n        } else {\n            return value;\n        }\n    }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Pipe} from '@angular/core';\nimport {TranslatePipe} from '@ngx-translate/core';\n\n\n@Pipe({name: 'ajfTranslateIfString'})\nexport class TranslateIfString extends TranslatePipe {\n    transform(query: any, ...args: any[]): any {\n        if (typeof query === 'string') {\n            return super.transform(query, ...args);\n        } else {\n            return query;\n        }\n    }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  Directive, Renderer2, ElementRef, Input,\n  AfterViewInit, Output, EventEmitter\n} from '@angular/core';\n\n@Directive({ selector: '[ajfVideoDirective]' })\nexport class AjfVideoDirective implements AfterViewInit {\n\n  private _source: HTMLVideoElement;\n  get source() { return this._source; }\n  @Input() set source(source: HTMLVideoElement) {\n    this._source = source;\n    this._initCam();\n  }\n\n  @Output() isInit: EventEmitter<any> = new EventEmitter<any>();\n\n  constructor(private _el: ElementRef, private _renderer: Renderer2) { }\n\n  private _initCam() {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia(<MediaStreamConstraints>{ video: true })\n        .then((stream: MediaStream) => {\n          (this._source as any).srcObject = stream;\n          (this._source as any).play();\n        })\n        .catch((err: MediaStreamError) => {\n          console.log(err);\n        });\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this._renderer.appendChild(this._el.nativeElement, this._source);\n    this.isInit.emit();\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {NgModule} from '@angular/core';\n\nimport {ApplyStylesDirective} from './apply-styles-directive';\nimport {AutofocusDirective} from './auto-focus.directive';\nimport {AjfDndDirective} from './dnd.directive';\nimport {FormatIfNumber} from './format-if-number';\nimport {TranslateIfString} from './translate-if-string';\nimport {AjfVideoDirective} from './video.directive';\n\n@NgModule({\n  declarations: [\n    AjfDndDirective,\n    AjfVideoDirective,\n    ApplyStylesDirective,\n    AutofocusDirective,\n    FormatIfNumber,\n    TranslateIfString,\n  ],\n  exports: [\n    AjfDndDirective,\n    AjfVideoDirective,\n    ApplyStylesDirective,\n    AutofocusDirective,\n    FormatIfNumber,\n    TranslateIfString,\n  ],\n})\nexport class AjfCommonModule { }\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport * from './apply-styles-directive';\nexport * from './auto-focus.directive';\nexport * from './common-module';\nexport * from './format-if-number';\nexport * from './translate-if-string';\nexport * from './dnd.directive';\nexport * from './video.directive';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Directive","ElementRef","Renderer2","Input","EventEmitter","Output","__extends","Pipe","DecimalPipe","TranslatePipe","NgModule"],"mappings":"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"}