!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("@ajf/core/utils"),require("esprima"),require("@ajf/core/models"),require("date-fns"),require("@angular/cdk/coercion"),require("@ajf/core/common"),require("@ajf/core/file-input"),require("@angular/common"),require("@angular/common/http"),require("@ngx-translate/core"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("@ajf/core/forms",["exports","@angular/core","@angular/forms","rxjs","rxjs/operators","@ajf/core/utils","esprima","@ajf/core/models","date-fns","@angular/cdk/coercion","@ajf/core/common","@ajf/core/file-input","@angular/common","@angular/common/http","@ngx-translate/core","@angular/platform-browser"],n):n(((e=e||self).ajf=e.ajf||{},e.ajf.core=e.ajf.core||{},e.ajf.core.forms={}),e.ng.core,e.ng.forms,e.rxjs,e.rxjs.operators,e.ajf.core.utils,e.esprima,e.ajf.core.models,e.dateFns,e.ng.cdk.coercion,e.ajf.core.common,e.ajf.core.fileInput,e.ng.common,e.ng.common.http,e.ngxTranslate.core,e.ng.platformBrowser)}(this,(function(e,n,t,r,o,i,a,s,u,l,c,p,d,f,h,m){"use strict";
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */var g=function(){function e(){}return e.prototype.transform=function(e){return e},e}();g.decorators=[{type:n.Pipe,args:[{name:"ajfAsFieldInstance"}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var v=function(){function e(){}return e.prototype.transform=function(e){return e},e}();v.decorators=[{type:n.Pipe,args:[{name:"ajfAsRepeatingSlideInstance"}]}];
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var y,b,_=function(e,n){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])})(e,n)};function j(e,n){function t(){this.constructor=e}_(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}function N(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}function C(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,o,i=t.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a}function x(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(C(arguments[n]));return e}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function T(e){if("fixed"===e.type)return Promise.resolve();if("function"===e.type)return e.choices=e.generator(),Promise.resolve();if("promise"===e.type){var n=e;return n.generator.then((function(e){return n.choices=e})).then()}if("observable"===e.type){var t=e;if(null!=t.generator)return t.choices=[],new Promise((function(e){t.generator.subscribe((function(e){return t.choices.push(e)}),(function(){}),(function(){return e()}))}))}if("observableArray"===e.type){var r=e;if(null!=r.generator)return r.choices=[],new Promise((function(e){r.generator.subscribe((function(n){r.choices=n,e()}))}))}return Promise.resolve()}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function F(n){return n.fieldType===e.AjfFieldType.SingleChoice||n.fieldType===e.AjfFieldType.MultipleChoice}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function S(n){return null!=n&&n.nodeType===e.AjfNodeType.AjfField}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function M(e){return null!=e&&null!=e.node&&S(e.node)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function w(e){return null!=e&&M(e)&&F(e.node)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function A(e,n){var t=e.conditionalBranches;if(null!=t){for(var r=e.verifiedBranch,o=0,i=!1;o<t.length&&!i;)s.evaluateExpression(t[o].condition,n)&&(i=!0,o!==e.verifiedBranch&&(e.verifiedBranch=o)),o++;if(r!==e.verifiedBranch)return!0}return!1}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function O(e,n,t){if(void 0===t&&(t=!0),null==e.visibility)return e.visible=!1,!1;var r=e.visible,o=t&&s.evaluateExpression(e.visibility.condition,n);return o!==e.visible&&(e.visible=o),r!==o}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function I(e){return null==e.prefix||0==e.prefix.length?"":"__"+e.prefix.join("__")}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function E(e){return null!=e&&null!=e.node?""+e.node.name+I(e):""}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function R(e,n){var t=e.formula,r=e.node.editable;if(null!=t&&e.visible&&(!r||r&&null==e.value)){var o=s.evaluateExpression(t.formula,n),i=e.value;return o!==e.value&&(e.value=o,n[E(e)]=e.value,n.$value=e.value),{changed:o!==i,value:o}}return{changed:!1,value:e.value}}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function P(e,n){return null!=e.nextSlideCondition&&s.evaluateExpression(e.nextSlideCondition.condition,n)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function V(e,n,t){return{result:s.evaluateExpression(e.condition,n,t),error:e.errorMessage,clientValidation:e.clientValidation}}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function D(e,n,t){var r=e.validation;if(null!=r){t&&Object.keys(t).forEach((function(e){n["__supplementary__"+e+"__"]=t[e]}));var o=E(e);null!=n[o]&&r&&r.forceValue&&(e.value=s.evaluateExpression(r.forceValue.condition,n),n[o]=e.value,n.$value=e.value),e.validationResults=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function a(e,n,t){var r=[],o=i.deepCopy(t);if(o.$value=n,r=function a(e,n){var t=[];return e.conditions.forEach((function(e){t.push(V(e,n))})),t}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */(e,o),e.maxValue){var u=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function l(e,n){return null==e.maxValue?null:"number"==typeof e.maxValue?{result:s.evaluateExpression("$value.length <= "+e.maxValue,{$value:n}),error:"Value must be <= "+e.maxValue,clientValidation:!1}:V(e.maxValue,{$value:n})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */(e,n);null!=u&&r.push(u)}if(e.minValue){var c=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function p(e,n){return null==e.minValue?null:"number"==typeof e.minValue?{result:s.evaluateExpression("$value.length <= "+e.minValue,{$value:n}),error:"Value must be >= "+e.minValue,clientValidation:!1}:V(e.minValue,{$value:n})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */(e,n);null!=c&&r.push(c)}if(e.notEmpty){var d=function f(e,n){if(null==e.notEmpty)return null;var t={$value:n};return"boolean"==typeof e.notEmpty?{result:s.evaluateExpression("($value != null) === "+e.notEmpty,t),error:"Value must not be empty",clientValidation:!1}:V(e.notEmpty,t)}(e,n);null!=d&&r.push(d)}if(e.maxDigits){var h=function m(e,n){if(null==e.maxDigits)return null;var t={$value:n};return"number"==typeof e.maxDigits?{result:s.evaluateExpression("$value.toString().length <= "+e.maxDigits,t),error:"Digits count must be <= "+e.maxDigits,clientValidation:!1}:V(e.maxDigits,t)}(e,n);null!=h&&r.push(h)}if(e.minDigits){var g=function v(e,n){if(null==e.minDigits)return null;var t={$value:n};return"number"==typeof e.minDigits?{result:s.evaluateExpression("$value.toString().length >= "+e.minDigits,t),error:"Digits count must be >= "+e.minDigits,clientValidation:!1}:V(e.minDigits,t)}(e,n);null!=g&&r.push(g)}return r}(r,n[o],n),e.valid=e.validationResults.reduce((function(e,n){return e&&n.result}),!0)}else e.valid=!0}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function U(e,n){var t=e.warning;null!=t&&null!=n[E(e)]&&t&&(e.warningResults=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function r(e,n){
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
return function t(e,n){return e.conditions.map((function(e){return function t(e,n,r){return{result:s.evaluateExpression(e.condition,n,r),warning:e.warningMessage}}(e,n)}))}(e,n)}(t,n))}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function B(e,n){e.filteredChoices=null!=e.choicesFilter?e.node.choicesOrigin.choices.filter((function(t){return n.$choice=t,n.$choiceValue=t.value,s.evaluateExpression(e.choicesFilter.formula,n)})):e.node.choicesOrigin.choices}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function k(e){var n=null!=e.conditionalBranches&&e.conditionalBranches.length>0?e.conditionalBranches:[s.alwaysCondition()];return Object.assign(Object.assign({},e),{parentNode:null!=e.parentNode?e.parentNode:0,label:e.label||"",visibility:e.visibility||s.alwaysCondition(),conditionalBranches:n})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function G(n){var t=k(Object.assign(Object.assign({},n),{nodeType:e.AjfNodeType.AjfField})),r=null!=n.editable?n.editable:n.fieldType!==e.AjfFieldType.Formula&&n.fieldType!==e.AjfFieldType.Table;return Object.assign(Object.assign(Object.assign({},t),n),{nodeType:e.AjfNodeType.AjfField,editable:r,defaultValue:null!=n.defaultValue?n.defaultValue:null,size:n.size||"normal"})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */(
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
y=e.AjfFieldType||(e.AjfFieldType={}))[y.String=0]="String",y[y.Text=1]="Text",y[y.Number=2]="Number",y[y.Boolean=3]="Boolean",y[y.SingleChoice=4]="SingleChoice",y[y.MultipleChoice=5]="MultipleChoice",y[y.Formula=6]="Formula",y[y.Empty=7]="Empty",y[y.Date=8]="Date",y[y.DateInput=9]="DateInput",y[y.Time=10]="Time",y[y.Table=11]="Table",y[y.Geolocation=12]="Geolocation",y[y.Barcode=13]="Barcode",y[y.File=14]="File",y[y.Image=15]="Image",y[y.VideoUrl=16]="VideoUrl",y[y.LENGTH=17]="LENGTH",(
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
b=e.AjfNodeType||(e.AjfNodeType={}))[b.AjfField=0]="AjfField",b[b.AjfFieldNodeLink=1]="AjfFieldNodeLink",b[b.AjfNodeGroup=2]="AjfNodeGroup",b[b.AjfSlide=3]="AjfSlide",b[b.AjfRepeatingSlide=4]="AjfRepeatingSlide",b[b.LENGTH=5]="LENGTH";var J={};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function W(e){return e.fieldType>100&&null!=J[e.fieldType]&&!0===J[e.fieldType].isFieldWithChoice}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function $(n){return null!=n&&(n.nodeType===e.AjfNodeType.AjfRepeatingSlide||n.nodeType===e.AjfNodeType.AjfSlide)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function z(n){return null!=n&&(n.nodeType===e.AjfNodeType.AjfNodeGroup||$(n))}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function L(e,n){void 0===n&&(n=!1);var t=[];return e.forEach((function(e){M(e)&&t.push(e),function r(e){return null!=e&&null!=e.node&&z(e.node)}(e)&&(n&&t.push(e),t=t.concat(L(e.nodes,n)))})),t}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function H(e){return null!=e&&null!=e.node&&$(e.node)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function q(n){return null!=n&&null!=n.node&&
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function t(n){return null!=n&&n.nodeType===e.AjfNodeType.AjfNodeGroup}(n.node)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function Y(e){return{node:e.node,prefix:e.prefix?x(e.prefix):[],visible:null==e.visible||e.visible,conditionalBranches:[],updatedEvt:new n.EventEmitter}}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function Z(e,t){var r=Y(e),o=null;if(null!=r.node&&null!=t){var i=E(r);null!=t[r.node.name]?o=t[r.node.name]:null!=t[i]?o=t[i]:null!=e.node.defaultValue&&(t[i]=e.node.defaultValue,o=t[i])}return Object.assign(Object.assign({},r),{node:e.node,value:o,valid:!1,validationResults:e.validationResults||[],warningResults:e.warningResults||[],warningTrigger:new n.EventEmitter})}function K(e,t){var r=Z(e,t);return Object.assign(Object.assign({},r),{node:e.node,filteredChoices:x(e.node.choices),firstTriggerConditionDone:{},selectionTrigger:new n.EventEmitter})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function Q(e){var n=Y(e);return Object.assign(Object.assign({},n),{node:e.node,nodes:[],slideNodes:[],flatNodes:[],valid:!1,position:0})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function X(e){return Object.assign(Object.assign({},e),{conditions:e.conditions||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function ee(e){return Object.assign(Object.assign({},e),{conditions:e.conditions||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function ne(n){return null!=n&&(n.nodeType===e.AjfNodeType.AjfNodeGroup||n.nodeType===e.AjfNodeType.AjfRepeatingSlide)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function te(e,n,t){var r=e.condition,o=s.normalizeExpression(r,n,t);return o===r?e:{condition:o}}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function re(e,n,t){var r=!1,o=e.map((function(e){var o=te(e,n,t);return o!==e&&(r=!0),o}));return r?o:e}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function oe(e,n,t){var r=e.formula,o=s.normalizeExpression(r,n,t);return o===r?e:{formula:o}}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function ie(e){return Object.assign(Object.assign({},e),{clientValidation:e.clientValidation||!1,errorMessage:e.errorMessage||"Undefined Error"})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function ae(e){return Object.assign(Object.assign({},e),{warningMessage:e.warningMessage||"Undefined Warning"})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function se(n){return null!=n&&null!=n.node&&H(n)&&
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function t(n){return null!=n&&n.nodeType===e.AjfNodeType.AjfRepeatingSlide}(n.node)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function ue(e){var n=[];return e.forEach((function(e){n.push(e),z(e)&&(n=n.concat(ue(e.nodes)))})),n}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function le(e,n){var t=[];return e.filter((function(e){return null!=n?e.parent==n:null==e.parent||0===e.parent})).sort((function(e,n){return e.parentNode-n.parentNode})).forEach((function(n){t.push(n),t=t.concat(le(e,n.id))})),t}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function ce(e,n){var t=e.reps||0;if(n=n||{},null==e.node.formulaReps){var r=n[E(e)];null!=r?e.reps=r:0==t&&(e.reps=1)}else{var o=s.evaluateExpression(e.node.formulaReps.formula,n);o!==t&&(e.reps=o)}return e.canAdd=0===e.node.maxReps||e.reps<e.node.maxReps,e.canRemove=0===e.node.minReps||e.reps>e.node.minReps,t}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var pe=function(){function e(){this._baseUtilFunctions=["/**\n        * count the number of digit contained on x.\n        * @param  x the value used for digit count\n        * @return the count of the digit\n      */\n    var digitCount = function(x) { return x.toString().length; }","/**\n        * count the number of decimal contained on x.\n        * @param  x the value used for decimal count\n        * @return the count of the decimal\n      */\n    var decimalCount = function(x) {\n      return (parseFloat(x).toString().split('.')[1] || []).length;\n    }","/**\n        * check if x is integer\n        * @param  x the value used for check\n        * @return true if x is a number\n      */\n    var isInt = function(x) { return !/[,.]/.test(x); }","/**\n        * check if x is not empity\n        * @param  x the value used for check\n        * @return true if x defined and not null and the number of digit is > 0\n      */\n    var notEmpty = function (x) {\n      return (typeof x !== 'undefined' && x !== null ? x.toString().length > 0 : false);\n    }","/**\n        * check if x is contained on array\n        * @param  x the value used for check\n        * @return the position of x on array or if array === x\n      */\n    var valueInChoice = function(array, x) { return array.indexOf(x) > -1 || array === x; }","var scanGroupField = function(reps, acc, callback) {\n        for (var i = 0; i < reps; i++) {\n            acc = callback(acc, i);\n        }\n        return acc;\n    }","/**\n        * sum the value contained on array\n        * @param  x the array\n        * @return the sum\n      */\n    var sum = function(array) {return array.reduce(function(a, b){ return a + b; }, 0); }","var dateOperations = function(dString, period, operation, v) {\n        fmt = 'mm/dd/yyyy';\n        var d = (typeof dString !== 'undefined') ? dateUtils.parse(dString) : new Date();\n        if (operation == 'remove') {\n          v = -v;\n        }\n        var dateOp;\n        switch (period) {\n          case 'day':\n            dateOp = dateUtils.addDays;\n            break;\n          case 'month':\n            dateOp = dateUtils.addMonths;\n            break;\n          case 'year':\n            dateOp = dateUtils.addYears;\n            break;\n          default:\n            return -1;\n        }\n        return dateUtils.format(dateOp(d, v), fmt);\n      }","/**\n        * round the num\n        * @param  num the value to round\n        * @param  digits how many digit\n        * @return num rounded\n      */\n      var round = function(num, digits) {\n        digits = digits || 0;\n        var f = 0;\n        try { f = parseFloat(num); } catch (e) { }\n        var m = Math.pow(10, digits);\n        return Math.round(f * m) / m;\n      }","/**\n        * extract the property of the source object with property != null\n        * @param  source array of object wich contains property\n        * @param  property the property on wich we want filter\n        * @return array of dates\n      */\n      var extractArray = function(source, property, property2) {\n        source = (source || []).slice(0);\n        var l = source.length;\n        var res = [];\n        for (var i = 0; i < l ; i++) {\n          if (source[i][property] != null && source[i][property2] != null) {\n            res.push(source[i][property] + source[i][property2]);\n          }\n          else if (source[i][property] != null) {\n            res.push(source[i][property]);\n          }\n        }\n        return res;\n      }","/**\n        * extract the property of the source object with property != null\n        * @param  source array of object wich contains property\n        * @param  propertues string array the properties to sum\n        * @return the sum\n      */\n      var extractSum = function(source, properties) {\n        var sum = 0;\n        properties = (properties || []).slice(0);\n        var l = properties.length;\n\n        for (var i = 0; i < l ; i++) {\n          var array = extractArray(source, properties[i]);\n          var leng = array.length;\n          for(var j = 0; j < leng; i++) {\n            sum += array[j];\n          }\n        }\n        return sum;\n      }","/**\n        * extract the array of sum for each week != null\n        * @param  source array of object wich contains property\n        * @param  propertues string array the properties to sum\n        * @return the sum\n      */\n      var extractArraySum = function(source, properties) {\n        var arrays = [];\n        properties = (properties || []).slice(0);\n\n        for (var propI = 0; propI < properties.length ; propI++) {\n          var array = extractArray(source, properties[propI]);\n          arrays.push(array);\n        }\n\n        var res = [];\n        for (var weekI = 0; weekI < array.length; weekI ++ ) {\n          var sum = 0;\n          for (var propI = 0; propI < properties.length ; propI++) {\n            sum = sum + arrays[propI][weekI]\n          }\n          res.push(sum);\n        }\n        return res;\n      }","/**\n        * draw a threshold line on chart related to the property\n        * @param  source array of object wich contains property\n        * @param  property the property on wich we want filter\n        * @return array of dates\n      */\n      var drawThreshold = function(source, property, threshold) {\n        source = (source || []).slice(0);\n        var l = source.length;\n        var res = [];\n        for (var i = 0; i < l ; i++) {\n          if (source[i][property] != null) {\n            res.push(threshold);\n          }\n        }\n        return res;\n      }",'/**\n        * extract the dates of the source object with property != null\n        * @param  source array of object wich contains property and date_start\n        * @param  property the property on wich we want to calculate dates\n        * @param  format the format of the date\n        * @return array of dates\n      */\n      var extractDates = function(source, property, format) {\n        source = (source || []).slice(0);\n        var l = source.length;\n        var res = [];\n        var prefix = \'\';\n        for (var i = 0; i < l ; i++) {\n          if (source[i][property] != null) {\n            switch(format) {\n              case "WW":\n                prefix = "W";\n                break;\n              case "mm":\n                prefix = "M";\n                break;\n              default:\n                prefix = "";\n            }\n            res.push(prefix + formatDate(source[i]["date_start"], format));\n          }\n        }\n        return res;\n      }',"/**\n        * extract the last property contains in source != null\n        * @param  source array of object wich contains property and date_start\n        * @param  property the property to find\n        * @return the last property != null\n      */\n      var lastProperty = function(source, property) {\n        source = (source || []).slice(0);\n        var l = source.length -1;\n\n        while (l >= 0 && source[l][property] == null) {\n          l--;\n          if (l < 0) return 0;\n        }\n        return l >= 0 ? source[l][property] : 0;\n      }","var sumLastProperties = function(source, properties) {\n        source = (source || []).slice(0);\n        var sum = 0;\n        for (var i = 0; i < properties.length; i++) {\n          sum += lastProperty(source, properties[i]);\n        }\n\n        return sum;\n      }",'/**\n        * compute the trend of the property contained on the source.\n        * @param  source array of object wich contains property\n        * @param  property the property on wich we want to calculate the trend\n        * @return an html icon that identifies the trend\n      */\n      var calculateTrendProperty = function(source, property) {\n        source = (source || []).slice(0);\n        var last = source.length - 1;\n        while (source[last][property] == null) {\n          if (last == 0) {\n            break;\n          }\n          last--;\n        }\n        var lastLast = last - 1;\n        if (last == 0) {\n          lastLast = last;\n        } else {\n          while (source[lastLast][property] == null) {\n            if (lastLast == 0) {\n              lastLast = last;\n              break;\n            }\n            lastLast--;\n          }\n        }\n\n        var lastProperty = source[last]?(source[last][property] || 0): 0;\n        var lastLastProperty = source[lastLast]?(source[lastLast][property] || 0): 0;\n\n        if (lastProperty == lastLastProperty) {\n          return \'<p><i class="material-icons" style="color:blue">trending_flat</i></p>\';\n        } else if (lastProperty > lastLastProperty) {\n          return \'<p><i class="material-icons" style="color:green">trending_up</i></p>\';\n        } else {\n          return \'<p><i class="material-icons" style="color:red">trending_down</i></p>\';\n        }\n      }',"/**\n        * compute the average value of the property contained on the source.\n        * @param  source array of object wich contains property\n        * @param  property the property on wich we want to calculate the average\n        * @param  range the range on wich we want to calculate the average\n        * @param  coefficent the coefficent used for calculate the threshold\n                  if coefficent is 0 mean return the count of property > 0\n        * @return the average value || the count of property > 0\n      */\n      var calculateAvgProperty = function(source, property, range, coefficient) {\n        source = (source || []).slice(0);\n\n        source.pop();\n\n        coefficient = coefficient || 1;\n        range = range || 12;\n\n        var l = source.length;\n        var res = 0;\n        var counter = 0;\n        var noZero = 0;\n\n        if(l < range) {\n          range = l;\n        }\n\n        while (range != 0) {\n          counter++;\n          if (source[l - 1][property] != null) {\n            res += source[l - 1][property];\n\n            if (source[l - 1][property] > 0) {\n              noZero++;\n            }\n          }\n          l--;\n          range--;\n        }\n\n        if (coefficient == 0) {\n          return noZero;\n        } else {\n          var threshold = (res/counter)*coefficient || 0;\n          return threshold;\n        }\n      }","var alert = function(source, property, threshold, fmt) {\n        source = (source || []).slice(0);\n        var l = source.length;\n\n        if ( lastProperty(source, property)  > threshold ) {\n          return '<p><i class=\"material-icons\" style=\"color:red\">warning</i></p>';\n          } else {\n            return '<p></p>';\n          }\n      }","var formatNumber = function(num, fmt) {\n        fmt = fmt || '0,0[.]0';\n        return numbro(num).format(fmt);\n      }","var formatDate = function(date, fmt) {\n        fmt = fmt || 'mm-dd-yyyy';\n        return dateUtils.format(date, fmt);\n      }","var isoMonth = function(date, fmt) {\n        fmt = fmt || 'mm';\n        var du = dateUtils;\n        return du.format(du.addDays(du.startOfMonth(date), 4),fmt)\n      }","var nextCounterValue = function(counterName, firstValue) {\n        firstValue = firstValue != null ? firstValue : 0;\n        if (execContext['$$'+counterName] == null) {\n          execContext['$$'+counterName] = firstValue;\n        } else {\n          execContext['$$'+counterName]++;\n        }\n        return execContext['$$'+counterName];\n      }","var getCoordinate = function(source, zoom) {\n        zoom = zoom || 6;\n        if(source == null) {\n          return [51.505,-0.09, zoom];\n        } else {\n          return [source[0], source[1], zoom];\n        }\n      }"],this._functions=[],this._functionsStr="",this._initFunctions()}return e.prototype.addFunction=function(e){this._functions.push(e),this._initFunctions()},e.prototype.addFunctionHandler=function(e,n){void 0===s.AjfExpressionUtils.utils[e]&&(s.AjfExpressionUtils.utils[e]={fn:n})},e.prototype._initFunctions=function(){var e=this._functions.map((function(e){return"string"==typeof e?e:e.toString()})).join("; ");this._functionsStr=this._baseUtilFunctions.join("; ")+"; "+e,s.AjfExpressionUtils.UTIL_FUNCTIONS=this._functionsStr},e}();pe.decorators=[{type:n.Injectable}],pe.ctorParameters=function(){return[]};var de=function(e){for(var n=e.flatNodes.length,t=!0,r=0;r<n;r++){var o=e.flatNodes[r];if(o.visible&&M(o)&&!o.valid){t=!1;break}}e.valid!==t&&(e.valid=t)},fe=de,he=function(){function u(e){this._visibilityNodesMapUpdates=new r.Subject,this._repetitionNodesMapUpdates=new r.Subject,this._conditionalBranchNodesMapUpdates=new r.Subject,this._formulaNodesMapUpdates=new r.Subject,this._validationNodesMapUpdates=new r.Subject,this._warningNodesMapUpdates=new r.Subject,this._filteredChoicesNodesMapUpdates=new r.Subject,this._triggerConditionsNodesMapUpdates=new r.Subject,this._nextSlideConditionsNodesMapUpdates=new r.Subject,this._formInitEvent=new n.EventEmitter,this.formInitEvent=this._formInitEvent,this._formGroup=new r.BehaviorSubject(null),this.formGroup=this._formGroup,this._form=new r.BehaviorSubject(null),this._nodesUpdates=new r.Subject,this._formGroupSubscription=r.Subscription.EMPTY,this._valueChanged=new r.Subject,this._nextSlideTrigger=new n.EventEmitter,this.nextSlideTrigger=this._nextSlideTrigger,this._slidesNum=new r.BehaviorSubject(0),this.slidesNum=this._slidesNum,this._initUpdateMapStreams(),this._initNodesStreams(),this._initErrorsStreams(),this._initFormStreams(),this._updateFormValueAndValidity()}return Object.defineProperty(u.prototype,"nodesTree",{get:function(){return this._flatNodesTree},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"errorPositions",{get:function(){return this._errorPositions},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"errors",{get:function(){return this._errors},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"currentSupplementaryInformations",{get:function(){var e=this._form.getValue();return null!=e&&null!=e.form?e.form.supplementaryInformations:null},enumerable:!1,configurable:!0}),u.prototype.setForm=function(e,n){void 0===n&&(n={}),this._initUpdateMapStreams(),null!=e&&0===Object.keys(n).length&&Object.keys(e.initContext||{}).length>0&&(n=e.initContext||{});var t=this._form.getValue();(null==t&&null!=e||null!=t&&e!==t.form)&&this._form.next({form:e,context:n})},u.prototype.getFormValue=function(){var e=this._formGroup.getValue();return null==e?{}:i.deepCopy(e.value)},u.prototype.addGroup=function(e){var n=this;return new r.Observable((function(t){if(null!=e.formulaReps)return t.next(!1),void t.complete();var r=e.node.maxReps;if(r>0&&e.reps+1>r)return t.next(!1),void t.complete();var o=e.reps;e.reps=e.reps+1,e.canAdd=0===e.node.maxReps||e.reps<e.node.maxReps,e.canRemove=0===e.node.minReps||e.reps>e.node.minReps,n._nodesUpdates.next((function(r){var i=L(r,!0);return n._adjustReps(i,e,o,n.getFormValue()),t.next(!0),t.complete(),r}))}))},u.prototype.removeGroup=function(e){var n=this;return new r.Observable((function(t){if(null!=e.formulaReps)return t.next(!1),void t.complete();if(e.reps-1<e.node.minReps)return t.next(!1),void t.complete();var r=e.reps;e.reps=e.reps-1,e.canAdd=0===e.node.maxReps||e.reps<e.node.maxReps,e.canRemove=0===e.node.minReps||e.reps>e.node.minReps,n._nodesUpdates.next((function(o){return n._adjustReps(o,e,r,n.getFormValue()),t.next(!0),t.complete(),o}))}))},u.prototype.getControl=function(e){return this.formGroup.pipe(o.map((function(n){var t=E(e);return null!=n&&n.contains(t)?n.controls[t]:null})))},u.prototype._initErrorsStreams=function(){var n=this;this._errorPositions=this._valueChanged.pipe(o.withLatestFrom(this._nodes,this._form),o.filter((function(e){var n=C(e,3)[2];return null!=n&&null!=n.form})),o.map((function(t){var r=C(t,3),o=r[2].form,i=0,a=[];return r[1].forEach((function(n){if(n.node.nodeType===e.AjfNodeType.AjfRepeatingSlide)for(var t=n,r=0;r<t.reps;r++)n.visible&&(i++,0==r&&(t.position=i),(u=r)>=(s=t).slideNodes.length||s.slideNodes[u].map((function(e){return!(e.visible&&Object.keys(e).indexOf("valid")>-1)||e.valid})).reduce((function(e,n){return e&&n}),!0)||a.push(i));else if(n.node.nodeType===e.AjfNodeType.AjfSlide){var o=n;o.visible&&(i++,o.position=i,o.valid||a.push(i))}var s,u})),o.valid=0==a.length,n._slidesNum.next(i),a})),o.publishReplay(),o.refCount()),this._errors=this._errorPositions.pipe(o.map((function(e){return null!=e?e.length:0})),o.startWith(0),o.publishReplay(),o.refCount())},u.prototype._initUpdateMapStreams=function(){this._visibilityNodesMap=this._visibilityNodesMapUpdates.pipe(o.scan((function(e,n){return n(e)}),{}),o.startWith({}),o.share()),this._repetitionNodesMap=this._repetitionNodesMapUpdates.pipe(o.scan((function(e,n){return n(e)}),{}),o.startWith({}),o.share()),this._conditionalBranchNodesMap=this._conditionalBranchNodesMapUpdates.pipe(o.scan((function(e,n){return n(e)}),{}),o.startWith({}),o.share()),this._formulaNodesMap=this._formulaNodesMapUpdates.pipe(o.scan((function(e,n){return n(e)}),{}),o.startWith({}),o.share()),this._validationNodesMap=this._validationNodesMapUpdates.pipe(o.scan((function(e,n){return n(e)}),{}),o.startWith({}),o.share()),this._warningNodesMap=this._warningNodesMapUpdates.pipe(o.scan((function(e,n){return n(e)}),{}),o.startWith({}),o.share()),this._filteredChoicesNodesMap=this._filteredChoicesNodesMapUpdates.pipe(o.scan((function(e,n){return n(e)}),{}),o.startWith({}),o.share()),this._triggerConditionsNodesMap=this._triggerConditionsNodesMapUpdates.pipe(o.scan((function(e,n){return n(e)}),{}),o.startWith({}),o.share()),this._nextSlideConditionsNodesMap=this._nextSlideConditionsNodesMapUpdates.pipe(o.scan((function(e,n){return n(e)}),{}),o.startWith({}),o.share()),this._nodesMaps=[this._visibilityNodesMap,this._repetitionNodesMap,this._conditionalBranchNodesMap,this._formulaNodesMap,this._validationNodesMap,this._warningNodesMap,this._nextSlideConditionsNodesMap,this._filteredChoicesNodesMap,this._triggerConditionsNodesMap]},u.prototype._initFormStreams=function(){var n=this,i=this._form;i.pipe(o.map((function(e){return n._initFormGroupStreams(new t.FormGroup({}))}))).subscribe(this._formGroup),i.pipe(o.switchMap((function(e){if(null==e||null==e.form)return r.of(e);var n=e.form.choicesOrigins||[];return 0===n.length?r.of(e):r.from(Promise.all(n.map((function(e){return T(e)})))).pipe(o.map((function(){return e})))})),o.map((function(t){return function(r){var o;if(null!=t&&null!=t.form){var i=t,a=i.form.nodes;o=n._orderedNodesInstancesTree(ue(a),a,void 0,[],i.context||{})}else o=[];var s=0;return o.forEach((function(n){if(n.node.nodeType===e.AjfNodeType.AjfRepeatingSlide)for(var t=n,r=0;r<t.reps;r++)n.visible&&(s++,0==r&&(t.position=s));else n.node.nodeType===e.AjfNodeType.AjfSlide&&n.visible&&(s++,n.position=s)})),o}}))).subscribe(this._nodesUpdates)},u.prototype._initNodeInstance=function(r,o,i,a,u){var l=this;void 0===u&&(u=!0);var c=function p(n,t,r,o){var i=null,a=t.nodeType;switch(a){case e.AjfNodeType.AjfField:var u=t;if(u.fieldType>100)i=null!=J[u.fieldType]&&null!=J[u.fieldType].createInstance?J[u.fieldType].createInstance({node:t,prefix:r},o):Z({node:t,prefix:r},o);else switch(u.fieldType){case e.AjfFieldType.SingleChoice:case e.AjfFieldType.MultipleChoice:i=K({node:t,prefix:r},o);break;case e.AjfFieldType.Table:i=function l(e,n){!function t(e){e.rows.forEach((function(n,t){n.forEach((function(n,r){"string"==typeof n&&(e.rows[t][r]={formula:n,editable:e.editable})}))}))}(e.node);var r=Z(e,n);return Object.assign(Object.assign({},r),{node:e.node,context:n,hideEmptyRows:e.hideEmptyRows||!1,controls:[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */({node:t,prefix:r},o);break;default:i=Z({node:t,prefix:r},o)}break;case e.AjfNodeType.AjfNodeGroup:i=function c(e){var n=Y(e);return Object.assign(Object.assign({},n),{node:e.node,formulaReps:e.formulaReps,reps:0,nodes:[],flatNodes:[]})}({node:t,prefix:r});break;case e.AjfNodeType.AjfRepeatingSlide:i=function p(n){var t=n.node,r=N(n,["node"]),o=N(t,["nodeType"]),i=Q(Object.assign(Object.assign({},r),{node:Object.assign({nodeType:e.AjfNodeType.AjfSlide},o)}));return Object.assign(Object.assign({},i),{node:n.node,slideNodes:[],formulaReps:n.formulaReps,reps:0,nodes:[],flatNodes:[]})}({node:t,prefix:r});break;case e.AjfNodeType.AjfSlide:i=Q({node:t,prefix:r})}if(null!=i)if(null!=r&&r.length>0){var d=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function f(e,n){var t={};return function r(e,n){for(var t=[],r=n.parent;null!=r;){var o=e.map((function(e){return e.node||e})).find((function(e){return e.id==r}));o&&ne(o)&&t.push(o),r=null!=o?o.parent:null}return t}(e,n).forEach((function(e,n){return(e.nodes||[]).forEach((function(e){S(e)&&(t[e.name]=n)}))})),t}(n,t);if(null!=t.visibility){var h=t.visibility.condition,m=s.normalizeExpression(h,d,r);i.visibility=m!==h?s.createCondition({condition:m}):t.visibility}var g=null!=i.node.conditionalBranches&&i.node.conditionalBranches.length>0?i.node.conditionalBranches:[s.alwaysCondition()];if(i.conditionalBranches=re(g,d,r),a===e.AjfNodeType.AjfNodeGroup||a===e.AjfNodeType.AjfRepeatingSlide){var v=i,y=v.node.formulaReps;if(null!=y){var b=y.formula,_=s.normalizeExpression(b,d,r);v.formulaReps=_!==b?s.createFormula({formula:_}):y}}else if(a===e.AjfNodeType.AjfField){var j=(I=i).node;if(j.formula&&(I.formula=oe(j.formula,d,r)),null!=j.validation){var C=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function x(e,n,t){var r=!1,o=e.map((function(e){var o=function i(e,n,t){var r=e.condition,o=s.normalizeExpression(r,n,t);return o===r?e:ie({condition:o})}(e,n,t);return o!==e&&(r=!0),o}));return r?o:e}(j.validation.conditions,d,r);C!==j.validation.conditions?(I.validation=X(j.validation),I.validation.conditions=C):I.validation=j.validation}if(null!=j.warning){var T=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function A(e,n,t){var r=!1,o=e.map((function(e){var o=function i(e,n,t){var r=e.condition,o=s.normalizeExpression(r,n,t);return o===r?e:ae({condition:o})}(e,n,t);return o!==e&&(r=!0),o}));return r?o:e}(j.warning.conditions,d,r);T!==j.warning.conditions?(I.warning=ee(j.warning),I.warning.conditions=T):I.warning=j.warning}if(null!=j.nextSlideCondition&&(I.nextSlideCondition=te(j.nextSlideCondition,d,r)),F(j)){var O=(E=i).node;null!=O.choicesFilter&&(E.choicesFilter=oe(O.choicesFilter,d,r)),null!=O.triggerConditions&&(E.triggerConditions=re(O.triggerConditions,d,r))}}}else if(i.visibility=i.node.visibility,g=null!=i.node.conditionalBranches&&i.node.conditionalBranches.length>0?i.node.conditionalBranches:[s.alwaysCondition()],i.conditionalBranches=g,q(i)||se(i))i.formulaReps=i.node.formulaReps;else if(M(i)){var I,E;(I=i).validation=I.node.validation,I.warning=I.node.warning,I.nextSlideCondition=I.node.nextSlideCondition,w(i)&&((E=i).choicesFilter=E.node.choicesFilter,E.triggerConditions=E.node.triggerConditions),I.formula=I.node.formula}return i}(r,o,i,a);if(null!=c){var d=c.node.nodeType;if(d===e.AjfNodeType.AjfNodeGroup||d===e.AjfNodeType.AjfRepeatingSlide?this._explodeRepeatingNode(r,c,a):d===e.AjfNodeType.AjfSlide&&(c.nodes=this._orderedNodesInstancesTree(r,c.node.nodes,c.node.id,i,a)),O(c,a,u),A(c,a),d===e.AjfNodeType.AjfField){var f=c;if(W(f.node)||F(f.node))B(f,a);else{if(
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function h(n){return null!=n&&M(n)&&function t(n){return n.fieldType===e.AjfFieldType.Table}(n.node)}(f)){var m=f,g=m.node;m.context=a[E(m)]||a;var v=this._formGroup.getValue(),y=[];y.push([o.label,g.columnLabels]),null!=v&&(g.rows.forEach((function(e,r){var o=[];e.forEach((function(e,i){var a=g.name+"__"+r+"__"+i,s={control:new t.FormControl,show:!1};s.control.setValue(m.context[e.formula]),v.registerControl(a,s.control),o.push(s);var u={formula:{formula:e.formula},node:{name:a,nodeType:0,editable:!1},visible:!0,prefix:[],conditionalBranches:[],updatedEvt:new n.EventEmitter};l._addToNodesFormulaMap(u,e.formula)})),y.push([g.rowLabels[r],o])})),m.controls=y)}else f.value=a[E(c)];!function b(e,n,t){void 0===t&&(t=!0),O(e,n,t),A(e,n),R(e,n),D(e,n),U(e,n),P(e,n)}(f,a)}}this._addNodeInstance(c)}return c},u.prototype._adjustReps=function(n,t,r,o){var i=this,a=t.reps,s={added:null,removed:null};if(r<a){var u=[];if(null==t.nodes&&(t.nodes=[]),t.node.nodeType===e.AjfNodeType.AjfNodeGroup){var l=G({id:999,name:"",parent:-1,fieldType:e.AjfFieldType.Empty,label:t.node.label}),c=this._initNodeInstance(n,l,t.prefix.slice(0),o);null!=c&&t.nodes.push(c)}for(var p=function(e){var r=t.prefix.slice(0),a=t.node;r.push(e),le(a.nodes,t.node.id).forEach((function(e){var a=i._initNodeInstance(n,e,r,o);null!=a&&(u.push(a),t.nodes.push(a))})),d._addNodeInstance(t)},d=this,f=r;f<a;f++)p(f);s.added=u}else if(r>a){var h=t.nodes.length/r;t.node.nodeType===e.AjfNodeType.AjfNodeGroup&&h++,s.removed=t.nodes.splice(a*h,h),s.removed.forEach((function(e){i._removeNodeInstance(e)}))}if(r!=a&&null==t.formulaReps){var m=this._formGroup.getValue(),g=E(t);null!=m&&m.contains(g)&&m.controls[g].setValue(t.reps)}if(t.flatNodes=L(t.nodes),t.node.nodeType===e.AjfNodeType.AjfRepeatingSlide){var v=t,y=[],b=null!=v.nodes?v.nodes.length/v.reps:0;for(f=0;f<t.reps;f++){var _=f*b;y.push(t.nodes.slice(_,_+b))}v.slideNodes=y}return s},u.prototype._updateFormValueAndValidity=function(){this._nodesUpdates.pipe(o.withLatestFrom(this._formGroup),o.filter((function(e){return null!==C(e,2)[1]}))).subscribe((function(e){C(e,2)[1].updateValueAndValidity()}))},u.prototype._explodeRepeatingNode=function(e,n,t){var r=ce(n,t);r!==n.reps&&this._adjustReps(e,n,r,t)},u.prototype._orderedNodesInstancesTree=function(e,n,t,r,o){var i=this;void 0===t&&(t=null),void 0===r&&(r=[]);var a=[],s=r.length>0?"__"+r.join("__"):"";return le(n,t).forEach((function(n){var t=a.find((function(e){return e.node.id==n.parent&&I(e)==s})),u=i._initNodeInstance(e,n,r,o,null==t||null!=t.verifiedBranch&&t.verifiedBranch==n.parentNode);null!=u&&a.push(u)})),a},u.prototype._formValueDelta=function(e,n){return Object.keys(n).filter((function(t){return e[t]!==n[t]}))},u.prototype._initFormGroupStreams=function(e){var n=this;this._formGroupSubscription.unsubscribe();var t=!0,i=!0;return this._formInitEvent.emit(0),this._formGroupSubscription=e.valueChanges.pipe(o.startWith({}),o.pairwise(),o.debounceTime(200),o.withLatestFrom.apply(void 0,x(this._nodesMaps,[this._flatNodes]))).subscribe((function(e){var o=t&&{}||e[0][0];t=!1;var a=e[0][1],u=e[1],l=e[2],c=e[3],p=e[4],d=e[5],f=e[6],h=e[7],m=e[8],g=e[9],v=e[10],y=n._formValueDelta(o,a),b=y.length,_=[];y.forEach((function(e){if(_=_.concat(v.filter((function(n){return E(n)===e}))),null!=u[e]&&u[e].forEach((function(e){var t=E(e),o=O(e,a),i=M(e);if(o&&!e.visible){var s=n._formGroup.getValue();if(null!=s)var u=r.timer(200).subscribe((function(){u&&!u.closed&&u.unsubscribe(),s.controls[t].setValue(null)}));i&&(e.value=null)}else if(o&&e.visible&&i){var l=n._formGroup.getValue(),c=R(e,a);null!=l&&c.changed&&l.controls[t].setValue(c.value)}-1===_.indexOf(e)&&_.push(e)})),null!=l[e]&&l[e].forEach((function(e){if(ne(e.node)){var t=e,r=ce(t,a);r!==t.reps&&n._adjustReps(v,t,r,a)}-1===_.indexOf(e)&&_.push(e)})),null!=c[e]&&c[e].forEach((function(e){A(e,a);var t=e.verifiedBranch;e.conditionalBranches.forEach((function(r,o){o==t?n._showSubtree(a,v,e,o):n._hideSubtree(a,v,e,o)})),-1===_.indexOf(e)&&_.push(e)})),null!=p[e]&&p[e].forEach((function(e){if(M(e)){var t=e,r=R(t,a),o=n._formGroup.getValue();null!=o&&r.changed&&(D(t,a),o.controls[E(e)].setValue(r.value))}-1===_.indexOf(e)&&_.push(e)})),null!=d[e]&&d[e].forEach((function(e){if(M(e)){var t=e;a.$value=a[E(e)],D(t,a,n.currentSupplementaryInformations)}-1===_.indexOf(e)&&_.push(e)})),null!=f[e]&&f[e].forEach((function(e){if(M(e)){var n=e;U(n,a),null!=n.warningResults&&n.warningResults.filter((function(e){return e.result})).length>0&&n.warningTrigger.emit()}-1===_.indexOf(e)&&_.push(e)})),1==b&&null!=h[e]&&1==h[e].filter((function(e){return!!M(e)&&P(e,a)})).length&&n._nextSlideTrigger.emit(),null!=m[e]&&m[e].forEach((function(e){if(M(e)){var n=e;F(n.node)&&B(n,a)}-1===_.indexOf(e)&&_.push(e)})),1==b&&null!=g[e]){var t=g[e].filter((function(e){if(!M(e))return!1;var n=e;return!!F(n.node)&&function t(e,n){if(null==e.triggerConditions)return!1;var t=E(e);if(e.firstTriggerConditionDone[t])return!1;for(var r=!1,o=e.triggerConditions.length,i=0;i<o;i++)if(s.evaluateExpression(e.triggerConditions[i].condition,n)){r=!0;break}return e.firstTriggerConditionDone[t]=r,r}(n,a)}));1==t.length&&t[0].selectionTrigger.emit()}})),_.forEach((function(e){for(var n=v.indexOf(e)-1;n>=0;){var t=v[n];H(t)&&(de(t),t.updatedEvt.emit()),n--}e.updatedEvt.emit()})),i&&(i=!1,n._formInitEvent.emit(1)),n._valueChanged.next()})),e},u.prototype._showSubtree=function(e,n,t,r){this._updateSubtreeVisibility(e,n,t,!0,r)},u.prototype._hideSubtree=function(e,n,t,r){this._updateSubtreeVisibility(e,n,t,!1,r)},u.prototype._updateSubtreeVisibility=function(e,n,t,r,o){var i,a=this,s=I(t);i=n.filter(null!=o?function(e){return I(e)==s&&e.node.parent==t.node.id&&e.node.parentNode==o}:function(e){return I(e)==s&&e.node.parent==t.node.id});var u=z(t.node);i.forEach((function(o){(!u||u&&null==t.node.nodes.find((function(e){return e.id==o.node.id})))&&(O(o,e,r),R(o,e),a._updateSubtreeVisibility(e,n,o,r))}))},u.prototype._initNodesStreams=function(){this._nodes=this._nodesUpdates.pipe(o.scan((function(e,n){return n(e)}),[]),o.share()),this._flatNodesTree=this._nodes.pipe(o.map((function(e){return function n(e){var n=[];return e.forEach((function(e){if(H(e)){var t=e;n.push(t),t.flatNodes=L(t.nodes)}})),n}(e)})),o.share()),this._flatNodes=this._flatNodesTree.pipe(o.map((function(e){var n=[];return e.forEach((function(e){n.push(e),n=n.concat(e.flatNodes),de(e)})),n})),o.share())},u.prototype._removeNodeInstance=function(e){var n=E(e);return this._removeNodesVisibilityMapIndex(n),this._removeNodesRepetitionMapIndex(n),this._removeNodesConditionalBranchMapIndex(n),this._removeNodesFormulaMapIndex(n),this._removeNodesValidationMapIndex(n),this._removeNodesWarningMapIndex(n),this._removeNodesNextSlideConditionsMapIndex(n),this._removeNodesFilteredChoicesMapIndex(n),this._removeNodesTriggerConditionsMapIndex(n),H(e)?this._removeSlideInstance(e):(ne(e.node)?this._removeNodeGroupInstance(e):M(e)&&this._removeFieldInstance(e),e)},u.prototype._removeSlideInstance=function(e){var n=this,t=e.node;return null!=t.visibility&&this._removeFromNodesVisibilityMap(e,t.visibility.condition),e.conditionalBranches.forEach((function(t){n._removeFromNodesConditionalBranchMap(e,t.condition)})),e},u.prototype._removeNodeGroupInstance=function(e){var n=e.node;return null!=n.visibility&&this._removeFromNodesVisibilityMap(e,n.visibility.condition),null!=e.formulaReps&&null!=n.formulaReps&&this._removeFromNodesRepetitionMap(e,n.formulaReps.formula),e},u.prototype._removeFieldInstance=function(e){var n=this,t=this._formGroup.getValue(),r=E(e);if(null!=t&&t.contains(r)&&t.removeControl(r),null!=e.validation&&this._validationNodesMapUpdates.next((function(e){return null==e[r]&&delete e[r],e})),null!=e.visibility&&this._removeFromNodesVisibilityMap(e,e.visibility.condition),e.conditionalBranches.forEach((function(t){n._removeFromNodesConditionalBranchMap(e,t.condition)})),e.formula&&this._removeFromNodesFormulaMap(e,e.formula.formula),ne(e.node)&&null!=e.formulaReps&&this._removeFromNodesRepetitionMap(e,e.formulaReps.formula),null!=e.validation&&null!=e.validation.conditions&&e.validation.conditions.forEach((function(t){n._removeFromNodesValidationMap(e,t.condition)})),null!=e.warning&&e.warning.conditions.forEach((function(t){n._removeFromNodesWarningMap(e,t.condition)})),null!=e.nextSlideCondition&&this._removeFromNodesNextSlideConditionsMap(e,e.nextSlideCondition.condition),F(e.node)){var o=e;null!=o.choicesFilter&&(this._removeFromNodesFilteredChoicesMap(e,o.choicesFilter.formula),null!=o.triggerConditions&&o.triggerConditions.forEach((function(t){n._removeFromNodesTriggerConditionsMap(e,t.condition)})))}return e},u.prototype._addNodeInstance=function(n){return ne(n.node)?this._addNodeGroupInstance(n):
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function t(n){return null!=n&&null!=n.node&&function t(n){return null!=n&&n.nodeType===e.AjfNodeType.AjfSlide}(n.node)}(n)?this._addSlideInstance(n):M(n)?this._addFieldInstance(n):n},u.prototype._addFieldInstance=function(e){var n=this,r=this._formGroup.getValue(),o=E(e);if(null!=r&&!r.contains(o)){var i=new t.FormControl;i.setValue(e.value),r.registerControl(o,i)}if(null!=e.validation?this._validationNodesMapUpdates.next((function(n){return null==n[o]&&(n[o]=[]),-1==n[o].indexOf(e)&&n[o].push(e),n})):e.valid=!0,null!=e.visibility&&this._addToNodesVisibilityMap(e,e.visibility.condition),e.conditionalBranches.forEach((function(t){n._addToNodesConditionalBranchMap(e,t.condition)})),e.formula&&this._addToNodesFormulaMap(e,e.formula.formula),q(e)&&null!=e.formulaReps&&this._addToNodesRepetitionMap(e,e.formulaReps.formula),null!=e.validation&&null!=e.validation.conditions&&e.validation.conditions.forEach((function(t){n._addToNodesValidationMap(e,t.condition)})),null!=e.warning&&e.warning.conditions.forEach((function(t){n._addToNodesWarningMap(e,t.condition)})),null!=e.nextSlideCondition&&this._addToNodesNextSlideConditionsMap(e,e.nextSlideCondition.condition),W(e.node)||w(e)){var a=e;null!=a.choicesFilter&&this._addToNodesFilteredChoicesMap(e,a.choicesFilter.formula),null!=a.triggerConditions&&a.triggerConditions.forEach((function(t){n._addToNodesTriggerConditionsMap(e,t.condition)}))}return e},u.prototype._addSlideInstance=function(e){var n=this,t=e.node;return null!=t.visibility&&this._addToNodesVisibilityMap(e,t.visibility.condition),e.conditionalBranches.forEach((function(t){n._addToNodesConditionalBranchMap(e,t.condition)})),e},u.prototype._addNodeGroupInstance=function(e){var n=this,r=e.node;if(null!=r.visibility&&this._addToNodesVisibilityMap(e,r.visibility.condition),e.conditionalBranches.forEach((function(t){n._addToNodesConditionalBranchMap(e,t.condition)})),null!=e.formulaReps)null!=r.formulaReps&&this._addToNodesRepetitionMap(e,r.formulaReps.formula);else{var o=this._formGroup.getValue(),i=E(e);if(null!=o&&!o.contains(i)){var a=new t.FormControl;a.setValue(e.reps),o.registerControl(i,a)}}return e},u.prototype._removeNodesVisibilityMapIndex=function(e){this._removeNodesMapIndex(this._visibilityNodesMapUpdates,e)},u.prototype._removeNodesRepetitionMapIndex=function(e){this._removeNodesMapIndex(this._repetitionNodesMapUpdates,e)},u.prototype._removeNodesConditionalBranchMapIndex=function(e){this._removeNodesMapIndex(this._conditionalBranchNodesMapUpdates,e)},u.prototype._removeNodesFormulaMapIndex=function(e){this._removeNodesMapIndex(this._formulaNodesMapUpdates,e)},u.prototype._removeNodesValidationMapIndex=function(e){this._removeNodesMapIndex(this._validationNodesMapUpdates,e)},u.prototype._removeNodesWarningMapIndex=function(e){this._removeNodesMapIndex(this._warningNodesMapUpdates,e)},u.prototype._removeNodesFilteredChoicesMapIndex=function(e){this._removeNodesMapIndex(this._filteredChoicesNodesMapUpdates,e)},u.prototype._removeNodesTriggerConditionsMapIndex=function(e){this._removeNodesMapIndex(this._triggerConditionsNodesMapUpdates,e)},u.prototype._removeNodesNextSlideConditionsMapIndex=function(e){this._removeNodesMapIndex(this._nextSlideConditionsNodesMapUpdates,e)},u.prototype._removeNodesMapIndex=function(e,n){e.next((function(e){return Object.keys(e).indexOf(n)>-1&&delete e[n],e}))},u.prototype._removeFromNodesVisibilityMap=function(e,n){this._removeFromNodesMap(this._visibilityNodesMapUpdates,e,n)},u.prototype._removeFromNodesRepetitionMap=function(e,n){this._removeFromNodesMap(this._repetitionNodesMapUpdates,e,n)},u.prototype._removeFromNodesConditionalBranchMap=function(e,n){this._removeFromNodesMap(this._conditionalBranchNodesMapUpdates,e,n)},u.prototype._removeFromNodesFormulaMap=function(e,n){this._removeFromNodesMap(this._formulaNodesMapUpdates,e,n)},u.prototype._removeFromNodesValidationMap=function(e,n){this._removeFromNodesMap(this._validationNodesMapUpdates,e,n)},u.prototype._removeFromNodesWarningMap=function(e,n){this._removeFromNodesMap(this._warningNodesMapUpdates,e,n)},u.prototype._removeFromNodesFilteredChoicesMap=function(e,n){this._removeFromNodesMap(this._filteredChoicesNodesMapUpdates,e,n)},u.prototype._removeFromNodesTriggerConditionsMap=function(e,n){this._removeFromNodesMap(this._filteredChoicesNodesMapUpdates,e,n)},u.prototype._removeFromNodesNextSlideConditionsMap=function(e,n){this._removeFromNodesMap(this._nextSlideConditionsNodesMapUpdates,e,n)},u.prototype._removeFromNodesMap=function(e,n,t){var r=a.tokenize(t).filter((function(e){return"Identifier"==e.type&&"$value"!=e.value}));r.length>0&&e.next((function(e){return r.forEach((function(t){var r=t.value;if(null!=e[r]){var o=e[r].indexOf(n);o>-1&&(e[r].splice(o,1),0==e[r].length&&delete e[r])}})),e}))},u.prototype._addToNodesVisibilityMap=function(e,n){this._addToNodesMap(this._visibilityNodesMapUpdates,e,n)},u.prototype._addToNodesRepetitionMap=function(e,n){this._addToNodesMap(this._repetitionNodesMapUpdates,e,n)},u.prototype._addToNodesConditionalBranchMap=function(e,n){this._addToNodesMap(this._conditionalBranchNodesMapUpdates,e,n)},u.prototype._addToNodesFormulaMap=function(e,n){this._addToNodesMap(this._formulaNodesMapUpdates,e,n)},u.prototype._addToNodesValidationMap=function(e,n){this._addToNodesMap(this._validationNodesMapUpdates,e,n)},u.prototype._addToNodesWarningMap=function(e,n){this._addToNodesMap(this._warningNodesMapUpdates,e,n)},u.prototype._addToNodesFilteredChoicesMap=function(e,n){this._addToNodesMap(this._filteredChoicesNodesMapUpdates,e,n)},u.prototype._addToNodesTriggerConditionsMap=function(e,n){this._addToNodesMap(this._triggerConditionsNodesMapUpdates,e,n)},u.prototype._addToNodesNextSlideConditionsMap=function(e,n){this._addToNodesMap(this._nextSlideConditionsNodesMapUpdates,e,n)},u.prototype._addToNodesMap=function(e,n,t){var r=a.tokenize(t).filter((function(e){return"Identifier"==e.type&&"$value"!=e.value}));r.length>0&&e.next((function(e){return r.forEach((function(t){var r=t.value;null==e[r]&&(e[r]=[]),-1===e[r].indexOf(n)&&e[r].push(n)})),e}))},u}();he.decorators=[{type:n.Injectable}],he.ctorParameters=function(){return[{type:pe}]};var me=function(){function e(e,n,i){var a=this;this._changeDetectorRef=e,this._service=n,this._warningAlertService=i,this._warningTriggerSub=r.Subscription.EMPTY,this._instanceUpdateSub=r.Subscription.EMPTY,this._control=r.defer((function(){return a._service.getControl(a.instance).pipe(o.map((function(e){return e||new t.FormControl})))}))}return Object.defineProperty(e.prototype,"instance",{get:function(){return this._instance},set:function(e){e!==this._instance&&(this._instance=e,this._setUpInstanceUpdate(),this._onInstanceChange())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this._control},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this._warningTriggerSub=this.instance.warningTrigger.pipe(o.withLatestFrom(this.control),o.filter((function(e){return null!=C(e,2)[1]}))).subscribe((function(n){var t=C(n,2);if(null!=e.instance.warningResults)var r=t[1],o=e._warningAlertService.showWarningAlertPrompt(e.instance.warningResults.filter((function(e){return e.result})).map((function(e){return e.warning}))).subscribe((function(e){e.result&&r.setValue(null)}),(function(e){o&&o.unsubscribe()}),(function(){o&&o.unsubscribe()}))}))},e.prototype.ngOnDestroy=function(){this._warningTriggerSub.unsubscribe(),this._instanceUpdateSub.unsubscribe()},e.prototype._onInstanceChange=function(){},e.prototype._setUpInstanceUpdate=function(){var e=this;this._instanceUpdateSub.unsubscribe(),this._instanceUpdateSub=null!=this._instance?this._instance.updatedEvt.subscribe((function(){if(e._changeDetectorRef)try{e._changeDetectorRef.detectChanges()}catch(e){}})):r.Subscription.EMPTY,this._changeDetectorRef.detectChanges()},e}();me.decorators=[{type:n.Directive}],me.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:he},{type:void 0}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var ge=function(){function e(){}return e.prototype.transform=function(e){return e?1:0},e}();ge.decorators=[{type:n.Pipe,args:[{name:"ajfBoolToInt"}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var ve=function(){function e(){}return e.prototype.transform=function(e){return null==e?null:"today"===e?new Date:e},e}();ve.decorators=[{type:n.Pipe,args:[{name:"ajfDateValue"}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var ye=function(){function e(){}return e.prototype.transform=function(e){if(null!=e){var n="today"===e?new Date:e;return u.format(n,"yyyy-MM-dd")}},e}();ye.decorators=[{type:n.Injectable},{type:n.Pipe,args:[{name:"ajfDateValueString"}]}];var be,_e=function(e){function n(n){return e.call(this,n)||this}return j(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"AjfInvalidFieldDefinitionError"},enumerable:!1,configurable:!0}),n}(s.AjfError),je=function(){function e(){}return e.prototype.transform=function(e,n){return!e.node.forceNarrow&&(e.node.forceExpanded||e.filteredChoices&&e.filteredChoices.length<=n)},e}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */je.decorators=[{type:n.Pipe,args:[{name:"ajfExpandFieldWithChoices"}]}],(be=function be(e){this.viewContainerRef=e}).decorators=[{type:n.Directive,args:[{selector:"[ajf-field-host]"}]}],be.ctorParameters=function(){return[{type:n.ViewContainerRef}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Ne=function(){function e(e,n){this._cdr=e,this._cfr=n,this._init=!1,this._updatedSub=r.Subscription.EMPTY}return Object.defineProperty(e.prototype,"instance",{get:function(){return this._instance},set:function(e){this._instance!==e&&(this._instance=e,this._init&&this._loadComponent())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=l.coerceBooleanProperty(e),this._init&&this._loadComponent()},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this._updatedSub.unsubscribe()},e.prototype.ngOnInit=function(){this._init=!0,this._loadComponent()},e.prototype._loadComponent=function(){var e=this;if(this._updatedSub.unsubscribe(),this._updatedSub=r.Subscription.EMPTY,null!=this._instance&&null!=this.fieldHost){var n=this.fieldHost.viewContainerRef;n.clear();var t=this.componentsMap[this._instance.node.fieldType];if(null!=t){var o=this._readonly&&t.readOnlyComponent?t.readOnlyComponent:t.component;try{var i=this._cfr.resolveComponentFactory(o),a=n.createComponent(i);this._componentInstance=a.instance,this._componentInstance.instance=this._instance,t.inputs&&Object.keys(t.inputs).forEach((function(n){n in e._componentInstance&&(e._componentInstance[n]=t.inputs[n])})),this._updatedSub=this._instance.updatedEvt.subscribe((function(){return e._cdr.markForCheck()}))}catch(e){console.log(e)}}}},e}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function Ce(n){return"ajf-icon-field-"+("string"==typeof e.AjfFieldType[n]?e.AjfFieldType[n].toLowerCase():n)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */Ne.decorators=[{type:n.Directive}],Ne.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:n.ComponentFactoryResolver}]},Ne.propDecorators={fieldHost:[{type:n.ViewChild,args:[be,{static:!0}]}],instance:[{type:n.Input}],readonly:[{type:n.Input}]};var xe=function(){function e(){}return e.prototype.transform=function(e){return Ce(e.fieldType?e.fieldType:e)},e}();xe.decorators=[{type:n.Pipe,args:[{name:"ajfFieldIcon"}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Te=function(){function e(){}return e.prototype.transform=function(e){return null!=e&&0===e.filter((function(e){return!e.result})).length},e}();Te.decorators=[{type:n.Pipe,args:[{name:"ajfFieldIsValid"}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Fe=function(){function e(){this.componentsMap=J}return e.prototype.registerCustomField=function(e){var n=e.fieldType,t=e.component;if(n<100)throw new Error("Invalid custom field type, it must be greater than 100");if(null==t)throw new Error("Invalid custom field component");this.componentsMap[n]=e},e}(),Se=function(e){function n(n,t,r,o){var i=e.call(this,n,t,r)||this;return i._searchThreshold=6,null!=o&&(i._searchThreshold=o),i}return j(n,e),Object.defineProperty(n.prototype,"searchThreshold",{get:function(){return this._searchThreshold},enumerable:!1,configurable:!0}),n}(me),Me=new n.InjectionToken("ajf-warning-alert-service"),we=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return j(n,e),n}(me);we.decorators=[{type:n.Component,args:[{selector:"ajf-file-field",template:'<ajf-file-input *ngIf="control|async as ctrl" [formControl]="ctrl!"></ajf-file-input>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,styles:["\n"]}]}],we.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:he},{type:void 0,decorators:[{type:n.Inject,args:[Me]}]}]};var Ae=function Ae(){},Oe=function(){function t(t,i){this._rendererService=t,this._changeDetectorRef=i,this.ajfFieldTypes=e.AjfFieldType,this._orientationChange=new n.EventEmitter,this.orientationChange=this._orientationChange,this._saveDisabled=!1,this._hasStartMessage=!1,this._hasEndMessage=!1,this._hideTopToolbar=!1,this._hideBottomToolbar=!1,this._hideNavigationButtons=!1,this._fixedOrientation=!1,this._readonly=!1,this._orientation="horizontal",this._errorMoveEvent=new n.EventEmitter,this._init=!1,this._nextSlideSubscription=r.Subscription.EMPTY,this._errorMoveSubscription=r.Subscription.EMPTY,this._formAction=new n.EventEmitter,this.formAction=this._formAction,this.formGroup=t.formGroup,this.slides=t.nodesTree,this._errorPositions=t.errorPositions,this.errors=t.errors,this.slidesNum=t.slidesNum,this.formIsInit=t.formInitEvent.pipe(o.map((function(e){return 1===e})))}return Object.defineProperty(t.prototype,"saveDisabled",{get:function(){return this._saveDisabled},set:function(e){this._saveDisabled=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasStartMessage",{get:function(){return this._hasStartMessage},set:function(e){this._hasStartMessage=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasEndMessage",{get:function(){return this._hasEndMessage},set:function(e){this._hasEndMessage=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideTopToolbar",{get:function(){return this._hideTopToolbar},set:function(e){this._hideTopToolbar=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideBottompToolbar",{get:function(){return this._hideBottomToolbar},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideBottomToolbar",{set:function(e){this._hideBottomToolbar=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideNavigationButtons",{get:function(){return this._hideNavigationButtons},set:function(e){this._hideNavigationButtons=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fixedOrientation",{get:function(){return this._fixedOrientation},set:function(e){this._fixedOrientation=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation},set:function(e){"horizontal"!==e&&"vertical"!==e||e!==this._orientation&&(this._orientation=e,this._changeDetectorRef.markForCheck(),this._orientationChange.emit(this._orientation))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"form",{set:function(e){this._form=e,this._init&&this._rendererService.setForm(this._form)},enumerable:!1,configurable:!0}),t.prototype.goToNextError=function(){this._errorMoveEvent.emit(!0)},t.prototype.goToPrevError=function(){this._errorMoveEvent.emit(!1)},t.prototype.addGroup=function(e){var n=this,t=this._rendererService.addGroup(e).pipe(o.delayWhen((function(){return n.formSlider.pageScrollFinish}))).subscribe((function(e){e&&null!=n.formSlider&&n.formSlider.slide({dir:"down"})}),(function(e){t&&t.unsubscribe()}),(function(){t&&t.unsubscribe()}))},t.prototype.removeGroup=function(e){var n=this,t=this._rendererService.removeGroup(e).pipe(o.delayWhen((function(){return n.formSlider.pageScrollFinish}))).subscribe((function(e){e&&null!=n.formSlider&&n.formSlider.slide({dir:"up"})}),(function(e){t&&t.unsubscribe()}),(function(){t&&t.unsubscribe()}))},t.prototype.onSave=function(e){this._formAction.emit({source:this,action:"save",value:this._rendererService.getFormValue()})},t.prototype.onFormAction=function(e,n){this._formAction.emit({source:this,value:this._rendererService.getFormValue(),action:n})},t.prototype.ngAfterViewInit=function(){null!=this._form&&(this._rendererService.setForm(this._form),this._changeDetectorRef.detectChanges())},t.prototype.ngAfterViewChecked=function(){var e=this;this._init||null==this.formSlider||(this._init=!0,this._errorMoveSubscription=this._errorMoveEvent.pipe(o.withLatestFrom(this._errorPositions)).subscribe((function(n){var t=C(n,2),r=t[0],o=t[1],i=e.formSlider.currentPage-+e.hasStartMessage+1;if(null!=o){for(var a=o,s=!1,u=-1,l=-1,c=0,p=a.length;!s&&c<p;)a[c]==i?(s=!0,u=c>0?c-1:p-1,l=c<p-1?c+1:0):a[c]>i&&(s=!0,u=c>0?c-1:p-1,l=c),c++;s||(u=p-1,l=0),e.formSlider.slide({to:r?a[l]-1:a[u]-1}),e._changeDetectorRef.detectChanges()}})))},t.prototype.ngOnDestroy=function(){this._nextSlideSubscription.unsubscribe(),this._errorMoveSubscription.unsubscribe(),this._orientationChange.complete(),this._errorMoveEvent.complete(),this._formAction.complete()},t.prototype.orientationChangeHandler=function(e){this.orientation=e},t.prototype.trackNodeById=function(e,n){return E(n)},t}();Oe.decorators=[{type:n.Directive}],Oe.ctorParameters=function(){return[{type:he},{type:n.ChangeDetectorRef}]},Oe.propDecorators={title:[{type:n.Input}],orientationChange:[{type:n.Output}],saveDisabled:[{type:n.Input}],hasStartMessage:[{type:n.Input}],hasEndMessage:[{type:n.Input}],hideTopToolbar:[{type:n.Input}],hideBottomToolbar:[{type:n.Input}],hideNavigationButtons:[{type:n.Input}],fixedOrientation:[{type:n.Input}],readonly:[{type:n.Input}],orientation:[{type:n.Input}],formSlider:[{type:n.ViewChild,args:["formSlider",{static:!1}]}],fields:[{type:n.ViewChildren,args:[Ne]}],formAction:[{type:n.Output}],form:[{type:n.Input}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Ie=function(n,t,r){if(null==n)return"";var o=n.stringIdentifier||[];if(0===o.length)return"";var i=ue(n.nodes).filter((function(e){return S(e)&&F(e)}));return i.length>0&&(t=Object.assign({},t),i.forEach((function(n){var o=t[n.name];if(null!=o)if(n.fieldType===e.AjfFieldType.SingleChoice){var i=n.choicesOrigin.choices.find((function(e){return e.value===o}));if(null==i)return;t[n.name]=i.value}else if(n.fieldType===e.AjfFieldType.MultipleChoice&&Array.isArray(o)&&o.length>0){var a=c.buildStringIdentifierOpts(r),s=n.choicesOrigin.choices.filter((function(e){return o.indexOf(e.value)>-1}));t[n.name]=s.join(a.valuesDivider)}}))),c.buildStringIdentifier(o,t,r)},Ee=function(){function e(){}return e.prototype.transform=function(e,n,t){return Ie(e,n,t)},e}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */Ee.decorators=[{type:n.Pipe,args:[{name:"ajfFormStringIdentifier"}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Re=function(){function e(){}return e.prototype.transform=function(e){return null==e||"string"==typeof e?null:e},e}();Re.decorators=[{type:n.Pipe,args:[{name:"ajfGetTableCellControl"}]}];var Pe=function(e){function n(n,t,r,i){var a=e.call(this,n,t,r)||this,s=a.control.pipe(o.filter((function(e){return null!=e})),o.switchMap((function(e){return(e=e).valueChanges.pipe(o.startWith(e.value))})),o.filter((function(e){return null!=e})),o.shareReplay(1));return a.imageUrl=s.pipe(o.map((function(e){return i.bypassSecurityTrustResourceUrl(e.content)}))),a}return j(n,e),n}(me);Pe.decorators=[{type:n.Component,args:[{selector:"ajf-image-field",template:'<ajf-file-input *ngIf="control|async as ctrl" accept="image/*" [formControl]="ctrl!">\n  <div ajfFilePreview class="ajf-image-preview">\n    <img [src]="imageUrl|async">\n  </div>\n</ajf-file-input>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,styles:["ajf-image-field img{min-width:32px;min-height:32px}\n"]}]}],Pe.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:he},{type:void 0,decorators:[{type:n.Inject,args:[Me]}]},{type:m.DomSanitizer}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Ve=function(){function e(){}return e.prototype.transform=function(e,n){return void 0===n&&(n=1),e+n},e}();Ve.decorators=[{type:n.Pipe,args:[{name:"ajfIncrement"}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var De=function(){function e(){}return e.prototype.transform=function(e){return null!=e&&"string"!=typeof e&&!0===e.editable},e}();De.decorators=[{type:n.Pipe,args:[{name:"ajfIsCellEditable"}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Ue=function(){function n(){}return n.prototype.transform=function(n){return M(n)&&n.node.fieldType===e.AjfFieldType.Formula},n}();Ue.decorators=[{type:n.Pipe,args:[{name:"ajfIsReadonlyInputField"}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Be=function(){function e(){}return e.prototype.transform=function(e){return se(e)},e}();Be.decorators=[{type:n.Pipe,args:[{name:"ajfIsRepeatingSlideInstance"}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var ke=function(){function e(){}return e.prototype.transform=function(e){return e?E(e):""},e}();ke.decorators=[{type:n.Pipe,args:[{name:"ajfNodeCompleteName"}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Ge=function(){function e(){}return e.prototype.transform=function(e,n,t){void 0===e&&(e=0),void 0===n&&(n=1),void 0===t&&(t=1);for(var r=[],o=0;o<e;++o)r.push(n),n+=t;return r},e}();Ge.decorators=[{type:n.Pipe,args:[{name:"ajfRange"}]}];var Je=function(e){function n(){var n=e.apply(this,x(arguments))||this;return n.type="text",n}return j(n,e),n}(me),We=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return j(n,e),n}(Je);We.decorators=[{type:n.Component,args:[{selector:"ajf-read-only-field",template:'<span *ngIf="control|async as ctrl">{{ctrl.value}}</span>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,styles:["ajf-read-only-field span{min-height:1em;display:block}\n"]}]}],We.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:he},{type:void 0,decorators:[{type:n.Inject,args:[Me]}]}]};var $e=function(e){function n(n,t,r,i){var a=e.call(this,n,t,r)||this;a.fileIcon=i.bypassSecurityTrustResourceUrl(p.fileIcon);var s=a.control.pipe(o.filter((function(e){return null!=e})),o.switchMap((function(e){return(e=e).valueChanges.pipe(o.startWith(e.value))})),o.filter((function(e){return null!=e})),o.shareReplay(1));return a.fileUrl=s.pipe(o.map((function(e){return i.bypassSecurityTrustResourceUrl(e.content)}))),a.fileName=s.pipe(o.map((function(e){return e.name}))),a}return j(n,e),n}(me);$e.decorators=[{type:n.Component,args:[{selector:"ajf-read-only-file-field",template:'<a *ngIf="fileUrl|async as fu ; else noFile" [href]="fu" [download]="fileName|async">\n  <img [src]="fileIcon"> {{ fileName|async }}\n</a>\n<ng-template #noFile>\n  <div class="ajf-no-file-placeholder"></div>\n</ng-template>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,styles:["ajf-read-only-file-field img{width:32px;height:32px;margin-right:8px;vertical-align:middle}ajf-read-only-file-field .ajf-no-file-placeholder{width:100%;height:32px;background-color:#eee}\n"]}]}],$e.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:he},{type:void 0,decorators:[{type:n.Inject,args:[Me]}]},{type:m.DomSanitizer}]};var ze=function(e){function n(n,t,r,i){var a=e.call(this,n,t,r)||this,s=a.control.pipe(o.filter((function(e){return null!=e})),o.switchMap((function(e){return(e=e).valueChanges.pipe(o.startWith(e.value))})),o.filter((function(e){return null!=e})),o.shareReplay(1));return a.imageUrl=s.pipe(o.map((function(e){return i.bypassSecurityTrustResourceUrl(e.content)}))),a}return j(n,e),n}(me);ze.decorators=[{type:n.Component,args:[{selector:"ajf-read-only-image-field",template:'<img *ngIf="imageUrl|async as iu ; else noImage" [src]="imageUrl|async">\n<ng-template #noImage>\n  <div class="ajf-no-image-placeholder"></div>\n</ng-template>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,styles:["ajf-read-only-image-field .ajf-no-image-placeholder{width:100%;height:32px;background-color:#eee}\n"]}]}],ze.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:he},{type:void 0,decorators:[{type:n.Inject,args:[Me]}]},{type:m.DomSanitizer}]};var Le=function(n){function t(t,r,i){var a=n.call(this,t,r,i)||this;return a.multiple=a.control.pipe(o.filter((function(e){return null!=e})),o.map((function(){return a.instance.node.fieldType===e.AjfFieldType.MultipleChoice}))),a}return j(t,n),t}(me);Le.decorators=[{type:n.Component,args:[{template:'<ng-container *ngIf="control|async as ctrl">\n    <ng-container *ngFor="let choice of instance.filteredChoices; let idx = index">\n        <ng-container *ngIf="multiple|async; else singleChoice">\n            <span *ngIf="ctrl.value && ctrl.value?.indexOf(choice.value) > -1">\n                {{choice.label|translate}}{{ctrl.value[ctrl.value.length - 1] !== choice.value ? \', \': \'\'}}\n            </span>\n        </ng-container>\n        <ng-template #singleChoice>\n            <span *ngIf="ctrl.value === choice.value">{{choice.label|translate}}</span>\n        </ng-template>\n    </ng-container>\n</ng-container>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,styles:["\n"]}]}],Le.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:he},{type:void 0,decorators:[{type:n.Inject,args:[Me]}]}]};var He=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return j(n,e),n}(me);He.decorators=[{type:n.Component,args:[{template:'<table class="ajf-table-field">\n  <ng-container *ngIf="instance.node as node">\n    <ng-container *ngFor="let columns of instance.controls; let row = index">\n      <tr [ngClass]="row | ajfTableRowClass">\n        <td>\n          <ng-container *ngIf="columns && columns.length > 0 && columns[0] != null">\n            {{ columns[0] | ajfTranslateIfString | ajfFormatIfNumber: \'.0-2\' }}\n          </ng-container>\n        </td>\n        <ng-container *ngIf="columns && columns.length > 1 && columns[1] != null">\n          <td *ngFor="let c of columns[1]; let column = index">\n            <ng-container *ngIf="c|ajfGetTableCellControl as contr">\n              <ng-container *ngIf="contr != null">\n                <span *ngIf="row > 0; else labelCell"\n                  class="ajf-table-cell">{{ contr.control!.value | ajfTranslateIfString | ajfFormatIfNumber: \'.0-2\' }}</span>\n                <ng-template #labelCell>{{ contr | ajfTranslateIfString | ajfFormatIfNumber: \'.0-2\' }}</ng-template>\n              </ng-container>\n            </ng-container>\n          </td>\n        </ng-container>\n      </tr>\n    </ng-container>\n  </ng-container>\n</table>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,styles:["\n"]}]}],He.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:he},{type:void 0,decorators:[{type:n.Inject,args:[Me]}]}]};var qe=function(e){function n(n,t,i,a,s){var u=e.call(this,n,t,i)||this,l=u.control.pipe(o.filter((function(e){return null!=e})),o.switchMap((function(e){return(e=e).valueChanges.pipe(o.startWith(e.value))})),o.filter((function(e){return null!=e})),o.map((function(e){return function n(e){var n=null,t=null;return/youtube|youtu\.be|y2u\.be|i.ytimg\./.test(e)?(n="youtube",t=function r(e){var n=/youtube:\/\/|https?:\/\/youtu\.be\/|http:\/\/y2u\.be\//g;if(n.test(e))return Ye(e.split(n)[1]);var t=/\/v\/|\/vi\//g;if(t.test(e))return Ye(e.split(t)[1]);var r=/v=|vi=/g;if(r.test(e))return e.split(r)[1].split("&")[0];var o=/\/an_webp\//g;if(o.test(e))return Ye(e.split(o)[1]);var i=/\/embed\//g;if(i.test(e))return Ye(e.split(i)[1]);if(/\/user\/([a-zA-Z0-9]*)$/g.test(e))return null;if(/\/user\/(?!.*videos)/g.test(e))return Ye(e.split("/").pop());var a=/\/attribution_link\?.*v%3D([^%&]*)(%26|&|$)/;return a.test(e)?e.match(a)[1]:null}(e)):/vimeo/.test(e)&&(n="vimeo",t=function o(e){e.indexOf("#")>-1&&(e=e.split("#")[0]),e.indexOf("?")>-1&&-1===e.indexOf("clip_id=")&&(e=e.split("?")[0]);var n,t=null,r=["https?://vimeo.com/[0-9]+$","https?://player.vimeo.com/video/[0-9]+$","https?://vimeo.com/channels","groups","album"].join("|");return new RegExp(r,"gim").test(e)?(n=e.split("/"))&&n.length&&(t=n.pop()):/clip_id=/gim.test(e)&&(n=e.split("clip_id="))&&n.length&&(t=n[1].split("&")[0]),t}(e)),null==n||null==t?null:{provider:n,id:t}}(e)})));return u.validUrl=l.pipe(o.map((function(e){return null!=e}))),u.videoThumbnail=l.pipe(o.filter((function(e){return null!=e})),o.switchMap((function(e){return function n(e,t){return"youtube"===t.provider?r.of("https://img.youtube.com/vi/"+t.id+"/default.jpg"):"vimeo"===t.provider?e.get("https://vimeo.com/api/oembed.json?url=https://vimeo.com/"+t.id).pipe(o.map((function(e){return e.thumbnail_url})),o.catchError((function(){return r.of(null)}))):r.of("")}(s,e)})),o.filter((function(e){return null!=e})),o.map((function(e){return a.bypassSecurityTrustResourceUrl(e)}))),u}return j(n,e),n}(me);function Ye(e){return e.indexOf("?")>-1?e.split("?")[0]:e.indexOf("/")>-1?e.split("/")[0]:e}qe.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:he},{type:void 0,decorators:[{type:n.Inject,args:[Me]}]},{type:m.DomSanitizer},{type:f.HttpClient}]};var Ze=function(e){function n(n,t,r,o,i){return e.call(this,n,t,r,o,i)||this}return j(n,e),n}(qe);Ze.decorators=[{type:n.Component,args:[{selector:"ajf-read-only-video-url-field",template:'<div *ngIf="control|async as ctrl" class="ajf-video-thumbnail">\n  <ng-container *ngIf="validUrl|async">\n    <a target="_blank" [href]="ctrl.value">\n      <img *ngIf="videoThumbnail|async as thumb" [src]="thumb" class="" alt="">\n    </a>\n  </ng-container>\n</div>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,styles:["\n"]}]}],Ze.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:he},{type:void 0,decorators:[{type:n.Inject,args:[Me]}]},{type:m.DomSanitizer},{type:f.HttpClient}]};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Ke=function(){function e(){}return e.prototype.transform=function(e){return e%2==0?"ajf-row-even":"ajf-row-odd"},e}();Ke.decorators=[{type:n.Pipe,args:[{name:"ajfTableRowClass"}]}];var Qe=function(){function e(){}return e.prototype.transform=function(e){if(!e.node.editable){var n=e.value||[];return e.hideEmptyRows?n.filter((function(e){return e[1].reduce((function(e,n){return e||null!=n&&""!==n&&0!==n&&"0"!==n}),!1)})).map((function(e){return x([e[0]],e[1])})):n.map((function(e){return x([e[0]],e[1])}))}return(e.controls||[]).map((function(e){return x([e[0]],e[1])}))},e}();Qe.decorators=[{type:n.Pipe,args:[{name:"ajfTableVisibleColumns"}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var Xe,en=function(){function e(){}return e.prototype.transform=function(e,n){return null!=n&&"number"==typeof n&&(n>=e.slideNodes.length||e.slideNodes[n].map((function(e){return!(e.visible&&Object.keys(e).indexOf("valid")>-1)||e.valid})).reduce((function(e,n){return e&&n}),!0))},e}();en.decorators=[{type:n.Pipe,args:[{name:"ajfValidSlide",pure:!1}]}],(Xe=function Xe(){}).decorators=[{type:n.NgModule,args:[{declarations:[g,v,ge,ve,ye,je,be,xe,Te,we,Ee,Re,Pe,Ve,De,Ue,Be,ke,Ge,We,$e,ze,Le,He,Ze,Ke,Qe,en],imports:[c.AjfCommonModule,p.AjfFileInputModule,d.CommonModule,f.HttpClientModule,t.ReactiveFormsModule,h.TranslateModule],exports:[g,v,ge,ve,ye,je,be,xe,Te,we,Ee,Re,Pe,Ve,De,Ue,Be,ke,Ge,We,$e,ze,Le,He,Ze,Ke,Qe,en],entryComponents:[we,Pe,We,$e,ze,Le,He,Ze],providers:[ye,he,pe]}]}];
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var nn=new n.InjectionToken("AJF_SEARCH_ALERT_THRESHOLD"),tn=function(){function e(){}return e.fromJson=function(e){if(null==e.name)throw new Error("Malformed attachments origin");
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
return function n(e){return Object.assign(Object.assign({},e),{attachments:e.attachments||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */(e)},e}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function rn(e){return Object.assign(Object.assign({},e),{type:e.type,label:e.label||"",choices:e.choices||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */var on=function(){function e(){}return e.fromJson=function(e){return rn(Object.assign(Object.assign({},e),{type:e.type||"fixed",name:e.name||""}))},e}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function an(e){var n=k(e);return Object.assign(Object.assign({},n),{nodes:e.nodes||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function sn(e){var n=k(e);return Object.assign(Object.assign(Object.assign({},e),n),{minReps:null!=e.minReps?e.minReps:1,maxReps:null!=e.maxReps?e.maxReps:0})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function un(n){return Object.assign(Object.assign(Object.assign({},an(n)),sn(n)),{nodeType:e.AjfNodeType.AjfNodeGroup})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function ln(n){return Object.assign(Object.assign(Object.assign({},an(n)),sn(n)),{nodeType:e.AjfNodeType.AjfRepeatingSlide})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function cn(n){return Object.assign(Object.assign({},an(n)),{nodeType:e.AjfNodeType.AjfSlide})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */var pn=function(){function e(){}return e.fromJson=function(e){return X(e)},e}(),dn=function(){function e(){}return e.fromJson=function(e){return ee(e)},e}(),fn=function(){function n(){}return n.fromJson=function(t,r,o){var i="Malformed node";if(t.name=t.name||"",null==t.id||null==t.parent||null==t.nodeType)throw new Error(i);var a=t;switch(a.visibility&&(a.visibility=s.AjfConditionSerializer.fromJson(a.visibility)),a.conditionalBranches=(a.conditionalBranches||[]).map((function(e){return s.AjfConditionSerializer.fromJson(e)})),a.nodeType){case e.AjfNodeType.AjfField:return n._fieldFromJson(a,r,o);case e.AjfNodeType.AjfFieldNodeLink:return n._fieldNodeLinkFromJson(a);case e.AjfNodeType.AjfNodeGroup:return n._nodeGroupFromJson(a,r,o);case e.AjfNodeType.AjfRepeatingSlide:return n._repeatingSlideFromJson(a,r,o);case e.AjfNodeType.AjfSlide:return n._slideFromJson(a,r,o)}throw new Error(i)},n._containerNodeFromJson=function(e,t,r){return e.nodes=(e.nodes||[]).map((function(e){return n.fromJson(e,t,r)})),an(e)},n._fieldFromJson=function(t,r,o){if(null==t.fieldType)throw new Error("Malformed field");var i=t;if(i.validation&&(i.validation=pn.fromJson(i.validation)),i.warning&&(i.warning=dn.fromJson(i.warning)),t.attachmentsOriginRef&&(i.attachmentOrigin=(o||[]).find((function(e){return e.name===t.attachmentsOriginRef}))),i.nextSlideCondition&&(i.nextSlideCondition=s.AjfConditionSerializer.fromJson(i.nextSlideCondition)),i.fieldType>100&&null!=J[i.fieldType]&&!0===J[i.fieldType].isFieldWithChoice)return n._fieldWithChoicesFromJson(t,r);switch(i.fieldType){case e.AjfFieldType.Formula:return n._formulaFieldFromJson(t);case e.AjfFieldType.MultipleChoice:case e.AjfFieldType.SingleChoice:return n._fieldWithChoicesFromJson(t,r)}return G(i)},n._fieldNodeLinkFromJson=function(n){return Object.assign(Object.assign({},k(n)),{nodeType:e.AjfNodeType.AjfFieldNodeLink})},n._fieldWithChoicesFromJson=function(e,n){var t="Malformed field with choices";if(null==e.choicesOriginRef)throw new Error(t);var r=(n||[]).find((function(n){return n.name===e.choicesOriginRef}));if(null==r)throw new Error(t);return e.choicesFilter&&(e.choicesFilter=s.AjfFormulaSerializer.fromJson(e.choicesFilter)),e.triggerConditions&&(e.triggerConditions=e.triggerConditions.map((function(e){return s.AjfConditionSerializer.fromJson(e)}))),function o(e){var n=G(Object.assign({},e));return Object.assign(Object.assign(Object.assign({},n),e),{choices:e.choices||[],forceExpanded:e.forceExpanded||!1,forceNarrow:e.forceNarrow||!1})}(Object.assign(Object.assign({},e),{choicesOrigin:r}))},n._formulaFieldFromJson=function(n){return n.formula&&(n.formula=s.AjfFormulaSerializer.fromJson(n.formula)),Object.assign(Object.assign({},G(n)),{fieldType:e.AjfFieldType.Formula})},n._nodeGroupFromJson=function(e,t,r){return un(Object.assign(Object.assign({},n._containerNodeFromJson(e,t,r)),n._repeatingNodeFromJson(e)))},n._repeatingNodeFromJson=function(e){return e.formulaReps&&(e.formulaReps=s.AjfFormulaSerializer.fromJson(e.formulaReps)),sn(e)},n._repeatingSlideFromJson=function(e,t,r){return ln(Object.assign(Object.assign({},n._containerNodeFromJson(e,t,r)),n._repeatingNodeFromJson(e)))},n._slideFromJson=function(e,t,r){return cn(n._containerNodeFromJson(e,t,r))},n}(),hn=function(){function e(){}return e.fromJson=function(e,n){var t=(e.choicesOrigins||[]).map((function(e){return on.fromJson(e)})),r=(e.attachmentsOrigins||[]).map((function(e){return tn.fromJson(e)})),o=(e.nodes||[]).map((function(e){return fn.fromJson(e,t,r)}));return Object.assign(Object.assign({},e),{choicesOrigins:t,attachmentsOrigins:r,nodes:o,stringIdentifier:e.stringIdentifier||[],initContext:i.deepCopy(n||{})})},e}(),mn=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return j(n,e),n.prototype.goToNextCell=function(e,n,t){if(!(this.instance.controls.length<n||this.instance.controls.length>=n&&this.instance.controls[n].length<1||this.instance.controls[n][1].length<t)){var r=this.instance.controls[n][1][t];t+1>=this.instance.controls[n][1].length?(t=0,n+1>=this.instance.controls.length?n=1:n+=1):t+=1,"string"!=typeof r&&(r.show=!1),this._showCell(n,t),e.preventDefault(),e.stopPropagation()}},n.prototype.goToCell=function(e,n){this._resetControls(),this._showCell(e,n)},n.prototype._resetControls=function(){this.instance.controls.forEach((function(e){return e[1].forEach((function(e){"string"!=typeof e&&(e.show=!1)}))}))},n.prototype._showCell=function(e,n){if(!(e>=this.instance.controls.length||n>=this.instance.controls[e][1].length)){var t=this.instance.controls[e][1][n];"string"!=typeof t&&(t.show=!0)}},n}(me);
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function gn(e){return null!=e&&"object"==typeof e&&null!=e.name&&"string"==typeof e.name&&null!=e.label&&"string"==typeof e.label&&["fixed","promise","observable","observableArray","function"].indexOf(e.type)>-1&&e.choices instanceof Array}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */mn.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:he},{type:void 0,decorators:[{type:n.Inject,args:[Me]}]}]},
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
e.AJF_SEARCH_ALERT_THRESHOLD=nn,e.AJF_WARNING_ALERT_SERVICE=Me,e.AjfAsFieldInstancePipe=g,e.AjfAsRepeatingSlideInstancePipe=v,e.AjfAttachmentsOriginSerializer=tn,e.AjfBaseFieldComponent=me,e.AjfBoolToIntPipe=ge,e.AjfChoicesOriginSerializer=on,e.AjfDateValuePipe=ve,e.AjfDateValueStringPipe=ye,e.AjfExpandFieldWithChoicesPipe=je,e.AjfFieldHost=be,e.AjfFieldIconPipe=xe,e.AjfFieldIsValidPipe=Te,e.AjfFieldService=Fe,e.AjfFieldWithChoicesComponent=Se,e.AjfFileFieldComponent=we,e.AjfFormActionEvent=Ae,e.AjfFormField=Ne,e.AjfFormRenderer=Oe,e.AjfFormRendererService=he,e.AjfFormSerializer=hn,e.AjfFormStringIdentifierPipe=Ee,e.AjfFormsModule=Xe,e.AjfGetTableCellControlPipe=Re,e.AjfImageFieldComponent=Pe,e.AjfIncrementPipe=Ve,e.AjfInputFieldComponent=Je,e.AjfInvalidFieldDefinitionError=_e,e.AjfIsCellEditablePipe=De,e.AjfIsReadonlyInputFieldPipe=Ue,e.AjfIsRepeatingSlideInstancePipe=Be,e.AjfNodeCompleteNamePipe=ke,e.AjfNodeSerializer=fn,e.AjfRangePipe=Ge,e.AjfReadOnlyFieldComponent=We,e.AjfReadOnlyFileFieldComponent=$e,e.AjfReadOnlyImageFieldComponent=ze,e.AjfReadOnlySelectFieldComponent=Le,e.AjfReadOnlyTableFieldComponent=He,e.AjfReadOnlyVideoUrlFieldComponent=Ze,e.AjfTableFieldComponent=mn,e.AjfTableRowClass=Ke,e.AjfTableVisibleColumnsPipe=Qe,e.AjfValidSlidePipe=en,e.AjfValidationGroupSerializer=pn,e.AjfValidationService=pe,e.AjfVideoUrlFieldComponent=qe,e.AjfWarningGroupSerializer=dn,e.buildFormStringIdentifier=Ie,e.createChoicesFixedOrigin=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function vn(e){return Object.assign(Object.assign({},rn(Object.assign(Object.assign({},e),{type:"fixed"}))),{type:"fixed"})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.createChoicesFunctionOrigin=function yn(e){return Object.assign(Object.assign({},e),{type:"function",label:e.label||"",choices:e.choices||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.createChoicesObservableArrayOrigin=function bn(e){return Object.assign(Object.assign({},e),{type:"observableArray",label:e.label||"",choices:e.choices||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.createChoicesObservableOrigin=function _n(e){return Object.assign(Object.assign({},e),{type:"observable",label:e.label||"",choices:e.choices||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.createChoicesOrigin=rn,e.createChoicesPromiseOrigin=function jn(e){return Object.assign(Object.assign({},e),{type:"promise",label:e.label||"",choices:e.choices||[]})},e.createContainerNode=an,e.createField=G,e.createFieldInstance=Z,e.createFieldWithChoicesInstance=K,e.createForm=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function Nn(e){return void 0===e&&(e={}),{nodes:e.nodes||[],choicesOrigins:e.choicesOrigins||[],attachmentsOrigins:e.attachmentsOrigins||[],initContext:e.initContext||{},stringIdentifier:e.stringIdentifier||[],supplementaryInformations:e.supplementaryInformations}}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.createNode=k,e.createNodeInstance=Y,e.createValidation=ie,e.createValidationGroup=X,e.createWarning=ae,e.createWarningGroup=ee,e.fieldIconName=Ce,e.flattenNodes=ue,e.getTypeName=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function Cn(e){var n=typeof e;return"object"===n?e.constructor.toString().match(/\w+/g)[1]:n},e.initChoicesOrigin=T,e.isChoicesFixedOrigin=function xn(e){return gn(e)&&"fixed"===e.type}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.isChoicesOrigin=gn,e.isContainerNode=z,e.isCustomFieldWithChoices=W,e.isField=S,e.isFieldWithChoices=F,e.isNumberField=function Tn(n){return n.fieldType===e.AjfFieldType.Number},e.isRepeatingContainerNode=ne,e.isSlidesNode=$,e.maxDigitsValidation=function Fn(e){return ie({condition:"$value ? $value.toString().length <= "+e.toString()+" : false",errorMessage:"Digits count must be <= "+e.toString()})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.maxValidation=function Sn(e){return ie({condition:"$value <= "+e.toString(),errorMessage:"Value must be <= "+e.toString()})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.minDigitsValidation=function Mn(e){return ie({condition:"$value ? $value.toString().length >= "+e.toString()+" : false",errorMessage:"Digits count must be >= "+e.toString()})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.minValidation=function wn(e){return ie({condition:"$value >= "+e.toString(),errorMessage:"Value must be >= "+e.toString()})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.notEmptyValidation=function An(){return ie({condition:"notEmpty($value)",errorMessage:"Value must not be empty"})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.notEmptyWarning=function On(){return ae({condition:"notEmpty($value)",warningMessage:"Value must not be empty"})},e.0=fe,e.gc_ajf_src_core_forms_forms_a=un,e.gc_ajf_src_core_forms_forms_b=ln,e.gc_ajf_src_core_forms_forms_c=cn,e.gc_ajf_src_core_forms_forms_d=J,Object.defineProperty(e,"__esModule",{value:!0})}));