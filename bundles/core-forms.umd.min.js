!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("@ajf/core/utils"),require("esprima"),require("@ajf/core/models"),require("date-fns"),require("@angular/cdk/coercion"),require("@ajf/core/page-slider"),require("@ajf/core/common"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ajf/core/forms",["exports","@angular/core","@angular/forms","rxjs","rxjs/operators","@ajf/core/utils","esprima","@ajf/core/models","date-fns","@angular/cdk/coercion","@ajf/core/page-slider","@ajf/core/common","@angular/common"],n):n(((e=e||self).ajf=e.ajf||{},e.ajf.core=e.ajf.core||{},e.ajf.core.forms={}),e.ng.core,e.ng.forms,e.rxjs,e.rxjs.operators,e.ng.core.utils,e.esprima,e.ng.core.models,e.dateFns,e.ng.cdk.coercion,e.ng.core.pageSlider,e.ng.core.common,e.ng.common)}(this,(function(e,n,t,o,r,i,a,s,u,l,c,d,p){"use strict";var f="default"in a?a.default:a,h=function(e,n){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function m(e,n){function t(){this.constructor=e}h(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var v=function(){return(v=Object.assign||function e(n){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)};function y(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t}function g(e,n,t,o){var r,i=arguments.length,a=i<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,t,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(n,t,a):r(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a}function _(e,n){return function(t,o){n(t,o,e)}}function b(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}function N(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,r,i=t.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return a}function j(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(N(arguments[n]));return e}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var x,T,C=function(){function e(){}return e.prototype.transform=function(e){return e},g([n.Pipe({name:"ajfAsFieldInstance"})],e)}(),S=function(){function e(){}return e.prototype.transform=function(e){return e},g([n.Pipe({name:"ajfAsRepeatingSlideInstance"})],e)}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function M(e){if("fixed"===e.type)return Promise.resolve();if("function"===e.type)return e.choices=e.generator(),Promise.resolve();if("promise"===e.type){var n=e;return n.generator.then((function(e){return n.choices=e})).then()}if("observable"===e.type){var t=e;if(null!=t.generator)return t.choices=[],new Promise((function(e){t.generator.subscribe((function(e){return t.choices.push(e)}),(function(){}),(function(){return e()}))}))}if("observableArray"===e.type){var o=e;if(null!=o.generator)return o.choices=[],new Promise((function(e){o.generator.subscribe((function(n){o.choices=n,e()}))}))}return Promise.resolve()}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function F(n){return n.fieldType===e.AjfFieldType.SingleChoice||n.fieldType===e.AjfFieldType.MultipleChoice}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function w(n){return null!=n&&n.nodeType===e.AjfNodeType.AjfField}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function A(e){return null!=e&&null!=e.node&&w(e.node)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function E(e){return null!=e&&A(e)&&F(e.node)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function I(e,n){var t=e.conditionalBranches;if(null!=t){for(var o=e.verifiedBranch,r=0,i=!1;r<t.length&&!i;)s.evaluateExpression(t[r].condition,n)&&(i=!0,r!==e.verifiedBranch&&(e.verifiedBranch=r)),r++;if(o!==e.verifiedBranch)return!0}return!1}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function R(e,n,t){if(void 0===t&&(t=!0),null==e.visibility)return e.visible=!1,!1;var o=e.visible,r=t&&s.evaluateExpression(e.visibility.condition,n);return r!==e.visible&&(e.visible=r),o!==r}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function O(e){return null==e.prefix||0==e.prefix.length?"":"__"+e.prefix.join("__")}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function V(e){return null!=e&&null!=e.node?""+e.node.name+O(e):""}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function P(e,n){var t=e.formula,o=e.node.editable;if(null!=t&&e.visible&&(!o||o&&null==e.value)){var r=s.evaluateExpression(t.formula,n),i=e.value;return r!==e.value&&(e.value=r,n[V(e)]=e.value,n.$value=e.value),{changed:r!==i,value:r}}return{changed:!1,value:e.value}}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function B(e,n){return null!=e.nextSlideCondition&&s.evaluateExpression(e.nextSlideCondition.condition,n)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function D(e,n,t){return{result:s.evaluateExpression(e.condition,n,t),error:e.errorMessage,clientValidation:e.clientValidation}}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function U(e,n,t){var o=e.validation;if(null!=o){t&&Object.keys(t).forEach((function(e){n["__supplementary__"+e+"__"]=t[e]}));var r=V(e);null!=n[r]&&o&&o.forceValue&&(e.value=s.evaluateExpression(o.forceValue.condition,n),n[r]=e.value,n.$value=e.value),e.validationResults=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function a(e,n,t){var o=[],r=i.deepCopy(t);if(r.$value=n,o=function a(e,n){var t=[];return e.conditions.forEach((function(e){t.push(D(e,n))})),t}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */(e,r),e.maxValue){var u=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function l(e,n){return null==e.maxValue?null:"number"==typeof e.maxValue?{result:s.evaluateExpression("$value.length <= "+e.maxValue,{$value:n}),error:"Value must be <= "+e.maxValue,clientValidation:!1}:D(e.maxValue,{$value:n})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */(e,n);null!=u&&o.push(u)}if(e.minValue){var c=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function d(e,n){return null==e.minValue?null:"number"==typeof e.minValue?{result:s.evaluateExpression("$value.length <= "+e.minValue,{$value:n}),error:"Value must be >= "+e.minValue,clientValidation:!1}:D(e.minValue,{$value:n})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */(e,n);null!=c&&o.push(c)}if(e.notEmpty){var p=function f(e,n){if(null==e.notEmpty)return null;var t={$value:n};return"boolean"==typeof e.notEmpty?{result:s.evaluateExpression("($value != null) === "+e.notEmpty,t),error:"Value must not be empty",clientValidation:!1}:D(e.notEmpty,t)}(e,n);null!=p&&o.push(p)}if(e.maxDigits){var h=function m(e,n){if(null==e.maxDigits)return null;var t={$value:n};return"number"==typeof e.maxDigits?{result:s.evaluateExpression("$value.toString().length <= "+e.maxDigits,t),error:"Digits count must be <= "+e.maxDigits,clientValidation:!1}:D(e.maxDigits,t)}(e,n);null!=h&&o.push(h)}if(e.minDigits){var v=function y(e,n){if(null==e.minDigits)return null;var t={$value:n};return"number"==typeof e.minDigits?{result:s.evaluateExpression("$value.toString().length >= "+e.minDigits,t),error:"Digits count must be >= "+e.minDigits,clientValidation:!1}:D(e.minDigits,t)}(e,n);null!=v&&o.push(v)}return o}(o,n[r],n),e.valid=e.validationResults.reduce((function(e,n){return e&&n.result}),!0)}else e.valid=!0}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function k(e,n){var t=e.warning;null!=t&&null!=n[V(e)]&&t&&(e.warningResults=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function o(e,n){
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
return function t(e,n){return e.conditions.map((function(e){return function t(e,n,o){return{result:s.evaluateExpression(e.condition,n,o),warning:e.warningMessage}}(e,n)}))}(e,n)}(t,n))}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function G(e,n){e.filteredChoices=null!=e.choicesFilter?e.node.choicesOrigin.choices.filter((function(t){return n.$choice=t,n.$choiceValue=t.value,s.evaluateExpression(e.choicesFilter.formula,n)})):e.node.choicesOrigin.choices}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function J(e){var n=null!=e.conditionalBranches&&e.conditionalBranches.length>0?e.conditionalBranches:[s.alwaysCondition()];return v(v({},e),{parentNode:null!=e.parentNode?e.parentNode:0,label:e.label||"",visibility:e.visibility||s.alwaysCondition(),conditionalBranches:n})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function W(n){var t=J(v(v({},n),{nodeType:e.AjfNodeType.AjfField})),o=null!=n.editable?n.editable:n.fieldType!==e.AjfFieldType.Formula&&n.fieldType!==e.AjfFieldType.Table;return v(v(v({},t),n),{nodeType:e.AjfNodeType.AjfField,editable:o,defaultValue:null!=n.defaultValue?n.defaultValue:null,size:n.size||"normal"})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */(
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
x=e.AjfFieldType||(e.AjfFieldType={}))[x.String=0]="String",x[x.Text=1]="Text",x[x.Number=2]="Number",x[x.Boolean=3]="Boolean",x[x.SingleChoice=4]="SingleChoice",x[x.MultipleChoice=5]="MultipleChoice",x[x.Formula=6]="Formula",x[x.Empty=7]="Empty",x[x.Date=8]="Date",x[x.DateInput=9]="DateInput",x[x.Time=10]="Time",x[x.Table=11]="Table",x[x.Geolocation=12]="Geolocation",x[x.Barcode=13]="Barcode",x[x.LENGTH=14]="LENGTH",(
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
T=e.AjfNodeType||(e.AjfNodeType={}))[T.AjfField=0]="AjfField",T[T.AjfFieldNodeLink=1]="AjfFieldNodeLink",T[T.AjfNodeGroup=2]="AjfNodeGroup",T[T.AjfSlide=3]="AjfSlide",T[T.AjfRepeatingSlide=4]="AjfRepeatingSlide",T[T.LENGTH=5]="LENGTH";var L={};
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function $(e){return e.fieldType>100&&null!=L[e.fieldType]&&!0===L[e.fieldType].isFieldWithChoice}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function z(n){return null!=n&&(n.nodeType===e.AjfNodeType.AjfRepeatingSlide||n.nodeType===e.AjfNodeType.AjfSlide)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function H(n){return null!=n&&(n.nodeType===e.AjfNodeType.AjfNodeGroup||z(n))}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function q(e,n){void 0===n&&(n=!1);var t=[];return e.forEach((function(e){A(e)&&t.push(e),function o(e){return null!=e&&null!=e.node&&H(e.node)}(e)&&(n&&t.push(e),t=t.concat(q(e.nodes,n)))})),t}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function Y(e){return null!=e&&null!=e.node&&z(e.node)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function Z(n){return null!=n&&null!=n.node&&
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function t(n){return null!=n&&n.nodeType===e.AjfNodeType.AjfNodeGroup}(n.node)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function Q(e){return{node:e.node,prefix:e.prefix?j(e.prefix):[],visible:null==e.visible||e.visible,conditionalBranches:[],updatedEvt:new n.EventEmitter}}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function K(e,t){var o=Q(e),r=null;if(null!=o.node&&null!=t){var i=V(o);null!=t[o.node.name]?r=t[o.node.name]:null!=t[i]&&(r=t[i])}return v(v({},o),{node:e.node,value:r,valid:!1,defaultValue:null!=e.defaultValue?e.defaultValue:null,validationResults:e.validationResults||[],warningResults:e.warningResults||[],warningTrigger:new n.EventEmitter})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function X(e,t){var o=K(e,t);return v(v({},o),{node:e.node,filteredChoices:j(e.node.choices),firstTriggerConditionDone:{},selectionTrigger:new n.EventEmitter})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function ee(e){var n=Q(e);return v(v({},n),{node:e.node,nodes:[],slideNodes:[],flatNodes:[],valid:!1,position:0})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function ne(e){return v(v({},e),{conditions:e.conditions||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function te(e){return v(v({},e),{conditions:e.conditions||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function oe(n){return null!=n&&(n.nodeType===e.AjfNodeType.AjfNodeGroup||n.nodeType===e.AjfNodeType.AjfRepeatingSlide)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function re(e,n,t){var o=e.condition,r=s.normalizeExpression(o,n,t);return r===o?e:{condition:r}}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function ie(e,n,t){var o=!1,r=e.map((function(e){var r=re(e,n,t);return r!==e&&(o=!0),r}));return o?r:e}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function ae(e,n,t){var o=e.formula,r=s.normalizeExpression(o,n,t);return r===o?e:{formula:r}}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function se(e){return v(v({},e),{clientValidation:e.clientValidation||!1,errorMessage:e.errorMessage||"Undefined Error"})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function ue(e){return v(v({},e),{warningMessage:e.warningMessage||"Undefined Warning"})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function le(n){return null!=n&&null!=n.node&&Y(n)&&
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function t(n){return null!=n&&n.nodeType===e.AjfNodeType.AjfRepeatingSlide}(n.node)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function ce(e){var n=[];return e.forEach((function(e){n.push(e),H(e)&&(n=n.concat(ce(e.nodes)))})),n}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function de(e,n){var t=[];return e.filter((function(e){return null!=n?e.parent==n:null==e.parent||0===e.parent})).sort((function(e,n){return e.parentNode-n.parentNode})).forEach((function(n){t.push(n),t=t.concat(de(e,n.id))})),t}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function pe(e,n){var t=e.reps||0;if(n=n||{},null==e.node.formulaReps){var o=n[V(e)];null!=o?e.reps=o:0==t&&(e.reps=1)}else{var r=s.evaluateExpression(e.node.formulaReps.formula,n);r!==t&&(e.reps=r)}return e.canAdd=0===e.node.maxReps||e.reps<e.node.maxReps,e.canRemove=0===e.node.minReps||e.reps>e.node.minReps,t}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var fe=function(){function e(){this._baseUtilFunctions=["/**\n        * count the number of digit contained on x.\n        * @param  x the value used for digit count\n        * @return the count of the digit\n      */\n    var digitCount = function(x) { return x.toString().length; }","/**\n        * count the number of decimal contained on x.\n        * @param  x the value used for decimal count\n        * @return the count of the decimal\n      */\n    var decimalCount = function(x) {\n      return (parseFloat(x).toString().split('.')[1] || []).length;\n    }","/**\n        * check if x is integer\n        * @param  x the value used for check\n        * @return true if x is a number\n      */\n    var isInt = function(x) { return !/[,.]/.test(x); }","/**\n        * check if x is not empity\n        * @param  x the value used for check\n        * @return true if x defined and not null and the number of digit is > 0\n      */\n    var notEmpty = function (x) {\n      return (typeof x !== 'undefined' && x !== null ? x.toString().length > 0 : false);\n    }","/**\n        * check if x is contained on array\n        * @param  x the value used for check\n        * @return the position of x on array or if array === x\n      */\n    var valueInChoice = function(array, x) { return array.indexOf(x) > -1 || array === x; }","var scanGroupField = function(reps, acc, callback) {\n        for (var i = 0; i < reps; i++) {\n            acc = callback(acc, i);\n        }\n        return acc;\n    }","/**\n        * sum the value contained on array\n        * @param  x the array\n        * @return the sum\n      */\n    var sum = function(array) {return array.reduce(function(a, b){ return a + b; }, 0); }","var dateOperations = function(dString, period, operation, v) {\n        fmt = 'mm/dd/yyyy';\n        var d = (typeof dString !== 'undefined') ? dateUtils.parse(dString) : new Date();\n        if (operation == 'remove') {\n          v = -v;\n        }\n        var dateOp;\n        switch (period) {\n          case 'day':\n            dateOp = dateUtils.addDays;\n            break;\n          case 'month':\n            dateOp = dateUtils.addMonths;\n            break;\n          case 'year':\n            dateOp = dateUtils.addYears;\n            break;\n          default:\n            return -1;\n        }\n        return dateUtils.format(dateOp(d, v), fmt);\n      }","/**\n        * round the num\n        * @param  num the value to round\n        * @param  digits how many digit\n        * @return num rounded\n      */\n      var round = function(num, digits) {\n        digits = digits || 0;\n        var f = 0;\n        try { f = parseFloat(num); } catch (e) { }\n        var m = Math.pow(10, digits);\n        return Math.round(f * m) / m;\n      }","/**\n        * extract the property of the source object with property != null\n        * @param  source array of object wich contains property\n        * @param  property the property on wich we want filter\n        * @return array of dates\n      */\n      var extractArray = function(source, property, property2) {\n        source = (source || []).slice(0);\n        var l = source.length;\n        var res = [];\n        for (var i = 0; i < l ; i++) {\n          if (source[i][property] != null && source[i][property2] != null) {\n            res.push(source[i][property] + source[i][property2]);\n          }\n          else if (source[i][property] != null) {\n            res.push(source[i][property]);\n          }\n        }\n        return res;\n      }","/**\n        * extract the property of the source object with property != null\n        * @param  source array of object wich contains property\n        * @param  propertues string array the properties to sum\n        * @return the sum\n      */\n      var extractSum = function(source, properties) {\n        var sum = 0;\n        properties = (properties || []).slice(0);\n        var l = properties.length;\n\n        for (var i = 0; i < l ; i++) {\n          var array = extractArray(source, properties[i]);\n          var leng = array.length;\n          for(var j = 0; j < leng; i++) {\n            sum += array[j];\n          }\n        }\n        return sum;\n      }","/**\n        * extract the array of sum for each week != null\n        * @param  source array of object wich contains property\n        * @param  propertues string array the properties to sum\n        * @return the sum\n      */\n      var extractArraySum = function(source, properties) {\n        var arrays = [];\n        properties = (properties || []).slice(0);\n\n        for (var propI = 0; propI < properties.length ; propI++) {\n          var array = extractArray(source, properties[propI]);\n          arrays.push(array);\n        }\n\n        var res = [];\n        for (var weekI = 0; weekI < array.length; weekI ++ ) {\n          var sum = 0;\n          for (var propI = 0; propI < properties.length ; propI++) {\n            sum = sum + arrays[propI][weekI]\n          }\n          res.push(sum);\n        }\n        return res;\n      }","/**\n        * draw a threshold line on chart related to the property\n        * @param  source array of object wich contains property\n        * @param  property the property on wich we want filter\n        * @return array of dates\n      */\n      var drawThreshold = function(source, property, threshold) {\n        source = (source || []).slice(0);\n        var l = source.length;\n        var res = [];\n        for (var i = 0; i < l ; i++) {\n          if (source[i][property] != null) {\n            res.push(threshold);\n          }\n        }\n        return res;\n      }",'/**\n        * extract the dates of the source object with property != null\n        * @param  source array of object wich contains property and date_start\n        * @param  property the property on wich we want to calculate dates\n        * @param  format the format of the date\n        * @return array of dates\n      */\n      var extractDates = function(source, property, format) {\n        source = (source || []).slice(0);\n        var l = source.length;\n        var res = [];\n        var prefix = \'\';\n        for (var i = 0; i < l ; i++) {\n          if (source[i][property] != null) {\n            switch(format) {\n              case "WW":\n                prefix = "W";\n                break;\n              case "mm":\n                prefix = "M";\n                break;\n              default:\n                prefix = "";\n            }\n            res.push(prefix + formatDate(source[i]["date_start"], format));\n          }\n        }\n        return res;\n      }',"/**\n        * extract the last property contains in source != null\n        * @param  source array of object wich contains property and date_start\n        * @param  property the property to find\n        * @return the last property != null\n      */\n      var lastProperty = function(source, property) {\n        source = (source || []).slice(0);\n        var l = source.length -1;\n\n        while (l >= 0 && source[l][property] == null) {\n          l--;\n          if (l < 0) return 0;\n        }\n        return l >= 0 ? source[l][property] : 0;\n      }","var sumLastProperties = function(source, properties) {\n        source = (source || []).slice(0);\n        var sum = 0;\n        for (var i = 0; i < properties.length; i++) {\n          sum += lastProperty(source, properties[i]);\n        }\n\n        return sum;\n      }",'/**\n        * compute the trend of the property contained on the source.\n        * @param  source array of object wich contains property\n        * @param  property the property on wich we want to calculate the trend\n        * @return an html icon that identifies the trend\n      */\n      var calculateTrendProperty = function(source, property) {\n        source = (source || []).slice(0);\n        var last = source.length - 1;\n        while (source[last][property] == null) {\n          if (last == 0) {\n            break;\n          }\n          last--;\n        }\n        var lastLast = last - 1;\n        if (last == 0) {\n          lastLast = last;\n        } else {\n          while (source[lastLast][property] == null) {\n            if (lastLast == 0) {\n              lastLast = last;\n              break;\n            }\n            lastLast--;\n          }\n        }\n\n        var lastProperty = source[last]?(source[last][property] || 0): 0;\n        var lastLastProperty = source[lastLast]?(source[lastLast][property] || 0): 0;\n\n        if (lastProperty == lastLastProperty) {\n          return \'<p><i class="material-icons" style="color:blue">trending_flat</i></p>\';\n        } else if (lastProperty > lastLastProperty) {\n          return \'<p><i class="material-icons" style="color:green">trending_up</i></p>\';\n        } else {\n          return \'<p><i class="material-icons" style="color:red">trending_down</i></p>\';\n        }\n      }',"/**\n        * compute the average value of the property contained on the source.\n        * @param  source array of object wich contains property\n        * @param  property the property on wich we want to calculate the average\n        * @param  range the range on wich we want to calculate the average\n        * @param  coefficent the coefficent used for calculate the threshold\n                  if coefficent is 0 mean return the count of property > 0\n        * @return the average value || the count of property > 0\n      */\n      var calculateAvgProperty = function(source, property, range, coefficient) {\n        source = (source || []).slice(0);\n\n        source.pop();\n\n        coefficient = coefficient || 1;\n        range = range || 12;\n\n        var l = source.length;\n        var res = 0;\n        var counter = 0;\n        var noZero = 0;\n\n        if(l < range) {\n          range = l;\n        }\n\n        while (range != 0) {\n          counter++;\n          if (source[l - 1][property] != null) {\n            res += source[l - 1][property];\n\n            if (source[l - 1][property] > 0) {\n              noZero++;\n            }\n          }\n          l--;\n          range--;\n        }\n\n        if (coefficient == 0) {\n          return noZero;\n        } else {\n          var threshold = (res/counter)*coefficient || 0;\n          return threshold;\n        }\n      }","var alert = function(source, property, threshold, fmt) {\n        source = (source || []).slice(0);\n        var l = source.length;\n\n        if ( lastProperty(source, property)  > threshold ) {\n          return '<p><i class=\"material-icons\" style=\"color:red\">warning</i></p>';\n          } else {\n            return '<p></p>';\n          }\n      }","var formatNumber = function(num, fmt) {\n        fmt = fmt || '0,0[.]0';\n        return numeral(num).format(fmt);\n      }","var formatDate = function(date, fmt) {\n        fmt = fmt || 'mm-dd-yyyy';\n        return dateUtils.format(date, fmt);\n      }","var isoMonth = function(date, fmt) {\n        fmt = fmt || 'mm';\n        var du = dateUtils;\n        return du.format(du.addDays(du.startOfMonth(date), 4),fmt)\n      }","var nextCounterValue = function(counterName, firstValue) {\n        firstValue = firstValue != null ? firstValue : 0;\n        if (execContext['$$'+counterName] == null) {\n          execContext['$$'+counterName] = firstValue;\n        } else {\n          execContext['$$'+counterName]++;\n        }\n        return execContext['$$'+counterName];\n      }","var getCoordinate = function(source, zoom) {\n        zoom = zoom || 6;\n        if(source == null) {\n          return [51.505,-0.09, zoom];\n        } else {\n          return [source[0], source[1], zoom];\n        }\n      }"],this._functions=[],this._functionsStr="",this._initFunctions()}return e.prototype.addFunction=function(e){this._functions.push(e),this._initFunctions()},e.prototype.addFunctionHandler=function(e,n){void 0===s.AjfExpressionUtils.utils[e]&&(s.AjfExpressionUtils.utils[e]={fn:n})},e.prototype._initFunctions=function(){var e=this._functions.map((function(e){return"string"==typeof e?e:e.toString()})).join("; ");this._functionsStr=this._baseUtilFunctions.join("; ")+"; "+e,s.AjfExpressionUtils.UTIL_FUNCTIONS=this._functionsStr},g([n.Injectable(),b("design:paramtypes",[])],e)}(),he=(f||a).tokenize,me=function(){function a(e){this._visibilityNodesMapUpdates=new o.Subject,this._repetitionNodesMapUpdates=new o.Subject,this._conditionalBranchNodesMapUpdates=new o.Subject,this._formulaNodesMapUpdates=new o.Subject,this._validationNodesMapUpdates=new o.Subject,this._warningNodesMapUpdates=new o.Subject,this._filteredChoicesNodesMapUpdates=new o.Subject,this._triggerConditionsNodesMapUpdates=new o.Subject,this._nextSlideConditionsNodesMapUpdates=new o.Subject,this._formInitEvent=new n.EventEmitter,this.formInitEvent=this._formInitEvent.asObservable(),this._formGroup=new o.BehaviorSubject(null),this.formGroup=this._formGroup.asObservable(),this._form=new o.BehaviorSubject(null),this._nodesUpdates=new o.Subject,this._formGroupSubscription=o.Subscription.EMPTY,this._valueChanged=new o.Subject,this._nextSlideTrigger=new n.EventEmitter,this.nextSlideTrigger=this._nextSlideTrigger.asObservable(),this._slidesNum=new o.BehaviorSubject(0),this.slidesNum=this._slidesNum.asObservable(),this._initUpdateMapStreams(),this._initNodesStreams(),this._initErrorsStreams(),this._initFormStreams(),this._updateFormValueAndValidity()}return Object.defineProperty(a.prototype,"nodesTree",{get:function(){return this._flatNodesTree},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"errorPositions",{get:function(){return this._errorPositions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"errors",{get:function(){return this._errors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentSupplementaryInformations",{get:function(){var e=this._form.getValue();return null!=e&&null!=e.form?e.form.supplementaryInformations:null},enumerable:!1,configurable:!0}),a.prototype.setForm=function(e,n){void 0===n&&(n={}),this._initUpdateMapStreams(),null!=e&&0===Object.keys(n).length&&Object.keys(e.initContext||{}).length>0&&(n=e.initContext||{});var t=this._form.getValue();(null==t&&null!=e||null!=t&&e!==t.form)&&this._form.next({form:e,context:n})},a.prototype.getFormValue=function(){var e=this._formGroup.getValue();return null==e?{}:i.deepCopy(e.value)},a.prototype.addGroup=function(e){var n=this;return new o.Observable((function(t){if(null!=e.formulaReps)return t.next(!1),void t.complete();var o=e.node.maxReps;if(o>0&&e.reps+1>o)return t.next(!1),void t.complete();var r=e.reps;e.reps=e.reps+1,e.canAdd=0===e.node.maxReps||e.reps<e.node.maxReps,e.canRemove=0===e.node.minReps||e.reps>e.node.minReps,n._nodesUpdates.next((function(o){var i=q(o,!0);return n._adjustReps(i,e,r,n.getFormValue()),t.next(!0),t.complete(),o}))}))},a.prototype.removeGroup=function(e){var n=this;return new o.Observable((function(t){if(null!=e.formulaReps)return t.next(!1),void t.complete();if(e.reps-1<e.node.minReps)return t.next(!1),void t.complete();var o=e.reps;e.reps=e.reps-1,e.canAdd=0===e.node.maxReps||e.reps<e.node.maxReps,e.canRemove=0===e.node.minReps||e.reps>e.node.minReps,n._nodesUpdates.next((function(r){return n._adjustReps(r,e,o,n.getFormValue()),t.next(!0),t.complete(),r}))}))},a.prototype.getControl=function(e){return this.formGroup.pipe(r.map((function(n){var t=V(e);return null!=n&&n.contains(t)?n.controls[t]:null})))},a.prototype._initErrorsStreams=function(){var n=this;this._errorPositions=this._valueChanged.pipe(r.withLatestFrom(this._nodes,this._form),r.filter((function(e){return null!=e[2]&&null!=e[2].form})),r.map((function(t){var o=t[2].form,r=0,i=[];return t[1].forEach((function(n){if(n.node.nodeType===e.AjfNodeType.AjfRepeatingSlide)for(var t=n,o=0;o<t.reps;o++)n.visible&&(r++,0==o&&(t.position=r),(u=o)>=(s=t).slideNodes.length||s.slideNodes[u].map((function(e){return!(e.visible&&Object.keys(e).indexOf("valid")>-1)||e.valid})).reduce((function(e,n){return e&&n}),!0)||i.push(r));else if(n.node.nodeType===e.AjfNodeType.AjfSlide){var a=n;a.visible&&(r++,a.position=r,a.valid||i.push(r))}var s,u})),o.valid=0==i.length,n._slidesNum.next(r),i})),r.publishReplay(),r.refCount()),this._errors=this._errorPositions.pipe(r.map((function(e){return null!=e?e.length:0})),r.startWith(0),r.publishReplay(),r.refCount())},a.prototype._initUpdateMapStreams=function(){this._visibilityNodesMap=this._visibilityNodesMapUpdates.pipe(r.scan((function(e,n){return n(e)}),{}),r.startWith({}),r.share()),this._repetitionNodesMap=this._repetitionNodesMapUpdates.pipe(r.scan((function(e,n){return n(e)}),{}),r.startWith({}),r.share()),this._conditionalBranchNodesMap=this._conditionalBranchNodesMapUpdates.pipe(r.scan((function(e,n){return n(e)}),{}),r.startWith({}),r.share()),this._formulaNodesMap=this._formulaNodesMapUpdates.pipe(r.scan((function(e,n){return n(e)}),{}),r.startWith({}),r.share()),this._validationNodesMap=this._validationNodesMapUpdates.pipe(r.scan((function(e,n){return n(e)}),{}),r.startWith({}),r.share()),this._warningNodesMap=this._warningNodesMapUpdates.pipe(r.scan((function(e,n){return n(e)}),{}),r.startWith({}),r.share()),this._filteredChoicesNodesMap=this._filteredChoicesNodesMapUpdates.pipe(r.scan((function(e,n){return n(e)}),{}),r.startWith({}),r.share()),this._triggerConditionsNodesMap=this._triggerConditionsNodesMapUpdates.pipe(r.scan((function(e,n){return n(e)}),{}),r.startWith({}),r.share()),this._nextSlideConditionsNodesMap=this._nextSlideConditionsNodesMapUpdates.pipe(r.scan((function(e,n){return n(e)}),{}),r.startWith({}),r.share()),this._nodesMaps=[this._visibilityNodesMap,this._repetitionNodesMap,this._conditionalBranchNodesMap,this._formulaNodesMap,this._validationNodesMap,this._warningNodesMap,this._nextSlideConditionsNodesMap,this._filteredChoicesNodesMap,this._triggerConditionsNodesMap]},a.prototype._initFormStreams=function(){var n=this,i=this._form;i.pipe(r.map((function(e){return n._initFormGroupStreams(new t.FormGroup({}))}))).subscribe(this._formGroup),i.pipe(r.switchMap((function(e){if(null==e||null==e.form)return o.of(e);var n=e.form.choicesOrigins||[];return 0===n.length?o.of(e):o.from(Promise.all(n.map((function(e){return M(e)})))).pipe(r.map((function(){return e})))})),r.map((function(t){return function(o){var r=null!=t&&null!=t.form?n._orderedNodesInstancesTree(ce(t.form.nodes),t.form.nodes,void 0,[],t.context||{}):[],i=0;return r.forEach((function(n){if(n.node.nodeType===e.AjfNodeType.AjfRepeatingSlide)for(var t=n,o=0;o<t.reps;o++)n.visible&&(i++,0==o&&(t.position=i));else n.node.nodeType===e.AjfNodeType.AjfSlide&&n.visible&&(i++,n.position=i)})),r}}))).subscribe(this._nodesUpdates)},a.prototype._initNodeInstance=function(o,r,i,a,u){var l=this;void 0===u&&(u=!0);var c=function d(n,t,o,r){var i=null,a=t.nodeType;switch(a){case e.AjfNodeType.AjfField:var u=t;if(u.fieldType>100)i=null!=L[u.fieldType]&&null!=L[u.fieldType].createInstance?L[u.fieldType].createInstance({node:t,prefix:o},r):K({node:t,prefix:o},r);else switch(u.fieldType){case e.AjfFieldType.SingleChoice:case e.AjfFieldType.MultipleChoice:i=X({node:t,prefix:o},r);break;case e.AjfFieldType.Table:i=function l(e,n){!function t(e){e.rows.forEach((function(n,t){n.forEach((function(n,o){"string"==typeof n&&(e.rows[t][o]={formula:n,editable:e.editable})}))}))}(e.node);var o=K(e,n);return v(v({},o),{node:e.node,context:n,hideEmptyRows:e.hideEmptyRows||!1,controls:[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */({node:t,prefix:o},r);break;default:i=K({node:t,prefix:o},r)}break;case e.AjfNodeType.AjfNodeGroup:i=function c(e){var n=Q(e);return v(v({},n),{node:e.node,formulaReps:e.formulaReps,reps:0,nodes:[],flatNodes:[]})}({node:t,prefix:o});break;case e.AjfNodeType.AjfRepeatingSlide:i=function d(n){var t=n.node,o=y(n,["node"]),r=y(t,["nodeType"]),i=ee(v(v({},o),{node:v({nodeType:e.AjfNodeType.AjfSlide},r)}));return v(v({},i),{node:n.node,slideNodes:[],formulaReps:n.formulaReps,reps:0,nodes:[],flatNodes:[]})}({node:t,prefix:o});break;case e.AjfNodeType.AjfSlide:i=ee({node:t,prefix:o})}if(null!=i)if(null!=o&&o.length>0){var p=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function f(e,n){var t={};return function o(e,n){for(var t=[],o=n.parent;null!=o;){var r=e.map((function(e){return e.node||e})).find((function(e){return e.id==o}));r&&oe(r)&&t.push(r),o=null!=r?r.parent:null}return t}(e,n).forEach((function(e,n){return(e.nodes||[]).forEach((function(e){w(e)&&(t[e.name]=n)}))})),t}(n,t);if(null!=t.visibility){var h=t.visibility.condition,m=s.normalizeExpression(h,p,o);i.visibility=m!==h?s.createCondition({condition:m}):t.visibility}var g=null!=i.node.conditionalBranches&&i.node.conditionalBranches.length>0?i.node.conditionalBranches:[s.alwaysCondition()];if(i.conditionalBranches=ie(g,p,o),a===e.AjfNodeType.AjfNodeGroup||a===e.AjfNodeType.AjfRepeatingSlide){var _=i,b=_.node.formulaReps;if(null!=b){var N=b.formula,j=s.normalizeExpression(N,p,o);_.formulaReps=j!==N?s.createFormula({formula:j}):b}}else if(a===e.AjfNodeType.AjfField){var x=(R=i).node;if(x.formula&&(R.formula=ae(x.formula,p,o)),null!=x.validation){var T=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function C(e,n,t){var o=!1,r=e.map((function(e){var r=function i(e,n,t){var o=e.condition,r=s.normalizeExpression(o,n,t);return r===o?e:se({condition:r})}(e,n,t);return r!==e&&(o=!0),r}));return o?r:e}(x.validation.conditions,p,o);T!==x.validation.conditions?(R.validation=ne(x.validation),R.validation.conditions=T):R.validation=x.validation}if(null!=x.warning){var S=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function M(e,n,t){var o=!1,r=e.map((function(e){var r=function i(e,n,t){var o=e.condition,r=s.normalizeExpression(o,n,t);return r===o?e:ue({condition:r})}(e,n,t);return r!==e&&(o=!0),r}));return o?r:e}(x.warning.conditions,p,o);S!==x.warning.conditions?(R.warning=te(x.warning),R.warning.conditions=S):R.warning=x.warning}if(null!=x.nextSlideCondition&&(R.nextSlideCondition=re(x.nextSlideCondition,p,o)),F(x)){var I=(O=i).node;null!=I.choicesFilter&&(O.choicesFilter=ae(I.choicesFilter,p,o)),null!=I.triggerConditions&&(O.triggerConditions=ie(I.triggerConditions,p,o))}}}else if(i.visibility=i.node.visibility,g=null!=i.node.conditionalBranches&&i.node.conditionalBranches.length>0?i.node.conditionalBranches:[s.alwaysCondition()],i.conditionalBranches=g,Z(i)||le(i))i.formulaReps=i.node.formulaReps;else if(A(i)){var R,O;(R=i).validation=R.node.validation,R.warning=R.node.warning,R.nextSlideCondition=R.node.nextSlideCondition,E(i)&&((O=i).choicesFilter=O.node.choicesFilter,O.triggerConditions=O.node.triggerConditions),R.formula=R.node.formula}return i}(o,r,i,a);if(null!=c){var p=c.node.nodeType;if(p===e.AjfNodeType.AjfNodeGroup||p===e.AjfNodeType.AjfRepeatingSlide?this._explodeRepeatingNode(o,c,a):p===e.AjfNodeType.AjfSlide&&(c.nodes=this._orderedNodesInstancesTree(o,c.node.nodes,c.node.id,i,a)),R(c,a,u),I(c,a),p===e.AjfNodeType.AjfField){var f=c;if($(f.node)||F(f.node))G(f,a);else{if(
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function h(n){return null!=n&&A(n)&&function t(n){return n.fieldType===e.AjfFieldType.Table}(n.node)}(f)){var m=f,g=m.node;m.context=a[V(m)]||a;var _=this._formGroup.getValue(),b=[];b.push([r.label,g.columnLabels]),null!=_&&(g.rows.forEach((function(e,o){var r=[];e.forEach((function(e,i){var a=g.name+"__"+o+"__"+i,s={control:new t.FormControl,show:!1};s.control.setValue(m.context[e.formula]),_.registerControl(a,s.control),r.push(s);var u={formula:{formula:e.formula},node:{name:a,nodeType:0,editable:!1},visible:!0,prefix:[],conditionalBranches:[],updatedEvt:new n.EventEmitter};l._addToNodesFormulaMap(u,e.formula)})),b.push([g.rowLabels[o],r])})),m.controls=b)}else f.value=a[V(c)];!function N(e,n,t){void 0===t&&(t=!0),R(e,n,t),I(e,n),P(e,n),U(e,n),k(e,n),B(e,n)}(f,a)}}this._addNodeInstance(c)}return c},a.prototype._adjustReps=function(n,t,o,r){var i=this,a=t.reps,s={added:null,removed:null};if(o<a){var u=[];if(null==t.nodes&&(t.nodes=[]),t.node.nodeType===e.AjfNodeType.AjfNodeGroup){var l=W({id:999,name:"",parent:-1,fieldType:e.AjfFieldType.Empty,label:t.node.label}),c=this._initNodeInstance(n,l,t.prefix.slice(0),r);null!=c&&t.nodes.push(c)}for(var d=function(e){var o=t.prefix.slice(0),a=t.node;o.push(e),de(a.nodes,t.node.id).forEach((function(e){var a=i._initNodeInstance(n,e,o,r);null!=a&&(u.push(a),t.nodes.push(a))})),p._addNodeInstance(t)},p=this,f=o;f<a;f++)d(f);s.added=u}else if(o>a){var h=t.nodes.length/o;t.node.nodeType===e.AjfNodeType.AjfNodeGroup&&h++,s.removed=t.nodes.splice(a*h,h),s.removed.forEach((function(e){i._removeNodeInstance(e)}))}if(o!=a&&null==t.formulaReps){var m=this._formGroup.getValue(),v=V(t);null!=m&&m.contains(v)&&m.controls[v].setValue(t.reps)}if(t.flatNodes=q(t.nodes),t.node.nodeType===e.AjfNodeType.AjfRepeatingSlide){var y=t,g=[],_=null!=y.nodes?y.nodes.length/y.reps:0;for(f=0;f<t.reps;f++){var b=f*_;g.push(t.nodes.slice(b,b+_))}y.slideNodes=g}return s},a.prototype._updateFormValueAndValidity=function(){this._nodesUpdates.asObservable().pipe(r.withLatestFrom(this._formGroup),r.filter((function(e){return null!==e[1]}))).subscribe((function(e){e[1].updateValueAndValidity()}))},a.prototype._explodeRepeatingNode=function(e,n,t){var o=pe(n,t);o!==n.reps&&this._adjustReps(e,n,o,t)},a.prototype._orderedNodesInstancesTree=function(e,n,t,o,r){var i=this;void 0===t&&(t=null),void 0===o&&(o=[]);var a=[],s=o.length>0?"__"+o.join("__"):"";return de(n,t).forEach((function(n){var t=a.find((function(e){return e.node.id==n.parent&&O(e)==s})),u=i._initNodeInstance(e,n,o,r,null==t||null!=t.verifiedBranch&&t.verifiedBranch==n.parentNode);null!=u&&a.push(u)})),a},a.prototype._formValueDelta=function(e,n){return Object.keys(n).filter((function(t){return e[t]!==n[t]}))},a.prototype._initFormGroupStreams=function(e){var n=this;this._formGroupSubscription.unsubscribe();var t=!0,i=!0;return this._formInitEvent.emit(0),this._formGroupSubscription=e.valueChanges.pipe(r.startWith({}),r.pairwise(),r.debounceTime(200),r.withLatestFrom.apply(void 0,j(this._nodesMaps,[this._flatNodes]))).subscribe((function(e){var r=t&&{}||e[0][0];t=!1;var a=e[0][1],u=e[1],l=e[2],c=e[3],d=e[4],p=e[5],f=e[6],h=e[7],m=e[8],v=e[9],y=e[10],g=n._formValueDelta(r,a),_=g.length,b=[];g.forEach((function(e){if(b=b.concat(y.filter((function(n){return V(n)===e}))),null!=u[e]&&u[e].forEach((function(e){var t=V(e),r=R(e,a),i=A(e);if(r&&!e.visible){var s=n._formGroup.getValue();if(null!=s)var u=o.timer(200).subscribe((function(){u&&!u.closed&&u.unsubscribe(),s.controls[t].setValue(null)}));i&&(e.value=null)}else if(r&&e.visible&&i){var l=n._formGroup.getValue(),c=P(e,a);null!=l&&c.changed&&l.controls[t].setValue(c.value)}-1===b.indexOf(e)&&b.push(e)})),null!=l[e]&&l[e].forEach((function(e){if(oe(e.node)){var t=e,o=pe(t,a);o!==t.reps&&n._adjustReps(y,t,o,a)}-1===b.indexOf(e)&&b.push(e)})),null!=c[e]&&c[e].forEach((function(e){I(e,a);var t=e.verifiedBranch;e.conditionalBranches.forEach((function(o,r){r==t?n._showSubtree(a,y,e,r):n._hideSubtree(a,y,e,r)})),-1===b.indexOf(e)&&b.push(e)})),null!=d[e]&&d[e].forEach((function(e){if(A(e)){var t=e,o=P(t,a),r=n._formGroup.getValue();null!=r&&o.changed&&(U(t,a),r.controls[V(e)].setValue(o.value))}-1===b.indexOf(e)&&b.push(e)})),null!=p[e]&&p[e].forEach((function(e){if(A(e)){var t=e;a.$value=a[V(e)],U(t,a,n.currentSupplementaryInformations)}-1===b.indexOf(e)&&b.push(e)})),null!=f[e]&&f[e].forEach((function(e){if(A(e)){var n=e;k(n,a),null!=n.warningResults&&n.warningResults.filter((function(e){return e.result})).length>0&&n.warningTrigger.emit()}-1===b.indexOf(e)&&b.push(e)})),1==_&&null!=h[e]&&1==h[e].filter((function(e){return!!A(e)&&B(e,a)})).length&&n._nextSlideTrigger.emit(),null!=m[e]&&m[e].forEach((function(e){if(A(e)){var n=e;F(n.node)&&G(n,a)}-1===b.indexOf(e)&&b.push(e)})),1==_&&null!=v[e]){var t=v[e].filter((function(e){if(!A(e))return!1;var n=e;return!!F(n.node)&&function t(e,n){if(null==e.triggerConditions)return!1;var t=V(e);if(e.firstTriggerConditionDone[t])return!1;for(var o=!1,r=e.triggerConditions.length,i=0;i<r;i++)if(s.evaluateExpression(e.triggerConditions[i].condition,n)){o=!0;break}return e.firstTriggerConditionDone[t]=o,o}(n,a)}));1==t.length&&t[0].selectionTrigger.emit()}})),b.forEach((function(e){for(var n=y.indexOf(e)-1;n>=0;){var t=y[n];if(Y(t)){for(var o=t,r=o.flatNodes.length,i=!0,a=0;a<r;a++){var s=o.flatNodes[a];if(s.visible&&A(s)&&!s.valid){i=!1;break}}o.valid!==i&&(o.valid=i),o.updatedEvt.emit()}n--}e.updatedEvt.emit()})),i&&(i=!1,n._formInitEvent.emit(1)),n._valueChanged.next()})),e},a.prototype._showSubtree=function(e,n,t,o){this._updateSubtreeVisibility(e,n,t,!0,o)},a.prototype._hideSubtree=function(e,n,t,o){this._updateSubtreeVisibility(e,n,t,!1,o)},a.prototype._updateSubtreeVisibility=function(e,n,t,o,r){var i,a=this,s=O(t);i=n.filter(null!=r?function(e){return O(e)==s&&e.node.parent==t.node.id&&e.node.parentNode==r}:function(e){return O(e)==s&&e.node.parent==t.node.id});var u=H(t.node);i.forEach((function(r){(!u||u&&null==t.node.nodes.find((function(e){return e.id==r.node.id})))&&(R(r,e,o),P(r,e),a._updateSubtreeVisibility(e,n,r,o))}))},a.prototype._initNodesStreams=function(){this._nodes=this._nodesUpdates.pipe(r.scan((function(e,n){return n(e)}),[]),r.share()),this._flatNodesTree=this._nodes.pipe(r.map((function(e){return function n(e){var n=[];return e.forEach((function(e){if(Y(e)){var t=e;n.push(t),t.flatNodes=q(t.nodes)}})),n}(e)})),r.share()),this._flatNodes=this._flatNodesTree.pipe(r.map((function(e){var n=[];return e.forEach((function(e){n.push(e),n=n.concat(e.flatNodes)})),n})),r.share())},a.prototype._removeNodeInstance=function(e){var n=V(e);return this._removeNodesVisibilityMapIndex(n),this._removeNodesRepetitionMapIndex(n),this._removeNodesConditionalBranchMapIndex(n),this._removeNodesFormulaMapIndex(n),this._removeNodesValidationMapIndex(n),this._removeNodesWarningMapIndex(n),this._removeNodesNextSlideConditionsMapIndex(n),this._removeNodesFilteredChoicesMapIndex(n),this._removeNodesTriggerConditionsMapIndex(n),Y(e)?this._removeSlideInstance(e):(oe(e.node)?this._removeNodeGroupInstance(e):A(e)&&this._removeFieldInstance(e),e)},a.prototype._removeSlideInstance=function(e){var n=this,t=e.node;return null!=t.visibility&&this._removeFromNodesVisibilityMap(e,t.visibility.condition),e.conditionalBranches.forEach((function(t){n._removeFromNodesConditionalBranchMap(e,t.condition)})),e},a.prototype._removeNodeGroupInstance=function(e){var n=e.node;return null!=n.visibility&&this._removeFromNodesVisibilityMap(e,n.visibility.condition),null!=e.formulaReps&&null!=n.formulaReps&&this._removeFromNodesRepetitionMap(e,n.formulaReps.formula),e},a.prototype._removeFieldInstance=function(e){var n=this,t=this._formGroup.getValue(),o=V(e);if(null!=t&&t.contains(o)&&t.removeControl(o),null!=e.validation&&this._validationNodesMapUpdates.next((function(e){return null==e[o]&&delete e[o],e})),null!=e.visibility&&this._removeFromNodesVisibilityMap(e,e.visibility.condition),e.conditionalBranches.forEach((function(t){n._removeFromNodesConditionalBranchMap(e,t.condition)})),e.formula&&this._removeFromNodesFormulaMap(e,e.formula.formula),oe(e.node)&&null!=e.formulaReps&&this._removeFromNodesRepetitionMap(e,e.formulaReps.formula),null!=e.validation&&null!=e.validation.conditions&&e.validation.conditions.forEach((function(t){n._removeFromNodesValidationMap(e,t.condition)})),null!=e.warning&&e.warning.conditions.forEach((function(t){n._removeFromNodesWarningMap(e,t.condition)})),null!=e.nextSlideCondition&&this._removeFromNodesNextSlideConditionsMap(e,e.nextSlideCondition.condition),F(e.node)){var r=e;null!=r.choicesFilter&&(this._removeFromNodesFilteredChoicesMap(e,r.choicesFilter.formula),null!=r.triggerConditions&&r.triggerConditions.forEach((function(t){n._removeFromNodesTriggerConditionsMap(e,t.condition)})))}return e},a.prototype._addNodeInstance=function(n){return oe(n.node)?this._addNodeGroupInstance(n):
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function t(n){return null!=n&&null!=n.node&&function t(n){return null!=n&&n.nodeType===e.AjfNodeType.AjfSlide}(n.node)}(n)?this._addSlideInstance(n):A(n)?this._addFieldInstance(n):n},a.prototype._addFieldInstance=function(e){var n=this,o=this._formGroup.getValue(),r=V(e);if(null!=o&&!o.contains(r)){var i=new t.FormControl;i.setValue(e.value),o.registerControl(r,i)}if(null!=e.validation?this._validationNodesMapUpdates.next((function(n){return null==n[r]&&(n[r]=[]),-1==n[r].indexOf(e)&&n[r].push(e),n})):e.valid=!0,null!=e.visibility&&this._addToNodesVisibilityMap(e,e.visibility.condition),e.conditionalBranches.forEach((function(t){n._addToNodesConditionalBranchMap(e,t.condition)})),e.formula&&this._addToNodesFormulaMap(e,e.formula.formula),Z(e)&&null!=e.formulaReps&&this._addToNodesRepetitionMap(e,e.formulaReps.formula),null!=e.validation&&null!=e.validation.conditions&&e.validation.conditions.forEach((function(t){n._addToNodesValidationMap(e,t.condition)})),null!=e.warning&&e.warning.conditions.forEach((function(t){n._addToNodesWarningMap(e,t.condition)})),null!=e.nextSlideCondition&&this._addToNodesNextSlideConditionsMap(e,e.nextSlideCondition.condition),$(e.node)||E(e)){var a=e;null!=a.choicesFilter&&this._addToNodesFilteredChoicesMap(e,a.choicesFilter.formula),null!=a.triggerConditions&&a.triggerConditions.forEach((function(t){n._addToNodesTriggerConditionsMap(e,t.condition)}))}return e},a.prototype._addSlideInstance=function(e){var n=this,t=e.node;return null!=t.visibility&&this._addToNodesVisibilityMap(e,t.visibility.condition),e.conditionalBranches.forEach((function(t){n._addToNodesConditionalBranchMap(e,t.condition)})),e},a.prototype._addNodeGroupInstance=function(e){var n=this,o=e.node;if(null!=o.visibility&&this._addToNodesVisibilityMap(e,o.visibility.condition),e.conditionalBranches.forEach((function(t){n._addToNodesConditionalBranchMap(e,t.condition)})),null!=e.formulaReps)null!=o.formulaReps&&this._addToNodesRepetitionMap(e,o.formulaReps.formula);else{var r=this._formGroup.getValue(),i=V(e);if(null!=r&&!r.contains(i)){var a=new t.FormControl;a.setValue(e.reps),r.registerControl(i,a)}}return e},a.prototype._removeNodesVisibilityMapIndex=function(e){this._removeNodesMapIndex(this._visibilityNodesMapUpdates,e)},a.prototype._removeNodesRepetitionMapIndex=function(e){this._removeNodesMapIndex(this._repetitionNodesMapUpdates,e)},a.prototype._removeNodesConditionalBranchMapIndex=function(e){this._removeNodesMapIndex(this._conditionalBranchNodesMapUpdates,e)},a.prototype._removeNodesFormulaMapIndex=function(e){this._removeNodesMapIndex(this._formulaNodesMapUpdates,e)},a.prototype._removeNodesValidationMapIndex=function(e){this._removeNodesMapIndex(this._validationNodesMapUpdates,e)},a.prototype._removeNodesWarningMapIndex=function(e){this._removeNodesMapIndex(this._warningNodesMapUpdates,e)},a.prototype._removeNodesFilteredChoicesMapIndex=function(e){this._removeNodesMapIndex(this._filteredChoicesNodesMapUpdates,e)},a.prototype._removeNodesTriggerConditionsMapIndex=function(e){this._removeNodesMapIndex(this._triggerConditionsNodesMapUpdates,e)},a.prototype._removeNodesNextSlideConditionsMapIndex=function(e){this._removeNodesMapIndex(this._nextSlideConditionsNodesMapUpdates,e)},a.prototype._removeNodesMapIndex=function(e,n){e.next((function(e){return Object.keys(e).indexOf(n)>-1&&delete e[n],e}))},a.prototype._removeFromNodesVisibilityMap=function(e,n){this._removeFromNodesMap(this._visibilityNodesMapUpdates,e,n)},a.prototype._removeFromNodesRepetitionMap=function(e,n){this._removeFromNodesMap(this._repetitionNodesMapUpdates,e,n)},a.prototype._removeFromNodesConditionalBranchMap=function(e,n){this._removeFromNodesMap(this._conditionalBranchNodesMapUpdates,e,n)},a.prototype._removeFromNodesFormulaMap=function(e,n){this._removeFromNodesMap(this._formulaNodesMapUpdates,e,n)},a.prototype._removeFromNodesValidationMap=function(e,n){this._removeFromNodesMap(this._validationNodesMapUpdates,e,n)},a.prototype._removeFromNodesWarningMap=function(e,n){this._removeFromNodesMap(this._warningNodesMapUpdates,e,n)},a.prototype._removeFromNodesFilteredChoicesMap=function(e,n){this._removeFromNodesMap(this._filteredChoicesNodesMapUpdates,e,n)},a.prototype._removeFromNodesTriggerConditionsMap=function(e,n){this._removeFromNodesMap(this._filteredChoicesNodesMapUpdates,e,n)},a.prototype._removeFromNodesNextSlideConditionsMap=function(e,n){this._removeFromNodesMap(this._nextSlideConditionsNodesMapUpdates,e,n)},a.prototype._removeFromNodesMap=function(e,n,t){var o=he(t).filter((function(e){return"Identifier"==e.type&&"$value"!=e.value}));o.length>0&&e.next((function(e){return o.forEach((function(t){var o=t.value;if(null!=e[o]){var r=e[o].indexOf(n);r>-1&&(e[o].splice(r,1),0==e[o].length&&delete e[o])}})),e}))},a.prototype._addToNodesVisibilityMap=function(e,n){this._addToNodesMap(this._visibilityNodesMapUpdates,e,n)},a.prototype._addToNodesRepetitionMap=function(e,n){this._addToNodesMap(this._repetitionNodesMapUpdates,e,n)},a.prototype._addToNodesConditionalBranchMap=function(e,n){this._addToNodesMap(this._conditionalBranchNodesMapUpdates,e,n)},a.prototype._addToNodesFormulaMap=function(e,n){this._addToNodesMap(this._formulaNodesMapUpdates,e,n)},a.prototype._addToNodesValidationMap=function(e,n){this._addToNodesMap(this._validationNodesMapUpdates,e,n)},a.prototype._addToNodesWarningMap=function(e,n){this._addToNodesMap(this._warningNodesMapUpdates,e,n)},a.prototype._addToNodesFilteredChoicesMap=function(e,n){this._addToNodesMap(this._filteredChoicesNodesMapUpdates,e,n)},a.prototype._addToNodesTriggerConditionsMap=function(e,n){this._addToNodesMap(this._triggerConditionsNodesMapUpdates,e,n)},a.prototype._addToNodesNextSlideConditionsMap=function(e,n){this._addToNodesMap(this._nextSlideConditionsNodesMapUpdates,e,n)},a.prototype._addToNodesMap=function(e,n,t){var o=he(t).filter((function(e){return"Identifier"==e.type&&"$value"!=e.value}));o.length>0&&e.next((function(e){return o.forEach((function(t){var o=t.value;null==e[o]&&(e[o]=[]),-1===e[o].indexOf(n)&&e[o].push(n)})),e}))},g([n.Injectable(),b("design:paramtypes",[fe])],a)}(),ve=function(){function e(e,n,i){var a=this;this._changeDetectorRef=e,this._service=n,this._warningAlertService=i,this._warningTriggerSub=o.Subscription.EMPTY,this._instanceUpdateSub=o.Subscription.EMPTY,this._control=o.defer((function(){return a._service.getControl(a.instance).pipe(r.map((function(e){return e||new t.FormControl})))}))}return Object.defineProperty(e.prototype,"instance",{get:function(){return this._instance},set:function(e){e!==this._instance&&(this._instance=e,this._setUpInstanceUpdate(),this._onInstanceChange())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this._control},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this._warningTriggerSub=this.instance.warningTrigger.pipe(r.withLatestFrom(this.control),r.filter((function(e){return null!=e[1]}))).subscribe((function(n){if(null!=e.instance.warningResults)var t=n[1],o=e._warningAlertService.showWarningAlertPrompt(e.instance.warningResults.filter((function(e){return e.result})).map((function(e){return e.warning}))).subscribe((function(e){e.result&&t.setValue(null)}),(function(e){o&&o.unsubscribe()}),(function(){o&&o.unsubscribe()}))}))},e.prototype.ngOnDestroy=function(){this._warningTriggerSub.unsubscribe(),this._instanceUpdateSub.unsubscribe()},e.prototype._onInstanceChange=function(){},e.prototype._setUpInstanceUpdate=function(){var e=this;this._instanceUpdateSub.unsubscribe(),this._instanceUpdateSub=null!=this._instance?this._instance.updatedEvt.subscribe((function(){if(e._changeDetectorRef)try{e._changeDetectorRef.detectChanges()}catch(e){}})):o.Subscription.EMPTY,this._changeDetectorRef.detectChanges()},g([n.Directive(),b("design:paramtypes",[n.ChangeDetectorRef,me,Object])],e)}(),ye=function(){function e(){}return e.prototype.transform=function(e){return e?1:0},g([n.Pipe({name:"ajfBoolToInt"})],e)}(),ge=function(){function e(){}return e.prototype.transform=function(e){return null==e?null:"today"===e?new Date:e},g([n.Pipe({name:"ajfDateValue"})],e)}(),_e=function(){function e(){}return e.prototype.transform=function(e){if(null!=e){var n="today"===e?new Date:e;return u.format(n,"yyyy-MM-dd")}},g([n.Injectable(),n.Pipe({name:"ajfDateValueString"})],e)}(),be=function(e){function n(n){return e.call(this,n)||this}return m(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"AjfInvalidFieldDefinitionError"},enumerable:!1,configurable:!0}),n}(s.AjfError),Ne=function(){function e(){}return e.prototype.transform=function(e,n){return!e.node.forceNarrow&&(e.node.forceExpanded||e.filteredChoices&&e.filteredChoices.length<=n)},g([n.Pipe({name:"ajfExpandFieldWithChoices"})],e)}(),je=g([n.Directive({selector:"[ajf-field-host]"}),b("design:paramtypes",[n.ViewContainerRef])],(function je(e){this.viewContainerRef=e})),xe=function(){function e(e,n){this._cdr=e,this._cfr=n,this._init=!1,this._updatedSub=o.Subscription.EMPTY}return Object.defineProperty(e.prototype,"instance",{get:function(){return this._instance},set:function(e){this._instance!==e&&(this._instance=e,this._init&&this._loadComponent())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=l.coerceBooleanProperty(e),this._init&&this._loadComponent()},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this._updatedSub.unsubscribe()},e.prototype.ngOnInit=function(){this._init=!0,this._loadComponent()},e.prototype._loadComponent=function(){var e=this;if(this._updatedSub.unsubscribe(),this._updatedSub=o.Subscription.EMPTY,null!=this._instance&&null!=this.fieldHost){var n=this.fieldHost.viewContainerRef;n.clear();var t=this.componentsMap[this._instance.node.fieldType];if(null!=t){var r=this._readonly&&t.readOnlyComponent?t.readOnlyComponent:t.component;try{var i=this._cfr.resolveComponentFactory(r),a=n.createComponent(i);this._componentInstance=a.instance,this._componentInstance.instance=this._instance,t.inputs&&Object.keys(t.inputs).forEach((function(n){n in e._componentInstance&&(e._componentInstance[n]=t.inputs[n])})),this._updatedSub=this._instance.updatedEvt.subscribe((function(){return e._cdr.markForCheck()}))}catch(e){console.log(e)}}}},g([n.ViewChild(je,{static:!0}),b("design:type",je)],e.prototype,"fieldHost",void 0),g([n.Input(),b("design:type",Object),b("design:paramtypes",[Object])],e.prototype,"instance",null),g([n.Input(),b("design:type",Boolean),b("design:paramtypes",[Boolean])],e.prototype,"readonly",null),g([n.Directive(),b("design:paramtypes",[n.ChangeDetectorRef,n.ComponentFactoryResolver])],e)}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function Te(n){return"ajf-icon-field-"+("string"==typeof e.AjfFieldType[n]?e.AjfFieldType[n].toLowerCase():n)}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */var Ce=function(){function e(){}return e.prototype.transform=function(e){return Te(e.fieldType?e.fieldType:e)},g([n.Pipe({name:"ajfFieldIcon"})],e)}(),Se=function(){function e(){}return e.prototype.transform=function(e){return null!=e&&0===e.filter((function(e){return!e.result})).length},g([n.Pipe({name:"ajfFieldIsValid"})],e)}(),Me=function(){function e(){this.componentsMap=L}return e.prototype.registerCustomField=function(e){var n=e.fieldType,t=e.component;if(n<100)throw new Error("Invalid custom field type, it must be greater than 100");if(null==t)throw new Error("Invalid custom field component");this.componentsMap[n]=e},e}(),Fe=function(e){function n(n,t,o,r){var i=e.call(this,n,t,o)||this;return i._searchThreshold=6,null!=r&&(i._searchThreshold=r),i}return m(n,e),Object.defineProperty(n.prototype,"searchThreshold",{get:function(){return this._searchThreshold},enumerable:!1,configurable:!0}),n}(ve),we=function we(){},Ae=function(){function t(t,i){this._rendererService=t,this._changeDetectorRef=i,this.ajfFieldTypes=e.AjfFieldType,this._orientationChange=new n.EventEmitter,this.orientationChange=this._orientationChange.asObservable(),this._saveDisabled=!1,this._hasStartMessage=!1,this._hasEndMessage=!1,this._hideTopToolbar=!1,this._hideBottomToolbar=!1,this._hideNavigationButtons=!1,this._fixedOrientation=!1,this._readonly=!1,this._orientation="horizontal",this._errorMoveEvent=new n.EventEmitter,this._init=!1,this._nextSlideSubscription=o.Subscription.EMPTY,this._errorMoveSubscription=o.Subscription.EMPTY,this._formAction=new n.EventEmitter,this.formAction=this._formAction.asObservable(),this.formGroup=t.formGroup,this.slides=t.nodesTree,this._errorPositions=t.errorPositions,this.errors=t.errors,this.slidesNum=t.slidesNum,this.formIsInit=t.formInitEvent.pipe(r.map((function(e){return 1===e})))}return Object.defineProperty(t.prototype,"saveDisabled",{get:function(){return this._saveDisabled},set:function(e){this._saveDisabled=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasStartMessage",{get:function(){return this._hasStartMessage},set:function(e){this._hasStartMessage=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasEndMessage",{get:function(){return this._hasEndMessage},set:function(e){this._hasEndMessage=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideTopToolbar",{get:function(){return this._hideTopToolbar},set:function(e){this._hideTopToolbar=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideBottompToolbar",{get:function(){return this._hideBottomToolbar},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideBottomToolbar",{set:function(e){this._hideBottomToolbar=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideNavigationButtons",{get:function(){return this._hideNavigationButtons},set:function(e){this._hideNavigationButtons=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fixedOrientation",{get:function(){return this._fixedOrientation},set:function(e){this._fixedOrientation=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=l.coerceBooleanProperty(e),this._changeDetectorRef.markForCheck()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation},set:function(e){"horizontal"!==e&&"vertical"!==e||e!==this._orientation&&(this._orientation=e,this._changeDetectorRef.markForCheck(),this._orientationChange.emit(this._orientation))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"form",{set:function(e){this._form=e,this._init&&this._rendererService.setForm(this._form)},enumerable:!1,configurable:!0}),t.prototype.goToNextError=function(){this._errorMoveEvent.emit(!0)},t.prototype.goToPrevError=function(){this._errorMoveEvent.emit(!1)},t.prototype.addGroup=function(e){var n=this,t=this._rendererService.addGroup(e).pipe(r.delayWhen((function(){return n.formSlider.pageScrollFinish}))).subscribe((function(e){e&&null!=n.formSlider&&n.formSlider.slide({dir:"down"})}),(function(e){t&&t.unsubscribe()}),(function(){t&&t.unsubscribe()}))},t.prototype.removeGroup=function(e){var n=this,t=this._rendererService.removeGroup(e).pipe(r.delayWhen((function(){return n.formSlider.pageScrollFinish}))).subscribe((function(e){e&&null!=n.formSlider&&n.formSlider.slide({dir:"up"})}),(function(e){t&&t.unsubscribe()}),(function(){t&&t.unsubscribe()}))},t.prototype.onSave=function(e){this._formAction.emit({source:this,action:"save",value:this._rendererService.getFormValue()})},t.prototype.onFormAction=function(e,n){this._formAction.emit({source:this,value:this._rendererService.getFormValue(),action:n})},t.prototype.ngAfterViewInit=function(){null!=this._form&&(this._rendererService.setForm(this._form),this._changeDetectorRef.detectChanges())},t.prototype.ngAfterViewChecked=function(){var e=this;this._init||null==this.formSlider||(this._init=!0,this._errorMoveSubscription=this._errorMoveEvent.pipe(r.withLatestFrom(this._errorPositions)).subscribe((function(n){var t=n[0],o=e.formSlider.currentPage-+e.hasStartMessage+1,r=n[1];if(null!=r){for(var i=!1,a=-1,s=-1,u=0,l=r.length;!i&&u<l;)r[u]==o?(i=!0,a=u>0?u-1:l-1,s=u<l-1?u+1:0):r[u]>o&&(i=!0,a=u>0?u-1:l-1,s=u),u++;i||(a=l-1,s=0),e.formSlider.slide({to:t?r[s]-1:r[a]-1}),e._changeDetectorRef.detectChanges()}})))},t.prototype.ngOnDestroy=function(){this._nextSlideSubscription.unsubscribe(),this._errorMoveSubscription.unsubscribe(),this._orientationChange.complete(),this._errorMoveEvent.complete(),this._formAction.complete()},t.prototype.orientationChangeHandler=function(e){this.orientation=e},t.prototype.trackNodeById=function(e,n){return V(n)},g([n.Input(),b("design:type",String)],t.prototype,"title",void 0),g([n.Output(),b("design:type",o.Observable)],t.prototype,"orientationChange",void 0),g([n.Input(),b("design:type",Boolean),b("design:paramtypes",[Boolean])],t.prototype,"saveDisabled",null),g([n.Input(),b("design:type",Boolean),b("design:paramtypes",[Boolean])],t.prototype,"hasStartMessage",null),g([n.Input(),b("design:type",Boolean),b("design:paramtypes",[Boolean])],t.prototype,"hasEndMessage",null),g([n.Input(),b("design:type",Boolean),b("design:paramtypes",[Boolean])],t.prototype,"hideTopToolbar",null),g([n.Input(),b("design:type",Boolean),b("design:paramtypes",[Boolean])],t.prototype,"hideBottomToolbar",null),g([n.Input(),b("design:type",Boolean),b("design:paramtypes",[Boolean])],t.prototype,"hideNavigationButtons",null),g([n.Input(),b("design:type",Boolean),b("design:paramtypes",[Boolean])],t.prototype,"fixedOrientation",null),g([n.Input(),b("design:type",Boolean),b("design:paramtypes",[Boolean])],t.prototype,"readonly",null),g([n.Input(),b("design:type",String),b("design:paramtypes",[String])],t.prototype,"orientation",null),g([n.ViewChild("formSlider",{static:!1}),b("design:type",c.AjfPageSlider)],t.prototype,"formSlider",void 0),g([n.ViewChildren(xe),b("design:type",n.QueryList)],t.prototype,"fields",void 0),g([n.Output(),b("design:type",o.Observable)],t.prototype,"formAction",void 0),g([n.Input(),b("design:type",Object),b("design:paramtypes",[Object])],t.prototype,"form",null),g([n.Directive(),b("design:paramtypes",[me,n.ChangeDetectorRef])],t)}(),Ee=function(){function e(){}return e.prototype.transform=function(e){return null==e||"string"==typeof e?null:e},g([n.Pipe({name:"ajfGetTableCellControl"})],e)}(),Ie=function(){function e(){}return e.prototype.transform=function(e,n){return void 0===n&&(n=1),e+n},g([n.Pipe({name:"ajfIncrement"})],e)}(),Re=function(){function e(){}return e.prototype.transform=function(e){return null!=e&&"string"!=typeof e&&!0===e.editable},g([n.Pipe({name:"ajfIsCellEditable"})],e)}(),Oe=function(){function e(){}return e.prototype.transform=function(e){return le(e)},g([n.Pipe({name:"ajfIsRepeatingSlideInstance"})],e)}(),Ve=function(){function e(){}return e.prototype.transform=function(e){return e?V(e):""},g([n.Pipe({name:"ajfNodeCompleteName"})],e)}(),Pe=function(){function e(){}return e.prototype.transform=function(e,n,t){void 0===e&&(e=0),void 0===n&&(n=1),void 0===t&&(t=1);for(var o=[],r=0;r<e;++r)o.push(n),n+=t;return o},g([n.Pipe({name:"ajfRange"})],e)}(),Be=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.type="text",n}return m(n,e),n}(ve),De=new n.InjectionToken("ajf-warning-alert-service"),Ue=function(e){function t(n,t,o){return e.call(this,n,t,o)||this}return m(t,e),g([n.Component({selector:"ajf-read-only-field",template:'<span *ngIf="control|async as ctrl">{{ctrl.value}}</span>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,styles:["ajf-read-only-field span{min-height:1em;display:block}\n"]}),_(2,n.Inject(De)),b("design:paramtypes",[n.ChangeDetectorRef,me,Object])],t)}(Be),ke=function(e){function t(n,t,o){return e.call(this,n,t,o)||this}return m(t,e),g([n.Component({template:'<table class="ajf-table-field">\n  <ng-container *ngIf="instance.node as node">\n    <ng-container *ngFor="let columns of instance.controls; let row = index">\n      <tr [ngClass]="row | ajfTableRowClass">\n        <td>\n          <ng-container *ngIf="columns && columns.length > 0 && columns[0] != null">\n            {{ columns[0] | ajfTranslateIfString | ajfFormatIfNumber: \'.0-2\' }}\n          </ng-container>\n        </td>\n        <ng-container *ngIf="columns && columns.length > 1 && columns[1] != null">\n          <td *ngFor="let c of columns[1]; let column = index">\n            <ng-container *ngIf="c|ajfGetTableCellControl as contr">\n              <ng-container *ngIf="contr != null">\n                <span *ngIf="row > 0; else labelCell"\n                  class="ajf-table-cell">{{ contr.control!.value | ajfTranslateIfString | ajfFormatIfNumber: \'.0-2\' }}</span>\n                <ng-template #labelCell>{{ contr | ajfTranslateIfString | ajfFormatIfNumber: \'.0-2\' }}</ng-template>\n              </ng-container>\n            </ng-container>\n          </td>\n        </ng-container>\n      </tr>\n    </ng-container>\n  </ng-container>\n</table>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,styles:["\n"]}),_(2,n.Inject(De)),b("design:paramtypes",[n.ChangeDetectorRef,me,Object])],t)}(ve),Ge=function(){function e(){}return e.prototype.transform=function(e){return e%2==0?"ajf-row-even":"ajf-row-odd"},g([n.Pipe({name:"ajfTableRowClass"})],e)}(),Je=function(){function e(){}return e.prototype.transform=function(e){if(!e.node.editable){var n=e.value||[];return e.hideEmptyRows?n.filter((function(e){return e[1].reduce((function(e,n){return e||null!=n&&""!==n&&0!==n&&"0"!==n}),!1)})).map((function(e){return j([e[0]],e[1])})):n.map((function(e){return j([e[0]],e[1])}))}return(e.controls||[]).map((function(e){return j([e[0]],e[1])}))},g([n.Pipe({name:"ajfTableVisibleColumns"})],e)}(),We=function(){function e(){}return e.prototype.transform=function(e,n){return null!=n&&"number"==typeof n&&(n>=e.slideNodes.length||e.slideNodes[n].map((function(e){return!(e.visible&&Object.keys(e).indexOf("valid")>-1)||e.valid})).reduce((function(e,n){return e&&n}),!0))},g([n.Pipe({name:"ajfValidSlide",pure:!1})],e)}(),Le=g([n.NgModule({declarations:[C,S,ye,ge,_e,Ne,je,Ce,Se,Ee,Ie,Re,Oe,Ve,Pe,Ue,ke,Ge,Je,We],imports:[d.AjfCommonModule,p.CommonModule],exports:[C,S,ye,ge,_e,Ne,je,Ce,Se,Ee,Ie,Re,Oe,Ve,Pe,Ue,ke,Ge,Je,We],providers:[_e,me,fe]})],(function Le(){})),$e=new n.InjectionToken("AJF_SEARCH_ALERT_THRESHOLD"),ze=function(){function e(){}return e.fromJson=function(e){if(null==e.name)throw new Error("Malformed attachments origin");return
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function n(e){return v(v({},e),{attachments:e.attachments||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */(e)},e}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function He(e){return v(v({},e),{type:e.type,label:e.label||"",choices:e.choices||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */var qe=function(){function e(){}return e.fromJson=function(e){return He(v(v({},e),{type:e.type||"fixed",name:e.name||""}))},e}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function Ye(e){var n=J(e);return v(v({},n),{nodes:e.nodes||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function Ze(e){var n=J(e);return v(v(v({},e),n),{minReps:null!=e.minReps?e.minReps:1,maxReps:null!=e.maxReps?e.maxReps:0})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function Qe(n){return v(v(v({},Ye(n)),Ze(n)),{nodeType:e.AjfNodeType.AjfNodeGroup})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function Ke(n){return v(v(v({},Ye(n)),Ze(n)),{nodeType:e.AjfNodeType.AjfRepeatingSlide})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */function Xe(n){return v(v({},Ye(n)),{nodeType:e.AjfNodeType.AjfSlide})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */var en=function(){function e(){}return e.fromJson=function(e){return ne(e)},e}(),nn=function(){function e(){}return e.fromJson=function(e){return te(e)},e}(),tn=function(){function n(){}return n.fromJson=function(t,o,r){var i="Malformed node";if(t.name=t.name||"",null==t.id||null==t.parent||null==t.nodeType)throw new Error(i);var a=t;switch(a.visibility&&(a.visibility=s.AjfConditionSerializer.fromJson(a.visibility)),a.conditionalBranches=(a.conditionalBranches||[]).map((function(e){return s.AjfConditionSerializer.fromJson(e)})),a.nodeType){case e.AjfNodeType.AjfField:return n._fieldFromJson(a,o,r);case e.AjfNodeType.AjfFieldNodeLink:return n._fieldNodeLinkFromJson(a);case e.AjfNodeType.AjfNodeGroup:return n._nodeGroupFromJson(a,o,r);case e.AjfNodeType.AjfRepeatingSlide:return n._repeatingSlideFromJson(a,o,r);case e.AjfNodeType.AjfSlide:return n._slideFromJson(a,o,r)}throw new Error(i)},n._containerNodeFromJson=function(e,t,o){return e.nodes=(e.nodes||[]).map((function(e){return n.fromJson(e,t,o)})),Ye(e)},n._fieldFromJson=function(t,o,r){if(null==t.fieldType)throw new Error("Malformed field");var i=t;if(i.validation&&(i.validation=en.fromJson(i.validation)),i.warning&&(i.warning=nn.fromJson(i.warning)),t.attachmentsOriginRef&&(i.attachmentOrigin=(r||[]).find((function(e){return e.name===t.attachmentsOriginRef}))),i.nextSlideCondition&&(i.nextSlideCondition=s.AjfConditionSerializer.fromJson(i.nextSlideCondition)),i.fieldType>100&&null!=L[i.fieldType]&&!0===L[i.fieldType].isFieldWithChoice)return n._fieldWithChoicesFromJson(t,o);switch(i.fieldType){case e.AjfFieldType.Formula:return n._formulaFieldFromJson(t);case e.AjfFieldType.MultipleChoice:case e.AjfFieldType.SingleChoice:return n._fieldWithChoicesFromJson(t,o)}return W(i)},n._fieldNodeLinkFromJson=function(n){return v(v({},J(n)),{nodeType:e.AjfNodeType.AjfFieldNodeLink})},n._fieldWithChoicesFromJson=function(e,n){var t="Malformed field with choices";if(null==e.choicesOriginRef)throw new Error(t);var o=(n||[]).find((function(n){return n.name===e.choicesOriginRef}));if(null==o)throw new Error(t);return e.choicesFilter&&(e.choicesFilter=s.AjfFormulaSerializer.fromJson(e.choicesFilter)),e.triggerConditions&&(e.triggerConditions=e.triggerConditions.map((function(e){return s.AjfConditionSerializer.fromJson(e)}))),function r(e){var n=W(v({},e));return v(v(v({},n),e),{choices:e.choices||[],forceExpanded:e.forceExpanded||!1,forceNarrow:e.forceNarrow||!1})}(v(v({},e),{choicesOrigin:o}))},n._formulaFieldFromJson=function(n){return n.formula&&(n.formula=s.AjfFormulaSerializer.fromJson(n.formula)),v(v({},W(n)),{fieldType:e.AjfFieldType.Formula})},n._nodeGroupFromJson=function(e,t,o){return Qe(v(v({},n._containerNodeFromJson(e,t,o)),n._repeatingNodeFromJson(e)))},n._repeatingNodeFromJson=function(e){return e.formulaReps&&(e.formulaReps=s.AjfFormulaSerializer.fromJson(e.formulaReps)),Ze(e)},n._repeatingSlideFromJson=function(e,t,o){return Ke(v(v({},n._containerNodeFromJson(e,t,o)),n._repeatingNodeFromJson(e)))},n._slideFromJson=function(e,t,o){return Xe(n._containerNodeFromJson(e,t,o))},n}(),on=function(){function e(){}return e.fromJson=function(e,n){var t=(e.choicesOrigins||[]).map((function(e){return qe.fromJson(e)})),o=(e.attachmentsOrigins||[]).map((function(e){return ze.fromJson(e)})),r=(e.nodes||[]).map((function(e){return tn.fromJson(e,t,o)}));return v(v({},e),{choicesOrigins:t,attachmentsOrigins:o,nodes:r,stringIdentifier:e.stringIdentifier||[],initContext:i.deepCopy(n||{})})},e}(),rn=function(e){function t(n,t,o){return e.call(this,n,t,o)||this}return m(t,e),t.prototype.goToNextCell=function(e,n,t){if(!(this.instance.controls.length<n||this.instance.controls.length>=n&&this.instance.controls[n].length<1||this.instance.controls[n][1].length<t)){var o=this.instance.controls[n][1][t];t+1>=this.instance.controls[n][1].length?(t=0,n+1>=this.instance.controls.length?n=1:n+=1):t+=1,"string"!=typeof o&&(o.show=!1),this._showCell(n,t),e.preventDefault(),e.stopPropagation()}},t.prototype.goToCell=function(e,n){this._resetControls(),this._showCell(e,n)},t.prototype._resetControls=function(){this.instance.controls.forEach((function(e){return e[1].forEach((function(e){"string"!=typeof e&&(e.show=!1)}))}))},t.prototype._showCell=function(e,n){if(!(e>=this.instance.controls.length||n>=this.instance.controls[e][1].length)){var t=this.instance.controls[e][1][n];"string"!=typeof t&&(t.show=!0)}},g([_(2,n.Inject(De)),b("design:paramtypes",[n.ChangeDetectorRef,me,Object])],t)}(ve);
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function an(e){return null!=e&&"object"==typeof e&&null!=e.name&&"string"==typeof e.name&&null!=e.label&&"string"==typeof e.label&&["fixed","promise","observable","observableArray","function"].indexOf(e.type)>-1&&e.choices instanceof Array}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
e.AJF_SEARCH_ALERT_THRESHOLD=$e,e.AJF_WARNING_ALERT_SERVICE=De,e.AjfAsFieldInstancePipe=C,e.AjfAsRepeatingSlideInstancePipe=S,e.AjfAttachmentsOriginSerializer=ze,e.AjfBaseFieldComponent=ve,e.AjfBoolToIntPipe=ye,e.AjfChoicesOriginSerializer=qe,e.AjfDateValuePipe=ge,e.AjfDateValueStringPipe=_e,e.AjfExpandFieldWithChoicesPipe=Ne,e.AjfFieldHost=je,e.AjfFieldIconPipe=Ce,e.AjfFieldIsValidPipe=Se,e.AjfFieldService=Me,e.AjfFieldWithChoicesComponent=Fe,e.AjfFormActionEvent=we,e.AjfFormField=xe,e.AjfFormRenderer=Ae,e.AjfFormRendererService=me,e.AjfFormSerializer=on,e.AjfFormsModule=Le,e.AjfGetTableCellControlPipe=Ee,e.AjfIncrementPipe=Ie,e.AjfInputFieldComponent=Be,e.AjfInvalidFieldDefinitionError=be,e.AjfIsCellEditablePipe=Re,e.AjfIsRepeatingSlideInstancePipe=Oe,e.AjfNodeCompleteNamePipe=Ve,e.AjfNodeSerializer=tn,e.AjfRangePipe=Pe,e.AjfReadOnlyFieldComponent=Ue,e.AjfReadOnlyTableFieldComponent=ke,e.AjfTableFieldComponent=rn,e.AjfTableRowClass=Ge,e.AjfTableVisibleColumnsPipe=Je,e.AjfValidSlidePipe=We,e.AjfValidationGroupSerializer=en,e.AjfValidationService=fe,e.AjfWarningGroupSerializer=nn,e.createChoicesFixedOrigin=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function sn(e){return v(v({},He(v(v({},e),{type:"fixed"}))),{type:"fixed"})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.createChoicesFunctionOrigin=function un(e){return v(v({},e),{type:"function",label:e.label||"",choices:e.choices||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.createChoicesObservableArrayOrigin=function ln(e){return v(v({},e),{type:"observableArray",label:e.label||"",choices:e.choices||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.createChoicesObservableOrigin=function cn(e){return v(v({},e),{type:"observable",label:e.label||"",choices:e.choices||[]})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.createChoicesOrigin=He,e.createChoicesPromiseOrigin=function dn(e){return v(v({},e),{type:"promise",label:e.label||"",choices:e.choices||[]})},e.createContainerNode=Ye,e.createField=W,e.createFieldInstance=K,e.createFieldWithChoicesInstance=X,e.createForm=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function pn(e){return void 0===e&&(e={}),{nodes:e.nodes||[],choicesOrigins:e.choicesOrigins||[],attachmentsOrigins:e.attachmentsOrigins||[],initContext:e.initContext||{},stringIdentifier:e.stringIdentifier||[],supplementaryInformations:e.supplementaryInformations}}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.createNode=J,e.createNodeInstance=Q,e.createValidation=se,e.createValidationGroup=ne,e.createWarning=ue,e.createWarningGroup=te,e.fieldIconName=Te,e.flattenNodes=ce,e.getTypeName=
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
function fn(e){var n=typeof e;return"object"===n?e.constructor.toString().match(/\w+/g)[1]:n}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.initChoicesOrigin=M,e.isChoicesFixedOrigin=function hn(e){return an(e)&&"fixed"===e.type}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.isChoicesOrigin=an,e.isContainerNode=H,e.isCustomFieldWithChoices=$,e.isField=w,e.isFieldWithChoices=F,e.isNumberField=function mn(n){return n.fieldType===e.AjfFieldType.Number},e.isRepeatingContainerNode=oe,e.isSlidesNode=z,e.maxDigitsValidation=function vn(e){return se({condition:"$value ? $value.toString().length <= "+e.toString()+" : false",errorMessage:"Digits count must be <= "+e.toString()})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.maxValidation=function yn(e){return se({condition:"$value <= "+e.toString(),errorMessage:"Value must be <= "+e.toString()})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.minDigitsValidation=function gn(e){return se({condition:"$value ? $value.toString().length >= "+e.toString()+" : false",errorMessage:"Digits count must be >= "+e.toString()})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.minValidation=function _n(e){return se({condition:"$value >= "+e.toString(),errorMessage:"Value must be >= "+e.toString()})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.notEmptyValidation=function bn(){return se({condition:"notEmpty($value)",errorMessage:"Value must not be empty"})}
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */,e.notEmptyWarning=function Nn(){return ue({condition:"notEmpty($value)",warningMessage:"Value must not be empty"})},e.ɵgc_ajf_src_core_forms_forms_a=Qe,e.ɵgc_ajf_src_core_forms_forms_b=Ke,e.ɵgc_ajf_src_core_forms_forms_c=Xe,e.ɵgc_ajf_src_core_forms_forms_d=L,Object.defineProperty(e,"__esModule",{value:!0})}));