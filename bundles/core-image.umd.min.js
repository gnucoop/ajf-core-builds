!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/platform-browser"),require("rxjs")):"function"==typeof define&&define.amd?define("@ajf/core/image",["exports","@angular/core","@angular/platform-browser","rxjs"],t):t(((e=e||self).ajf=e.ajf||{},e.ajf.core=e.ajf.core||{},e.ajf.core.image={}),e.ng.core,e.ng.platformBrowser,e.rxjs)}(this,(function(e,t,n,i){"use strict";
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */var r;function o(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}(r=e.AjfImageType||(e.AjfImageType={}))[r.Image=0]="Image",r[r.Flag=1]="Flag",r[r.Icon=2]="Icon",r[r.LENGTH=3]="LENGTH";
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */
var s=function(){function r(t,n,r){var o=this;this._el=t,this._renderer=n,this._domSanitizer=r,this.imageTypes=e.AjfImageType,this._imageType=new i.BehaviorSubject(null),this.imageType=this._imageType.asObservable(),this._url=new i.BehaviorSubject(null),this.url=this._url.asObservable(),this._iconObj=new i.BehaviorSubject(null),this.iconObj=this._iconObj.asObservable(),this._flagName=new i.BehaviorSubject(null),this.flagName=this._flagName.asObservable(),this._iconSub=i.Subscription.EMPTY,this._iconSub=this.iconObj.subscribe((function(){return o._updateIconSize()}))}return Object.defineProperty(r.prototype,"type",{set:function(e){this._imageType.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"imageUrl",{set:function(e){this._url.next((e="string"==typeof e?e:"").startsWith("data:image/svg+xml;base64,")?this._domSanitizer.bypassSecurityTrustResourceUrl(e):e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"icon",{set:function(e){this._iconObj.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"flag",{set:function(e){this._flagName.next(e)},enumerable:!1,configurable:!0}),r.prototype.ngOnDestroy=function(){this._iconSub&&!this._iconSub.closed&&this._iconSub.unsubscribe()},r.prototype.ngOnInit=function(){this._updateIconSize()},r.prototype._updateIconSize=function(){if(null!=this._iconObj.getValue()){var e=this._el.nativeElement.style;if(null!=this.iconComponent&&null!=e&&null!=e.fontSize){var n=e.fontSize;if(null!=n.match(/^[0-9]+px$/)){var i=this.iconComponent.nativeElement;this._renderer.setStyle(i,"width",n,t.RendererStyleFlags2.Important),this._renderer.setStyle(i,"height",n,t.RendererStyleFlags2.Important)}}}},o([t.Input(),a("design:type",Object),a("design:paramtypes",[Object])],r.prototype,"type",null),o([t.Input(),a("design:type",Object),a("design:paramtypes",[Object])],r.prototype,"imageUrl",null),o([t.Input(),a("design:type",Object),a("design:paramtypes",[Object])],r.prototype,"icon",null),o([t.Input(),a("design:type",Object),a("design:paramtypes",[Object])],r.prototype,"flag",null),o([t.Directive(),a("design:paramtypes",[t.ElementRef,t.Renderer2,n.DomSanitizer])],r)}();
/**
     * @license
     * Copyright (C) Gnucoop soc. coop.
     *
     * This file is part of the Advanced JSON forms (ajf).
     *
     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or
     * modify it under the terms of the GNU Affero General Public License as
     * published by the Free Software Foundation, either version 3 of the License,
     * or (at your option) any later version.
     *
     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
     * General Public License for more details.
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with Advanced JSON forms (ajf).
     * If not, see http://www.gnu.org/licenses/.
     *
     */e.AjfImage=s,Object.defineProperty(e,"__esModule",{value:!0})}));