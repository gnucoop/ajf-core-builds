{"version":3,"file":"core-models.umd.js","sources":["../../../../../external/npm/node_modules/tslib/tslib.es6.js","../../../../../src/core/models/error.ts","../../../../../src/core/models/utils/create-condition.ts","../../../../../src/core/models/serializers/condition-serializer.ts","../../../../../src/core/models/utils/create-formula.ts","../../../../../src/core/models/serializers/formula-serializer.ts","../../../../../src/core/models/utils/always-condition.ts","../../../../../src/core/models/utils/expression-utils.ts","../../../../../src/core/models/utils/get-context-string.ts","../../../../../src/core/models/utils/never-condition.ts","../../../../../src/core/models/utils/normalize-expression.ts","../../../../../src/core/models/utils/validate-expression.ts","../../../../../src/core/models/public-api.ts","../../../../../src/core/models/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport class AjfError extends Error {\n  stack: string;\n  get name(): string {\n    return 'AjfError';\n  }\n  get message(): string {\n    return this._message;\n  }\n  // this private string is the error message\n  private _message: string;\n  /**\n   * this constructor will init the message error\n   */\n  constructor(message?: string) {\n    super(message);\n\n    // Set the prototype explicitly. Workaround needed in TS >= 2.1 when extending built-ins\n    // See: https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md\n    Object.setPrototypeOf(this, AjfError.prototype);\n\n    this._message = message || '';\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfCondition} from '../interface/condition';\n\n/**\n * It Creates an AjfCondition by conditio.\n * If condition.condition is not defined will be assigned ''.\n */\nexport function createCondition(condition: Partial<AjfCondition> = {}): AjfCondition {\n  return {condition: condition.condition || ''};\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfCondition} from '../interface/condition';\nimport {createCondition} from '../utils/create-condition';\n\nexport class AjfConditionSerializer {\n  static fromJson(json: Partial<AjfCondition>): AjfCondition {\n    return createCondition(json);\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfFormula} from '../interface/formula';\n\n/**\n * It Creates an AjfFormula.\n * If formula.formula is not defined will be assigned ''.\n */\nexport function createFormula(formula: Partial<AjfFormula> = {}): AjfFormula {\n  return {formula: formula.formula || ''};\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfFormula} from '../interface/formula';\nimport {createFormula} from '../utils/create-formula';\n\nexport class AjfFormulaSerializer {\n  static fromJson(json: Partial<AjfFormula>): AjfFormula {\n    return createFormula(json);\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfCondition} from '../interface/condition';\nimport {createCondition} from './create-condition';\n/**\n * It creates a true AjfCondidion.\n */\nexport function alwaysCondition(): AjfCondition {\n  return createCondition({condition: 'true'});\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfContext} from '@ajf/core/common';\nimport * as dateFns from 'date-fns';\nimport {tokenize} from 'esprima';\nimport * as numbroMod from 'numbro';\n\nimport {AjfValidationFn} from '../interface/validation-function';\n\nlet execContext: any = {};\n\nconst numbro = numbroMod.default || numbroMod;\nexport interface Form {\n  [key: string]: string|number|null;\n}\n\nconst MAX_REPS = 30;\n\nexport const dateUtils = {\n  addDays: dateFns.addDays,\n  addMonths: dateFns.addMonths,\n  addYears: dateFns.addYears,\n  endOfISOWeek: dateFns.endOfISOWeek,\n  format: dateFns.format,\n  getDay: dateFns.getDay,\n  parse: dateFns.parseISO,\n  startOfMonth: dateFns.startOfMonth,\n  startOfISOWeek: dateFns.startOfISOWeek\n};\n\nexport class AjfExpressionUtils {\n  // TODO what is it for\n  static UTIL_FUNCTIONS = '';\n  /**\n   * It is a key-value dictionary, that mapping all Ajf validation functions.\n   */\n  static utils: {[name: string]: AjfValidationFn} = {\n    digitCount: {fn: digitCount},\n    decimalCount: {fn: decimalCount},\n    isInt: {fn: isInt},\n    notEmpty: {fn: notEmpty},\n    valueInChoice: {fn: valueInChoice},\n    scanGroupField: {fn: scanGroupField},\n    sum: {fn: sum},\n    dateOperations: {fn: dateOperations},\n    round: {fn: round},\n    extractArray: {fn: extractArray},\n    extractSum: {fn: extractSum},\n    extractArraySum: {fn: extractArraySum},\n    drawThreshold: {fn: drawThreshold},\n    extractDates: {fn: extractDates},\n    lastProperty: {fn: lastProperty},\n    sumLastProperties: {fn: sumLastProperties},\n    calculateTrendProperty: {fn: calculateTrendProperty},\n    calculateTrendByProperties: {fn: calculateTrendByProperties},\n    calculateAvgProperty: {fn: calculateAvgProperty},\n    calculateAvgPropertyArray: {fn: calculateAvgPropertyArray},\n    alert: {fn: alert},\n    formatNumber: {fn: formatNumber},\n    formatDate: {fn: formatDate},\n    isoMonth: {fn: isoMonth},\n    getCoordinate: {fn: getCoordinate},\n    Math: {fn: Math},\n    parseInt: {fn: parseInt},\n    parseFloat: {fn: parseFloat},\n    parseDate: {fn: dateUtils.parse},\n    Date: {fn: Date},\n    COUNTFORMS: {fn: COUNTFORMS},\n    COUNTFORMS_UNIQUE: {fn: COUNTFORMS_UNIQUE},\n    SUM: {fn: SUM},\n    MEAN: {fn: MEAN},\n    PERCENT: {fn: PERCENT},\n    LAST: {fn: LAST},\n    MAX: {fn: MAX},\n    MEDIAN: {fn: MEDIAN},\n    MODE: {fn: MODE},\n  };\n}\n\nexport function evaluateExpression(\n    expression: string, context?: AjfContext, forceFormula?: string): any {\n  let formula = forceFormula || expression || '';\n  if (formula === '') {\n    return '';\n  }\n  if (formula === 'true') {\n    return true;\n  }\n  if (formula === 'false') {\n    return false;\n  }\n  if (context != null && context[formula] !== undefined) {\n    return context[formula];\n  }\n  if (/^\"[^\"]*\"$/.test(formula)) {\n    return formula.replace(/^\"+|\"+$/g, '');\n  }\n  const identifiers =\n      tokenize(formula).filter((t: any) => t.type === 'Identifier').map((t: any) => t.value);\n  const ctx: any[] = [];\n  identifiers.forEach((key: string) => {\n    let val: any = null;\n    if (context != null && context[key] !== undefined) {\n      val = context[key];\n    } else if (AjfExpressionUtils.utils[key] !== undefined) {\n      const util = AjfExpressionUtils.utils[key];\n      val = util.fn;\n    }\n    ctx.push(val);\n  });\n  identifiers.push('execContext');\n  ctx.push(execContext);\n\n  try {\n    let f = new Function(...identifiers, `return ${formula}`);\n    const res = f(...ctx);\n    f = <any>null;\n    return res;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * It returns the count of digit inside x.\n */\nexport function digitCount(x: number): number {\n  if (isNaN(x) || typeof (x) !== 'number') {\n    return 0;\n  }\n  if (!isFinite(x)) {\n    return Infinity;\n  }\n  return x.toString().replace(/[^0-9]/g, '').length;\n}\n/**\n * It is count the count of decimal digit inside s.\n */\nexport function decimalCount(x: string|number): number {\n  if (typeof x === 'string') {\n    x = parseFloat(x);\n  }\n  if (typeof x !== 'number' || isNaN(x)) {\n    return 0;\n  }\n  const parts = x.toString().split('.');\n  return parts.length > 1 ? parts[1].length : 0;\n}\n/**\n * It is true if x is an integer.\n */\nexport function isInt(x: string|number): boolean {\n  if (typeof (x) === 'string') {\n    return /^-?\\d+$/.test(x);\n  }\n  if (typeof (x) === 'number') {\n    return Math.round(x) === x;\n  }\n  return false;\n}\n/**\n * It is true if x is not empty.\n */\nexport function notEmpty(x: any): boolean {\n  return (typeof x !== 'undefined' && x !== null ? x.toString().length > 0 : false);\n}\n/**\n * It is true if array contains x or array is equal to x.\n */\nexport function valueInChoice(array: any[], x: any): boolean {\n  return (array || []).indexOf(x) > -1 || array === x;\n}\n/**\n * It applies callback for reps times and accumulate the result in acc.\n */\nexport function scanGroupField(reps: number, acc: any, callback: any): any {\n  for (let i = 0; i < reps; i++) {\n    acc = callback(acc, i);\n  }\n  return acc;\n}\n/**\n * It returns the sum of the array values.\n */\nexport function sum(array: any[]): any {\n  return array.reduce((a, b) => a + b, 0);\n}\n/**\n * It applies add/remove(operation) v (day/month/year)period to dstring and return new format date.\n */\n// TODO check if deprecated instead refacotoring parameter type\n// TODO (dString: string|null, period:'day'|'month'|'year',\n// TODO operation: 'add/remove' = 'add', v:number)\nexport function dateOperations(dString: string, period: string, operation: string, v: any): string {\n  const fmt = 'mm/dd/yyyy';\n  let d = (typeof dString !== 'undefined') ? dateUtils.parse(dString) : new Date();\n  if (operation == 'remove') {\n    v = -v;\n  }\n  let dateOp;\n  switch (period) {\n    case 'day':\n      dateOp = dateUtils.addDays;\n      break;\n    case 'month':\n      dateOp = dateUtils.addMonths;\n      break;\n    case 'year':\n      dateOp = dateUtils.addYears;\n      break;\n    default:\n      return '';\n  }\n  return dateUtils.format(dateOp(d, v), fmt);\n}\n/**\n * It rounds the num with the value of digits\n */\nexport function round(num: number|string, digits: number): number {\n  digits = digits || 0;\n  let f;\n  if (typeof num !== 'number') {\n    try {\n      f = parseFloat(num);\n    } catch (e) {\n    }\n  } else {\n    f = num;\n  }\n  if (f == null || isNaN(f)) {\n    f = 0;\n  }\n  const m = Math.pow(10, digits);\n  return Math.round(f * m) / m;\n}\n/**\n * It extracts property from source.\n * for every element of source if property and property2 are defined return the sum\n * else if only property is defined return him.\n */\nexport function extractArray(source: any[], property: string, property2?: string): any[] {\n  source = (source || []).slice(0);\n  const l = source.length;\n  const res: any[] = [];\n  for (let i = 0; i < l; i++) {\n    if (source[i][property] != null && property2 != null && source[i][property2] != null) {\n      res.push(Number(source[i][property]) + Number(source[i][property2]));\n    } else if (source[i][property] != null) {\n      res.push(source[i][property]);\n    }\n  }\n  return res;\n}\n/**\n * It returns the sum of all defined properties of each element of source.\n */\nexport function extractSum(source: any[], properties: string[]): number {\n  let sumVal = 0;\n  properties = (properties || []).slice(0);\n  const l = properties.length;\n\n  for (let i = 0; i < l; i++) {\n    const array = extractArray(source, properties[i]);\n    const leng = array.length;\n    for (let j = 0; j < leng; j++) {\n      if (!isNaN(Number(array[j]))) {\n        sumVal += Number(array[j]);\n      }\n    }\n  }\n  return sumVal;\n}\n/**\n * It returns a number array that contains the sum of properties value inside the source.\n * extractArraySum([{a: 5}, {b: 1}, {a: 5, b: 1}], ['a', 'b']); =&gt; [6,6]\n */\nexport function extractArraySum(source: any[], properties: string[]): any[] {\n  const arrays: any[] = [];\n  properties = (properties || []).slice(0);\n\n  for (let i = 0; i < properties.length; i++) {\n    const array = extractArray(source, properties[i]);\n    arrays.push(array);\n  }\n\n  const res: any[] = [];\n  if (arrays.length > 0) {\n    for (let weekI = 0; weekI < arrays[0].length; weekI++) {\n      let sumVal = 0;\n      for (let propI = 0; propI < properties.length; propI++) {\n        sumVal = sumVal + Number(arrays[propI][weekI]);\n      }\n      res.push(sumVal);\n    }\n  }\n  return res;\n}\n/**\n * Draw a threshold line on chart related to the property.\n */\nexport function drawThreshold(source: any[], property: string, threshold: any[]): any[] {\n  source = (source || []).slice(0);\n  threshold = threshold || [0];\n  if (!(threshold instanceof Array)) {\n    threshold = [threshold];\n  }\n  const l = source.length;\n  const res: any[] = [];\n  let count = 0;\n  for (let i = 0; i < l; i++) {\n    if (source[i][property] != null) {\n      if (threshold.length > count) {\n        res.push(threshold[count]);\n      } else {\n        res.push(threshold[0]);\n      }\n      count++;\n    }\n  }\n  return res;\n}\n/**\n * Extract the dates of the source object with property != null\n */\nexport function extractDates(source: any[], property: string, fmt: string): string[] {\n  source = (source || []).slice(0);\n  const l = source.length;\n  const res: any = [];\n  let prefix = '';\n  for (let i = 0; i < l; i++) {\n    if (source[i][property] != null) {\n      switch (fmt) {\n        case 'WW':\n        case 'ww':\n          prefix = 'W';\n          res.push(prefix + formatDate(source[i]['date_start'], fmt));\n          break;\n        case 'MM':\n        case 'mm':\n          prefix = 'M';\n          res.push(prefix + isoMonth(source[i]['date_start'], fmt));\n          break;\n        default:\n          prefix = '';\n          res.push(prefix + formatDate(source[i]['date_start'], fmt));\n      }\n    }\n  }\n  return res;\n}\n/**\n * Extract the last property contains in source != null\n */\nexport function lastProperty(source: any, property: string): any {\n  source = (source || []).slice(0);\n  let l = source.length - 1;\n\n  while (l >= 0 && source[l][property] == null) {\n    l--;\n    if (l < 0) {\n      return '';\n    }\n  }\n  return l >= 0 ? source[l][property] : '';\n}\n/**\n * It sum the LAst properties of source.\n */\nexport function sumLastProperties(source: any[], properties: string[]): number {\n  source = (source || []).slice(0);\n  let sumVal = 0;\n  let val = 0;\n  for (let i = 0; i < properties.length; i++) {\n    val = Number(lastProperty(source, properties[i]));\n    if (!isNaN(val)) {\n      sumVal += val;\n    }\n  }\n  return sumVal;\n}\n/**\n * Compute the trend of the property contained on the source.\n */\nexport function calculateTrendProperty(source: any[], property: string): string {\n  source = (source || []).slice(0);\n  let last = source.length - 1;\n  while (source[last][property] == null) {\n    if (last == 0) {\n      break;\n    }\n    last--;\n  }\n  let lastLast = last - 1;\n  if (last == 0) {\n    lastLast = last;\n  } else {\n    while (source[lastLast][property] == null) {\n      if (lastLast == 0) {\n        lastLast = last;\n        break;\n      }\n      lastLast--;\n    }\n  }\n\n  const lastProp = source[last] ? (source[last][property] || 0) : 0;\n  const lastLastProp = source[lastLast] ? (source[lastLast][property] || 0) : 0;\n\n  if (lastProp == lastLastProp) {\n    return '<p><i class=\"material-icons\" style=\"color:blue\">trending_flat</i></p>';\n  } else if (lastProp > lastLastProp) {\n    return '<p><i class=\"material-icons\" style=\"color:green\">trending_up</i></p>';\n  } else {\n    return '<p><i class=\"material-icons\" style=\"color:red\">trending_down</i></p>';\n  }\n}\n/**\n * Compute the average value of the property contained on the source.\n */\nexport function calculateTrendByProperties(source: any[], properties: string[]): string {\n  const arraysum = extractArraySum(source, properties);\n\n  const lastProp = arraysum.length > 0 ? (arraysum[arraysum.length - 1] || 0) : 0;\n  const lastLastProp = arraysum.length > 1 ? (arraysum[arraysum.length - 2] || 0) : lastProp;\n\n  if (lastProp == lastLastProp) {\n    return '<p><i class=\"material-icons\" style=\"color:blue\">trending_flat</i></p>';\n  } else if (lastProp > lastLastProp) {\n    return '<p><i class=\"material-icons\" style=\"color:green\">trending_up</i></p>';\n  } else {\n    return '<p><i class=\"material-icons\" style=\"color:red\">trending_down</i></p>';\n  }\n}\n/**\n *\n */\nexport function calculateAvgProperty(\n    source: any[], property: string, range: number, coefficient: number): number {\n  source = (source || []).slice(0);\n\n  coefficient = coefficient || 1;\n  range = range || 12;\n\n  let l = source.length;\n  let res = 0;\n  let counter = 0;\n  let noZero = 0;\n\n  if (l < range) {\n    range = l;\n  }\n\n  while (range != 0) {\n    if (source[l - 1][property] != null) {\n      counter++;\n      res += Number(source[l - 1][property]);\n\n      if (source[l - 1][property] > 0) {\n        noZero++;\n      }\n    }\n    l--;\n    range--;\n  }\n\n  if (coefficient == 0) {\n    return noZero;\n  } else {\n    return round((res / counter) * coefficient, 2) || 0;\n  }\n}\n\nexport function calculateAvgPropertyArray(\n    source: any[], properties: string[], range: number, coefficient: number): number[] {\n  source = (source || []).slice(0);\n  const resArr: any[] = [];\n\n  if (properties && properties.length > 0) {\n    let avg = 0;\n\n    coefficient = coefficient || 1;\n    range = range || 12;\n\n    const sourceArr = properties.length > 1 ? extractArraySum(source, properties) :\n                                              extractArray(source, properties[0]);\n\n    let l = sourceArr.length;\n\n    for (let len = l; len > 0; len--) {\n      let res = 0;\n      let counter = 0;\n      let noZero = 0;\n\n      if (len < range) {\n        range = len;\n      }\n\n      for (let r = 1; r <= range; r++) {\n        let val = sourceArr[len - r];\n        if (val != null) {\n          counter++;\n          res += Number(val);\n          if (val > 0) {\n            noZero++;\n          }\n        }\n      }\n\n      if (counter > 0) {\n        if (coefficient == 0) {\n          avg = noZero;\n        } else {\n          avg = (res / counter) * coefficient || 0;\n        }\n        resArr.push(round(avg, 2));\n      }\n    }\n  }\n  return resArr.reverse();\n}\n\nexport function alert(source: any[], property: string, threshold: number): string {\n  source = (source || []).slice(0);\n\n  if (lastProperty(source, property) > threshold) {\n    return '<p><i class=\"material-icons\" style=\"color:red\">warning</i></p>';\n  } else {\n    return '<p></p>';\n  }\n}\n\nexport function formatNumber(num: number, fmt?: string): string {\n  fmt = fmt || '0,0[.]0';\n  return numbro(num).format(fmt);\n}\n\nexport function formatDate(date: Date|string, fmt?: string): string {\n  fmt = fmt || 'mm-DD-yyyy';\n  return dateUtils.format(typeof date === 'string' ? dateUtils.parse(date) : date, fmt);\n}\n\nexport function isoMonth(date: Date, fmt?: string): string {\n  fmt = fmt || 'mm';\n  const du = dateUtils;\n  return du.format(du.addDays(du.startOfISOWeek(date), 3), fmt);\n}\n\nexport function getCoordinate(source: any, zoom?: number): [number, number, number] {\n  zoom = zoom || 6;\n  if (source == null) {\n    return [51.505, -0.09, zoom];\n  } else {\n    return [source[0], source[1], zoom];\n  }\n}\n\n/**\n * Counts the collected forms. The form name must be specified. An optional condition can be added\n * to discriminate which forms to count in.\n */\nexport function COUNTFORMS(forms: Form[], expression: string = 'true'): number {\n  forms = (forms || []).slice(0);\n  if (expression === 'true') {\n    return forms.length;\n  }\n  if (forms.length === 0) {\n    return 0;\n  }\n  const isInRepeatingSlide = expression.includes(`__`);\n  if (isInRepeatingSlide) {\n    let count = 0;\n\n    forms.forEach(f => {\n      for (let i = 0; i <= MAX_REPS; i++) {\n        if (Object.keys(f).filter(key => key.includes(`__${i}`)).length === 0) {\n          break;\n        }\n        if (evaluateExpression(expression.replace('__', `__${i}`)), f) {\n          count++;\n        }\n      }\n    });\n\n    return count;\n\n  } else {\n    return forms.filter((f) => evaluateExpression(expression, f)).length;\n  }\n}\n\n/**\n * Counts the amount of unique form values for a specific field. The form name must be specified. An\n * optional condition can be added to discriminate which forms to count in\n */\nexport function COUNTFORMS_UNIQUE(forms: Form[], fieldName: string, expression?: string): number {\n  forms = (forms || []).slice(0);\n  const values: string|number[] = [];\n\n  if (expression != null) {\n    forms = forms.filter(f => evaluateExpression(expression as string, f));\n  }\n\n  forms.forEach(f => {\n    values.push(evaluateExpression(fieldName, f));\n  });\n\n  return Array.from(new Set(values)).length;\n}\n\n/**\n * Aggregates and sums the values of one or more. An optional condition can be added to discriminate\n * which forms to take for the sum.\n */\nexport function SUM(forms: Form[], expression: string, condition?: string): number {\n  let acc = 0;\n  forms = (forms || []).slice(0);\n\n  if (expression == null) {\n    return 0;\n  }\n  if (condition != null) {\n    forms = forms.filter((f) => evaluateExpression(condition, f));\n  }\n  const isInRepeatingSlide = expression.includes(`__`);\n  if (isInRepeatingSlide) {\n    forms.forEach(f => {\n      for (let i = 0; i <= MAX_REPS; i++) {\n        if (Object.keys(f).filter(key => key.includes(`__${i}`)).length === 0) {\n          break;\n        }\n        const evaluatedExpression = evaluateExpression(expression.replace('__', `__${i}`), f);\n        if (Number.isFinite(evaluateExpression)) {\n          acc += evaluatedExpression;\n        }\n      }\n    });\n  } else {\n    forms.forEach((f) => acc += evaluateExpression(expression, f));\n  }\n\n  return acc;\n}\n\n/**\n * Calculates the mean of a simple or derived value. An optional condition can be added to\n * discriminate which forms to take for the sum.\n */\nexport function MEAN(forms: Form[], expression: string): number {\n  forms = (forms || []).slice(0);\n  expression = (expression || '');\n  const length = forms.length;\n  if (length === 0) {\n    return 0;\n  }\n  let acc = 0;\n  forms.forEach((f) => {\n    acc += evaluateExpression(expression, f);\n  });\n  return Math.trunc(acc / length);\n}\n\n/**\n * Calculates the % between two members.\n */\nexport function PERCENT(value1: number, value2: number): string {\n  const res = +value1 / +value2;\n\n  return Number.isFinite(res) ? `${res}%` : 'err';\n}\n\n/**\n * Calculates the expression in the last form by date.\n */\nexport function LAST(forms: Form[], expression: string, date = 'date_end'): number {\n  forms = (forms || []).slice(0).sort((a, b) => {\n    const dateA = new Date(b[date] as string).getTime();\n    const dateB = new Date(a[date] as string).getTime();\n    return dateA - dateB;\n  });\n  if (forms.length > 0 && expression != null) {\n    const lastForm = forms[forms.length - 1] || [];\n    return evaluateExpression(expression, lastForm);\n  }\n  return 0;\n}\n\n/**\n * Calculates the max value of the field.\n */\nexport function MAX(forms: Form[], fieldName: string): number {\n  forms = (forms || []).slice(0);\n  let max = 0;\n  forms.forEach(form => {\n    if (form[fieldName] != null && !isNaN(form[fieldName] as number) &&\n        (form[fieldName] as number) > max) {\n      max = form[fieldName] as number;\n    }\n  });\n  return max;\n}\n\n/**\n * Calculates the median value of the field.\n */\nexport function MEDIAN(forms: Form[], fieldName: string): number {\n  forms = (forms || []).slice(0);\n  const numbers: number[] =\n      forms.filter(f => f[fieldName] != null && !isNaN(f[fieldName] as number))\n          .map(f => f[fieldName] as number)\n          .sort((a, b) => a - b)\n          .filter((item, pos, self) => self.indexOf(item) == pos);\n\n  return Number.isInteger(numbers.length / 2) ?\n      numbers[numbers.length / 2] :\n      (numbers[+parseInt(`${numbers.length - 1 / 2}`) / 2] +\n       numbers[+parseInt(`${numbers.length - 1 / 2}`) / 2 + 1]) /\n          2;\n}\n\n/**\n * Calculates the mode value of the field.\n */\nexport function MODE(forms: Form[], fieldName: string): number[] {\n  forms = (forms || []).slice(0);\n  let maxCount = 0;\n  const map: {[key: number]: number} = {};\n  forms.forEach(f => {\n    const value = f[fieldName] as number;\n    if (value != null) {\n      map[value] = map[value] != null ? map[value] + 1 : 1;\n    }\n    if (map[value] > maxCount) {\n      maxCount = map[value];\n    }\n  });\n  return Object.keys(map).filter(v => map[+v] === maxCount).map(v => +v);\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfContext} from '@ajf/core/common';\n\nimport {AjfExpressionUtils} from './expression-utils';\n\nexport function getContextString(context?: AjfContext): string {\n  let fstr = AjfExpressionUtils.UTIL_FUNCTIONS;\n  if (context instanceof Array) {\n    for (let i = 0; i < context.length; i++) {\n      fstr = `${fstr}var ${context[i]} = true;`;\n    }\n  } else if (context != null) {\n    Object.keys(context).forEach(x => {\n      let val: any = context[x];\n      if (val == null || isNaN(Number(val)) || val === '' || val instanceof Array) {\n        if (val instanceof Array) {\n          for (let i = 0; i < val.length; i++) {\n            val[i] =\n                (val == null || isNaN(Number(val[i])) || val[i] === '') && val[i] || Number(val[i]);\n          }\n        }\n        val = JSON.stringify(val);\n      } else {\n        val = Number(val);\n      }\n      fstr = `${fstr}var ${x} = ${val}; `;\n    });\n  }\n  return fstr;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfCondition} from '../interface/condition';\nimport {createCondition} from './create-condition';\n\n/**\n * It creates a false AjfCondidion.\n */\nexport function neverCondition(): AjfCondition {\n  return createCondition({condition: 'false'});\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {tokenize} from 'esprima';\n\nexport function normalizeExpression(\n    formula: string, ancestorsNames: {[prop: string]: number}, prefix: number[]): string {\n  const ancestorsNameStrings = Object.keys(ancestorsNames);\n  const tokens = tokenize(formula)\n                     .filter((token: any) => token.type == 'Identifier' && token.value != '$value')\n                     .map((token: any) => token.value);\n  tokens.forEach((t: any) => {\n    if (ancestorsNameStrings.indexOf(t) > -1) {\n      formula = formula.replace(\n          new RegExp(`\\\\b${t}\\\\b`, 'g'), `${t}__${prefix.slice(ancestorsNames[t]).join('__')}`);\n    }\n  });\n  return formula;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfContext} from '@ajf/core/common';\n\nimport {getContextString} from './get-context-string';\n\nlet cachedContext: any = {};\nlet cachedContextString = '{}';\n\nexport function validateExpression(str: string, context?: AjfContext): boolean {\n  if (context === cachedContext) {\n    console.log('cache hit');\n  } else {\n    cachedContext = context;\n    cachedContextString = getContextString(context);\n  }\n  let ctx = cachedContextString;\n  try {\n    let f = new Function(`${ctx}${str}`);\n    f();\n    f = <any>null;\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport * from './context';\nexport * from './error';\nexport * from './interface/condition';\nexport * from './interface/formula';\nexport * from './interface/validation-function';\nexport * from './serializers/condition-serializer';\nexport * from './serializers/formula-serializer';\nexport * from './utils/always-condition';\nexport * from './utils/create-condition';\nexport * from './utils/create-formula';\nexport * from './utils/expression-utils';\nexport * from './utils/get-context-string';\nexport * from './utils/never-condition';\nexport * from './utils/normalize-expression';\nexport * from './utils/validate-expression';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["numbroMod","dateFns","tokenize"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAA;;;;;;;;;;;;;;IAcA;IAEA,IAAI,aAAa,GAAG,UAAS,CAAC,EAAE,CAAC;QAC7B,aAAa,GAAG,MAAM,CAAC,cAAc;aAChC,EAAE,SAAS,EAAE,EAAE,EAAE,YAAY,KAAK,IAAI,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC;YAC5E,UAAU,CAAC,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC;gBAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;oBAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QACtG,OAAO,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC;aAEc,SAAS,CAAC,CAAC,EAAE,CAAC;QAC1B,IAAI,OAAO,CAAC,KAAK,UAAU,IAAI,CAAC,KAAK,IAAI;YACrC,MAAM,IAAI,SAAS,CAAC,sBAAsB,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,+BAA+B,CAAC,CAAC;QAC9F,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACpB,SAAS,EAAE,KAAK,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,EAAE;QACvC,CAAC,CAAC,SAAS,GAAG,CAAC,KAAK,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;IACzF,CAAC;IAEM,IAAI,QAAQ,GAAG;QAClB,QAAQ,GAAG,MAAM,CAAC,MAAM,IAAI,SAAS,QAAQ,CAAC,CAAC;YAC3C,KAAK,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;gBACjD,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBACjB,KAAK,IAAI,CAAC,IAAI,CAAC;oBAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;wBAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;aAChF;YACD,OAAO,CAAC,CAAC;SACZ,CAAA;QACD,OAAO,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;IAC3C,CAAC,CAAA;aAEe,MAAM,CAAC,CAAC,EAAE,CAAC;QACvB,IAAI,CAAC,GAAG,EAAE,CAAC;QACX,KAAK,IAAI,CAAC,IAAI,CAAC;YAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;gBAC/E,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,IAAI,CAAC,IAAI,IAAI,IAAI,OAAO,MAAM,CAAC,qBAAqB,KAAK,UAAU;YAC/D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACpE,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC1E,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACzB;QACL,OAAO,CAAC,CAAC;IACb,CAAC;aAEe,UAAU,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI;QACpD,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,IAAI,KAAK,IAAI,GAAG,IAAI,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;QAC7H,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,UAAU;YAAE,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;;YAC1H,KAAK,IAAI,CAAC,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;gBAAE,IAAI,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;oBAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;QAClJ,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IAClE,CAAC;aAEe,OAAO,CAAC,UAAU,EAAE,SAAS;QACzC,OAAO,UAAU,MAAM,EAAE,GAAG,IAAI,SAAS,CAAC,MAAM,EAAE,GAAG,EAAE,UAAU,CAAC,CAAC,EAAE,CAAA;IACzE,CAAC;aAEe,UAAU,CAAC,WAAW,EAAE,aAAa;QACjD,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,UAAU;YAAE,OAAO,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;IACnI,CAAC;aAEe,SAAS,CAAC,OAAO,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS;QACvD,SAAS,KAAK,CAAC,KAAK,IAAI,OAAO,KAAK,YAAY,CAAC,GAAG,KAAK,GAAG,IAAI,CAAC,CAAC,UAAU,OAAO,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;QAC5G,OAAO,KAAK,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,EAAE,UAAU,OAAO,EAAE,MAAM;YACrD,SAAS,SAAS,CAAC,KAAK,IAAI,IAAI;gBAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aAAE;YAAC,OAAO,CAAC,EAAE;gBAAE,MAAM,CAAC,CAAC,CAAC,CAAC;aAAE,EAAE;YAC3F,SAAS,QAAQ,CAAC,KAAK,IAAI,IAAI;gBAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;aAAE;YAAC,OAAO,CAAC,EAAE;gBAAE,MAAM,CAAC,CAAC,CAAC,CAAC;aAAE,EAAE;YAC9F,SAAS,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,EAAE;YAC9G,IAAI,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,UAAU,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;SACzE,CAAC,CAAC;IACP,CAAC;aAEe,WAAW,CAAC,OAAO,EAAE,IAAI;QACrC,IAAI,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,cAAa,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;gBAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACjH,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,OAAO,MAAM,KAAK,UAAU,KAAK,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,cAAa,OAAO,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzJ,SAAS,IAAI,CAAC,CAAC,IAAI,OAAO,UAAU,CAAC,IAAI,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;QAClE,SAAS,IAAI,CAAC,EAAE;YACZ,IAAI,CAAC;gBAAE,MAAM,IAAI,SAAS,CAAC,iCAAiC,CAAC,CAAC;YAC9D,OAAO,CAAC;gBAAE,IAAI;oBACV,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI;wBAAE,OAAO,CAAC,CAAC;oBAC7J,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;wBAAE,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC;oBACxC,QAAQ,EAAE,CAAC,CAAC,CAAC;wBACT,KAAK,CAAC,CAAC;wBAAC,KAAK,CAAC;4BAAE,CAAC,GAAG,EAAE,CAAC;4BAAC,MAAM;wBAC9B,KAAK,CAAC;4BAAE,CAAC,CAAC,KAAK,EAAE,CAAC;4BAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;wBACxD,KAAK,CAAC;4BAAE,CAAC,CAAC,KAAK,EAAE,CAAC;4BAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;4BAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;4BAAC,SAAS;wBACjD,KAAK,CAAC;4BAAE,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;4BAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;4BAAC,SAAS;wBACjD;4BACI,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;gCAAE,CAAC,GAAG,CAAC,CAAC;gCAAC,SAAS;6BAAE;4BAC5G,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;gCAAE,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;gCAAC,MAAM;6BAAE;4BACtF,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;gCAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gCAAC,CAAC,GAAG,EAAE,CAAC;gCAAC,MAAM;6BAAE;4BACrE,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;gCAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gCAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gCAAC,MAAM;6BAAE;4BACnE,IAAI,CAAC,CAAC,CAAC,CAAC;gCAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;4BACtB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;4BAAC,SAAS;qBAC9B;oBACD,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;iBAC9B;gBAAC,OAAO,CAAC,EAAE;oBAAE,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBAAC,CAAC,GAAG,CAAC,CAAC;iBAAE;wBAAS;oBAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;iBAAE;YAC1D,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;gBAAE,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;YAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;SACpF;IACL,CAAC;IAEM,IAAI,eAAe,GAAG,MAAM,CAAC,MAAM,IAAI,UAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;QAC9D,IAAI,EAAE,KAAK,SAAS;YAAE,EAAE,GAAG,CAAC,CAAC;QAC7B,MAAM,CAAC,cAAc,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,GAAG,EAAE,cAAa,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACzF,CAAC,KAAK,UAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;QACtB,IAAI,EAAE,KAAK,SAAS;YAAE,EAAE,GAAG,CAAC,CAAC;QAC7B,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,CAAC,CAAC;aAEa,YAAY,CAAC,CAAC,EAAE,CAAC;QAC7B,KAAK,IAAI,CAAC,IAAI,CAAC;YAAE,IAAI,CAAC,KAAK,SAAS,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;gBAAE,eAAe,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAClH,CAAC;aAEe,QAAQ,CAAC,CAAC;QACtB,IAAI,CAAC,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,MAAM,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;QAC9E,IAAI,CAAC;YAAE,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACxB,IAAI,CAAC,IAAI,OAAO,CAAC,CAAC,MAAM,KAAK,QAAQ;YAAE,OAAO;gBAC1C,IAAI,EAAE;oBACF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM;wBAAE,CAAC,GAAG,KAAK,CAAC,CAAC;oBACnC,OAAO,EAAE,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC;iBAC3C;aACJ,CAAC;QACF,MAAM,IAAI,SAAS,CAAC,CAAC,GAAG,yBAAyB,GAAG,iCAAiC,CAAC,CAAC;IAC3F,CAAC;aAEe,MAAM,CAAC,CAAC,EAAE,CAAC;QACvB,IAAI,CAAC,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC3D,IAAI,CAAC,CAAC;YAAE,OAAO,CAAC,CAAC;QACjB,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;QACjC,IAAI;YACA,OAAO,CAAC,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,IAAI;gBAAE,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;SAC9E;QACD,OAAO,KAAK,EAAE;YAAE,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;SAAE;gBAC/B;YACJ,IAAI;gBACA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;oBAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACpD;oBACO;gBAAE,IAAI,CAAC;oBAAE,MAAM,CAAC,CAAC,KAAK,CAAC;aAAE;SACpC;QACD,OAAO,EAAE,CAAC;IACd,CAAC;IAED;aACgB,QAAQ;QACpB,KAAK,IAAI,EAAE,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE;YAC9C,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzC,OAAO,EAAE,CAAC;IACd,CAAC;IAED;aACgB,cAAc;QAC1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE;YAAE,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;QACpF,KAAK,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE;YAC5C,KAAK,IAAI,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE;gBAC7D,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACpB,OAAO,CAAC,CAAC;IACb,CAAC;aAEe,aAAa,CAAC,EAAE,EAAE,IAAI;QAClC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE;YAC7D,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QACpB,OAAO,EAAE,CAAC;IACd,CAAC;aAEe,OAAO,CAAC,CAAC;QACrB,OAAO,IAAI,YAAY,OAAO,IAAI,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC;IACzE,CAAC;aAEe,gBAAgB,CAAC,OAAO,EAAE,UAAU,EAAE,SAAS;QAC3D,IAAI,CAAC,MAAM,CAAC,aAAa;YAAE,MAAM,IAAI,SAAS,CAAC,sCAAsC,CAAC,CAAC;QACvF,IAAI,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,UAAU,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;QAC9D,OAAO,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,cAAc,OAAO,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;QACtH,SAAS,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC;YAAE,CAAC,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,IAAI,OAAO,IAAI,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE;QAC1I,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,IAAI,IAAI;YAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAAE;QAAC,OAAO,CAAC,EAAE;YAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SAAE,EAAE;QAClF,SAAS,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,YAAY,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE;QACxH,SAAS,OAAO,CAAC,KAAK,IAAI,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,EAAE;QAClD,SAAS,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,EAAE;QAClD,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,MAAM;YAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACtF,CAAC;aAEe,gBAAgB,CAAC,CAAC;QAC9B,IAAI,CAAC,EAAE,CAAC,CAAC;QACT,OAAO,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,IAAI,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,cAAc,OAAO,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;QAC5I,SAAS,IAAI,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,IAAI,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,KAAK,QAAQ,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE;IACnJ,CAAC;aAEe,aAAa,CAAC,CAAC;QAC3B,IAAI,CAAC,MAAM,CAAC,aAAa;YAAE,MAAM,IAAI,SAAS,CAAC,sCAAsC,CAAC,CAAC;QACvF,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;QACnC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,OAAO,QAAQ,KAAK,UAAU,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,cAAc,OAAO,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QACjN,SAAS,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,UAAU,CAAC,IAAI,OAAO,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE;QAChK,SAAS,MAAM,CAAC,OAAO,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAS,CAAC,IAAI,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,EAAE;IAChI,CAAC;aAEe,oBAAoB,CAAC,MAAM,EAAE,GAAG;QAC5C,IAAI,MAAM,CAAC,cAAc,EAAE;YAAE,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC;SAAE;aAAM;YAAE,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC;SAAE;QAC/G,OAAO,MAAM,CAAC;IAClB,CAAC;IAAA,CAAC;IAEF,IAAI,kBAAkB,GAAG,MAAM,CAAC,MAAM,IAAI,UAAS,CAAC,EAAE,CAAC;QACnD,MAAM,CAAC,cAAc,CAAC,CAAC,EAAE,SAAS,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;IACxE,CAAC,IAAI,UAAS,CAAC,EAAE,CAAC;QACd,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;IACrB,CAAC,CAAC;aAEc,YAAY,CAAC,GAAG;QAC5B,IAAI,GAAG,IAAI,GAAG,CAAC,UAAU;YAAE,OAAO,GAAG,CAAC;QACtC,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,GAAG,IAAI,IAAI;YAAE,KAAK,IAAI,CAAC,IAAI,GAAG;gBAAE,IAAI,CAAC,KAAK,SAAS,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;oBAAE,eAAe,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;QACzI,kBAAkB,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;QAChC,OAAO,MAAM,CAAC;IAClB,CAAC;aAEe,eAAe,CAAC,GAAG;QAC/B,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC,UAAU,IAAI,GAAG,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC;IAC5D,CAAC;aAEe,sBAAsB,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;QAC3D,IAAI,IAAI,KAAK,GAAG,IAAI,CAAC,CAAC;YAAE,MAAM,IAAI,SAAS,CAAC,+CAA+C,CAAC,CAAC;QAC7F,IAAI,OAAO,KAAK,KAAK,UAAU,GAAG,QAAQ,KAAK,KAAK,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC;YAAE,MAAM,IAAI,SAAS,CAAC,0EAA0E,CAAC,CAAC;QACnL,OAAO,IAAI,KAAK,GAAG,GAAG,CAAC,GAAG,IAAI,KAAK,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IAClG,CAAC;aAEe,sBAAsB,CAAC,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;QAClE,IAAI,IAAI,KAAK,GAAG;YAAE,MAAM,IAAI,SAAS,CAAC,gCAAgC,CAAC,CAAC;QACxE,IAAI,IAAI,KAAK,GAAG,IAAI,CAAC,CAAC;YAAE,MAAM,IAAI,SAAS,CAAC,+CAA+C,CAAC,CAAC;QAC7F,IAAI,OAAO,KAAK,KAAK,UAAU,GAAG,QAAQ,KAAK,KAAK,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC;YAAE,MAAM,IAAI,SAAS,CAAC,yEAAyE,CAAC,CAAC;QAClL,OAAO,CAAC,IAAI,KAAK,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC;IAC9G;;IC1OA;;;;;;;;;;;;;;;;;;;;;;QAsB8B,4BAAK;;;;QAajC,kBAAY,OAAgB;YAA5B,YACE,kBAAM,OAAO,CAAC,SAOf;;;YAHC,MAAM,CAAC,cAAc,CAAC,KAAI,EAAE,QAAQ,CAAC,SAAS,CAAC,CAAC;YAEhD,KAAI,CAAC,QAAQ,GAAG,OAAO,IAAI,EAAE,CAAC;;SAC/B;QAnBD,sBAAI,0BAAI;iBAAR;gBACE,OAAO,UAAU,CAAC;aACnB;;;WAAA;QACD,sBAAI,6BAAO;iBAAX;gBACE,OAAO,IAAI,CAAC,QAAQ,CAAC;aACtB;;;WAAA;uBAeF;KAtBD,CAA8B,KAAK;;ICtBnC;;;;;;;;;;;;;;;;;;;;;IAwBA;;;;aAIgB,eAAe,CAAC,SAAqC;QAArC,0BAAA,EAAA,cAAqC;QACnE,OAAO,EAAC,SAAS,EAAE,SAAS,CAAC,SAAS,IAAI,EAAE,EAAC,CAAC;IAChD;;IC9BA;;;;;;;;;;;;;;;;;;;;;;QAyBA;SAIC;QAHQ,+BAAQ,GAAf,UAAgB,IAA2B;YACzC,OAAO,eAAe,CAAC,IAAI,CAAC,CAAC;SAC9B;qCACF;KAAA;;IC7BD;;;;;;;;;;;;;;;;;;;;;IAwBA;;;;aAIgB,aAAa,CAAC,OAAiC;QAAjC,wBAAA,EAAA,YAAiC;QAC7D,OAAO,EAAC,OAAO,EAAE,OAAO,CAAC,OAAO,IAAI,EAAE,EAAC,CAAC;IAC1C;;IC9BA;;;;;;;;;;;;;;;;;;;;;;QAyBA;SAIC;QAHQ,6BAAQ,GAAf,UAAgB,IAAyB;YACvC,OAAO,aAAa,CAAC,IAAI,CAAC,CAAC;SAC5B;mCACF;KAAA;;IC7BD;;;;;;;;;;;;;;;;;;;;;IAwBA;;;aAGgB,eAAe;QAC7B,OAAO,eAAe,CAAC,EAAC,SAAS,EAAE,MAAM,EAAC,CAAC,CAAC;IAC9C;;ICAA,IAAI,WAAW,GAAQ,EAAE,CAAC;IAE1B,IAAM,MAAM,GAAGA,oBAAS,CAAC,OAAO,IAAIA,oBAAS,CAAC;IAK9C,IAAM,QAAQ,GAAG,EAAE,CAAC;QAEP,SAAS,GAAG;QACvB,OAAO,EAAEC,kBAAO,CAAC,OAAO;QACxB,SAAS,EAAEA,kBAAO,CAAC,SAAS;QAC5B,QAAQ,EAAEA,kBAAO,CAAC,QAAQ;QAC1B,YAAY,EAAEA,kBAAO,CAAC,YAAY;QAClC,MAAM,EAAEA,kBAAO,CAAC,MAAM;QACtB,MAAM,EAAEA,kBAAO,CAAC,MAAM;QACtB,KAAK,EAAEA,kBAAO,CAAC,QAAQ;QACvB,YAAY,EAAEA,kBAAO,CAAC,YAAY;QAClC,cAAc,EAAEA,kBAAO,CAAC,cAAc;MACtC;;QAEF;;;;IACE;IACO,iCAAc,GAAG,EAAE,CAAC;IAC3B;;;IAGO,wBAAK,GAAsC;QAChD,UAAU,EAAE,EAAC,EAAE,EAAE,UAAU,EAAC;QAC5B,YAAY,EAAE,EAAC,EAAE,EAAE,YAAY,EAAC;QAChC,KAAK,EAAE,EAAC,EAAE,EAAE,KAAK,EAAC;QAClB,QAAQ,EAAE,EAAC,EAAE,EAAE,QAAQ,EAAC;QACxB,aAAa,EAAE,EAAC,EAAE,EAAE,aAAa,EAAC;QAClC,cAAc,EAAE,EAAC,EAAE,EAAE,cAAc,EAAC;QACpC,GAAG,EAAE,EAAC,EAAE,EAAE,GAAG,EAAC;QACd,cAAc,EAAE,EAAC,EAAE,EAAE,cAAc,EAAC;QACpC,KAAK,EAAE,EAAC,EAAE,EAAE,KAAK,EAAC;QAClB,YAAY,EAAE,EAAC,EAAE,EAAE,YAAY,EAAC;QAChC,UAAU,EAAE,EAAC,EAAE,EAAE,UAAU,EAAC;QAC5B,eAAe,EAAE,EAAC,EAAE,EAAE,eAAe,EAAC;QACtC,aAAa,EAAE,EAAC,EAAE,EAAE,aAAa,EAAC;QAClC,YAAY,EAAE,EAAC,EAAE,EAAE,YAAY,EAAC;QAChC,YAAY,EAAE,EAAC,EAAE,EAAE,YAAY,EAAC;QAChC,iBAAiB,EAAE,EAAC,EAAE,EAAE,iBAAiB,EAAC;QAC1C,sBAAsB,EAAE,EAAC,EAAE,EAAE,sBAAsB,EAAC;QACpD,0BAA0B,EAAE,EAAC,EAAE,EAAE,0BAA0B,EAAC;QAC5D,oBAAoB,EAAE,EAAC,EAAE,EAAE,oBAAoB,EAAC;QAChD,yBAAyB,EAAE,EAAC,EAAE,EAAE,yBAAyB,EAAC;QAC1D,KAAK,EAAE,EAAC,EAAE,EAAE,KAAK,EAAC;QAClB,YAAY,EAAE,EAAC,EAAE,EAAE,YAAY,EAAC;QAChC,UAAU,EAAE,EAAC,EAAE,EAAE,UAAU,EAAC;QAC5B,QAAQ,EAAE,EAAC,EAAE,EAAE,QAAQ,EAAC;QACxB,aAAa,EAAE,EAAC,EAAE,EAAE,aAAa,EAAC;QAClC,IAAI,EAAE,EAAC,EAAE,EAAE,IAAI,EAAC;QAChB,QAAQ,EAAE,EAAC,EAAE,EAAE,QAAQ,EAAC;QACxB,UAAU,EAAE,EAAC,EAAE,EAAE,UAAU,EAAC;QAC5B,SAAS,EAAE,EAAC,EAAE,EAAE,SAAS,CAAC,KAAK,EAAC;QAChC,IAAI,EAAE,EAAC,EAAE,EAAE,IAAI,EAAC;QAChB,UAAU,EAAE,EAAC,EAAE,EAAE,UAAU,EAAC;QAC5B,iBAAiB,EAAE,EAAC,EAAE,EAAE,iBAAiB,EAAC;QAC1C,GAAG,EAAE,EAAC,EAAE,EAAE,GAAG,EAAC;QACd,IAAI,EAAE,EAAC,EAAE,EAAE,IAAI,EAAC;QAChB,OAAO,EAAE,EAAC,EAAE,EAAE,OAAO,EAAC;QACtB,IAAI,EAAE,EAAC,EAAE,EAAE,IAAI,EAAC;QAChB,GAAG,EAAE,EAAC,EAAE,EAAE,GAAG,EAAC;QACd,MAAM,EAAE,EAAC,EAAE,EAAE,MAAM,EAAC;QACpB,IAAI,EAAE,EAAC,EAAE,EAAE,IAAI,EAAC;KACjB,CAAC;aAGY,kBAAkB,CAC9B,UAAkB,EAAE,OAAoB,EAAE,YAAqB;QACjE,IAAI,OAAO,GAAG,YAAY,IAAI,UAAU,IAAI,EAAE,CAAC;QAC/C,IAAI,OAAO,KAAK,EAAE,EAAE;YAClB,OAAO,EAAE,CAAC;SACX;QACD,IAAI,OAAO,KAAK,MAAM,EAAE;YACtB,OAAO,IAAI,CAAC;SACb;QACD,IAAI,OAAO,KAAK,OAAO,EAAE;YACvB,OAAO,KAAK,CAAC;SACd;QACD,IAAI,OAAO,IAAI,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,KAAK,SAAS,EAAE;YACrD,OAAO,OAAO,CAAC,OAAO,CAAC,CAAC;SACzB;QACD,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;YAC7B,OAAO,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;SACxC;QACD,IAAM,WAAW,GACbC,gBAAQ,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,UAAC,CAAM,IAAK,OAAA,CAAC,CAAC,IAAI,KAAK,YAAY,GAAA,CAAC,CAAC,GAAG,CAAC,UAAC,CAAM,IAAK,OAAA,CAAC,CAAC,KAAK,GAAA,CAAC,CAAC;QAC3F,IAAM,GAAG,GAAU,EAAE,CAAC;QACtB,WAAW,CAAC,OAAO,CAAC,UAAC,GAAW;YAC9B,IAAI,GAAG,GAAQ,IAAI,CAAC;YACpB,IAAI,OAAO,IAAI,IAAI,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE;gBACjD,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;aACpB;iBAAM,IAAI,kBAAkB,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE;gBACtD,IAAM,IAAI,GAAG,kBAAkB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC3C,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC;aACf;YACD,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACf,CAAC,CAAC;QACH,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAChC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAEtB,IAAI;YACF,IAAI,CAAC,QAAO,QAAQ,YAAR,QAAQ,+CAAI,WAAW,KAAE,YAAU,OAAS,MAAC,CAAC;YAC1D,IAAM,GAAG,GAAG,CAAC,wCAAI,GAAG,GAAC,CAAC;YACtB,CAAC,GAAQ,IAAI,CAAC;YACd,OAAO,GAAG,CAAC;SACZ;QAAC,OAAO,CAAC,EAAE;YACV,OAAO,KAAK,CAAC;SACd;IACH,CAAC;IACD;;;aAGgB,UAAU,CAAC,CAAS;QAClC,IAAI,KAAK,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,KAAK,QAAQ,EAAE;YACvC,OAAO,CAAC,CAAC;SACV;QACD,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;YAChB,OAAO,QAAQ,CAAC;SACjB;QACD,OAAO,CAAC,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,MAAM,CAAC;IACpD,CAAC;IACD;;;aAGgB,YAAY,CAAC,CAAgB;QAC3C,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE;YACzB,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;SACnB;QACD,IAAI,OAAO,CAAC,KAAK,QAAQ,IAAI,KAAK,CAAC,CAAC,CAAC,EAAE;YACrC,OAAO,CAAC,CAAC;SACV;QACD,IAAM,KAAK,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACtC,OAAO,KAAK,CAAC,MAAM,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IAChD,CAAC;IACD;;;aAGgB,KAAK,CAAC,CAAgB;QACpC,IAAI,QAAQ,CAAC,CAAC,KAAK,QAAQ,EAAE;YAC3B,OAAO,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SAC1B;QACD,IAAI,QAAQ,CAAC,CAAC,KAAK,QAAQ,EAAE;YAC3B,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;SAC5B;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IACD;;;aAGgB,QAAQ,CAAC,CAAM;QAC7B,QAAQ,OAAO,CAAC,KAAK,WAAW,IAAI,CAAC,KAAK,IAAI,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,MAAM,GAAG,CAAC,GAAG,KAAK,EAAE;IACpF,CAAC;IACD;;;aAGgB,aAAa,CAAC,KAAY,EAAE,CAAM;QAChD,OAAO,CAAC,KAAK,IAAI,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC;IACtD,CAAC;IACD;;;aAGgB,cAAc,CAAC,IAAY,EAAE,GAAQ,EAAE,QAAa;QAClE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;YAC7B,GAAG,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;SACxB;QACD,OAAO,GAAG,CAAC;IACb,CAAC;IACD;;;aAGgB,GAAG,CAAC,KAAY;QAC9B,OAAO,KAAK,CAAC,MAAM,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,GAAG,CAAC,GAAA,EAAE,CAAC,CAAC,CAAC;IAC1C,CAAC;IACD;;;IAGA;IACA;IACA;aACgB,cAAc,CAAC,OAAe,EAAE,MAAc,EAAE,SAAiB,EAAE,CAAM;QACvF,IAAM,GAAG,GAAG,YAAY,CAAC;QACzB,IAAI,CAAC,GAAG,CAAC,OAAO,OAAO,KAAK,WAAW,IAAI,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;QACjF,IAAI,SAAS,IAAI,QAAQ,EAAE;YACzB,CAAC,GAAG,CAAC,CAAC,CAAC;SACR;QACD,IAAI,MAAM,CAAC;QACX,QAAQ,MAAM;YACZ,KAAK,KAAK;gBACR,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC;gBAC3B,MAAM;YACR,KAAK,OAAO;gBACV,MAAM,GAAG,SAAS,CAAC,SAAS,CAAC;gBAC7B,MAAM;YACR,KAAK,MAAM;gBACT,MAAM,GAAG,SAAS,CAAC,QAAQ,CAAC;gBAC5B,MAAM;YACR;gBACE,OAAO,EAAE,CAAC;SACb;QACD,OAAO,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IAC7C,CAAC;IACD;;;aAGgB,KAAK,CAAC,GAAkB,EAAE,MAAc;QACtD,MAAM,GAAG,MAAM,IAAI,CAAC,CAAC;QACrB,IAAI,CAAC,CAAC;QACN,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;YAC3B,IAAI;gBACF,CAAC,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;aACrB;YAAC,OAAO,CAAC,EAAE;aACX;SACF;aAAM;YACL,CAAC,GAAG,GAAG,CAAC;SACT;QACD,IAAI,CAAC,IAAI,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC,EAAE;YACzB,CAAC,GAAG,CAAC,CAAC;SACP;QACD,IAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;QAC/B,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;IAC/B,CAAC;IACD;;;;;aAKgB,YAAY,CAAC,MAAa,EAAE,QAAgB,EAAE,SAAkB;QAC9E,MAAM,GAAG,CAAC,MAAM,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QACjC,IAAM,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;QACxB,IAAM,GAAG,GAAU,EAAE,CAAC;QACtB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YAC1B,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,IAAI,SAAS,IAAI,IAAI,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,IAAI,EAAE;gBACpF,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;aACtE;iBAAM,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE;gBACtC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;aAC/B;SACF;QACD,OAAO,GAAG,CAAC;IACb,CAAC;IACD;;;aAGgB,UAAU,CAAC,MAAa,EAAE,UAAoB;QAC5D,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,UAAU,GAAG,CAAC,UAAU,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QACzC,IAAM,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC;QAE5B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YAC1B,IAAM,KAAK,GAAG,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YAClD,IAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC;YAC1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;gBAC7B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;oBAC5B,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;iBAC5B;aACF;SACF;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IACD;;;;aAIgB,eAAe,CAAC,MAAa,EAAE,UAAoB;QACjE,IAAM,MAAM,GAAU,EAAE,CAAC;QACzB,UAAU,GAAG,CAAC,UAAU,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAEzC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,IAAM,KAAK,GAAG,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YAClD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACpB;QAED,IAAM,GAAG,GAAU,EAAE,CAAC;QACtB,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YACrB,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;gBACrD,IAAI,MAAM,GAAG,CAAC,CAAC;gBACf,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;oBACtD,MAAM,GAAG,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;iBAChD;gBACD,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAClB;SACF;QACD,OAAO,GAAG,CAAC;IACb,CAAC;IACD;;;aAGgB,aAAa,CAAC,MAAa,EAAE,QAAgB,EAAE,SAAgB;QAC7E,MAAM,GAAG,CAAC,MAAM,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QACjC,SAAS,GAAG,SAAS,IAAI,CAAC,CAAC,CAAC,CAAC;QAC7B,IAAI,EAAE,SAAS,YAAY,KAAK,CAAC,EAAE;YACjC,SAAS,GAAG,CAAC,SAAS,CAAC,CAAC;SACzB;QACD,IAAM,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;QACxB,IAAM,GAAG,GAAU,EAAE,CAAC;QACtB,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YAC1B,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE;gBAC/B,IAAI,SAAS,CAAC,MAAM,GAAG,KAAK,EAAE;oBAC5B,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;iBAC5B;qBAAM;oBACL,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;iBACxB;gBACD,KAAK,EAAE,CAAC;aACT;SACF;QACD,OAAO,GAAG,CAAC;IACb,CAAC;IACD;;;aAGgB,YAAY,CAAC,MAAa,EAAE,QAAgB,EAAE,GAAW;QACvE,MAAM,GAAG,CAAC,MAAM,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QACjC,IAAM,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;QACxB,IAAM,GAAG,GAAQ,EAAE,CAAC;QACpB,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YAC1B,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE;gBAC/B,QAAQ,GAAG;oBACT,KAAK,IAAI,CAAC;oBACV,KAAK,IAAI;wBACP,MAAM,GAAG,GAAG,CAAC;wBACb,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;wBAC5D,MAAM;oBACR,KAAK,IAAI,CAAC;oBACV,KAAK,IAAI;wBACP,MAAM,GAAG,GAAG,CAAC;wBACb,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;wBAC1D,MAAM;oBACR;wBACE,MAAM,GAAG,EAAE,CAAC;wBACZ,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;iBAC/D;aACF;SACF;QACD,OAAO,GAAG,CAAC;IACb,CAAC;IACD;;;aAGgB,YAAY,CAAC,MAAW,EAAE,QAAgB;QACxD,MAAM,GAAG,CAAC,MAAM,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QACjC,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;QAE1B,OAAO,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE;YAC5C,CAAC,EAAE,CAAC;YACJ,IAAI,CAAC,GAAG,CAAC,EAAE;gBACT,OAAO,EAAE,CAAC;aACX;SACF;QACD,OAAO,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;IAC3C,CAAC;IACD;;;aAGgB,iBAAiB,CAAC,MAAa,EAAE,UAAoB;QACnE,MAAM,GAAG,CAAC,MAAM,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QACjC,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,GAAG,GAAG,MAAM,CAAC,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAClD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;gBACf,MAAM,IAAI,GAAG,CAAC;aACf;SACF;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IACD;;;aAGgB,sBAAsB,CAAC,MAAa,EAAE,QAAgB;QACpE,MAAM,GAAG,CAAC,MAAM,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QACjC,IAAI,IAAI,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;QAC7B,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE;YACrC,IAAI,IAAI,IAAI,CAAC,EAAE;gBACb,MAAM;aACP;YACD,IAAI,EAAE,CAAC;SACR;QACD,IAAI,QAAQ,GAAG,IAAI,GAAG,CAAC,CAAC;QACxB,IAAI,IAAI,IAAI,CAAC,EAAE;YACb,QAAQ,GAAG,IAAI,CAAC;SACjB;aAAM;YACL,OAAO,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE;gBACzC,IAAI,QAAQ,IAAI,CAAC,EAAE;oBACjB,QAAQ,GAAG,IAAI,CAAC;oBAChB,MAAM;iBACP;gBACD,QAAQ,EAAE,CAAC;aACZ;SACF;QAED,IAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClE,IAAM,YAAY,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE9E,IAAI,QAAQ,IAAI,YAAY,EAAE;YAC5B,OAAO,uEAAuE,CAAC;SAChF;aAAM,IAAI,QAAQ,GAAG,YAAY,EAAE;YAClC,OAAO,sEAAsE,CAAC;SAC/E;aAAM;YACL,OAAO,sEAAsE,CAAC;SAC/E;IACH,CAAC;IACD;;;aAGgB,0BAA0B,CAAC,MAAa,EAAE,UAAoB;QAC5E,IAAM,QAAQ,GAAG,eAAe,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;QAErD,IAAM,QAAQ,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChF,IAAM,YAAY,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC;QAE3F,IAAI,QAAQ,IAAI,YAAY,EAAE;YAC5B,OAAO,uEAAuE,CAAC;SAChF;aAAM,IAAI,QAAQ,GAAG,YAAY,EAAE;YAClC,OAAO,sEAAsE,CAAC;SAC/E;aAAM;YACL,OAAO,sEAAsE,CAAC;SAC/E;IACH,CAAC;IACD;;;aAGgB,oBAAoB,CAChC,MAAa,EAAE,QAAgB,EAAE,KAAa,EAAE,WAAmB;QACrE,MAAM,GAAG,CAAC,MAAM,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAEjC,WAAW,GAAG,WAAW,IAAI,CAAC,CAAC;QAC/B,KAAK,GAAG,KAAK,IAAI,EAAE,CAAC;QAEpB,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;QACtB,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,IAAI,OAAO,GAAG,CAAC,CAAC;QAChB,IAAI,MAAM,GAAG,CAAC,CAAC;QAEf,IAAI,CAAC,GAAG,KAAK,EAAE;YACb,KAAK,GAAG,CAAC,CAAC;SACX;QAED,OAAO,KAAK,IAAI,CAAC,EAAE;YACjB,IAAI,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE;gBACnC,OAAO,EAAE,CAAC;gBACV,GAAG,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAEvC,IAAI,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;oBAC/B,MAAM,EAAE,CAAC;iBACV;aACF;YACD,CAAC,EAAE,CAAC;YACJ,KAAK,EAAE,CAAC;SACT;QAED,IAAI,WAAW,IAAI,CAAC,EAAE;YACpB,OAAO,MAAM,CAAC;SACf;aAAM;YACL,OAAO,KAAK,CAAC,CAAC,GAAG,GAAG,OAAO,IAAI,WAAW,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;SACrD;IACH,CAAC;aAEe,yBAAyB,CACrC,MAAa,EAAE,UAAoB,EAAE,KAAa,EAAE,WAAmB;QACzE,MAAM,GAAG,CAAC,MAAM,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QACjC,IAAM,MAAM,GAAU,EAAE,CAAC;QAEzB,IAAI,UAAU,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YACvC,IAAI,GAAG,GAAG,CAAC,CAAC;YAEZ,WAAW,GAAG,WAAW,IAAI,CAAC,CAAC;YAC/B,KAAK,GAAG,KAAK,IAAI,EAAE,CAAC;YAEpB,IAAM,SAAS,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,GAAG,eAAe,CAAC,MAAM,EAAE,UAAU,CAAC;gBACnC,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YAE9E,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC;YAEzB,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE;gBAChC,IAAI,GAAG,GAAG,CAAC,CAAC;gBACZ,IAAI,OAAO,GAAG,CAAC,CAAC;gBAChB,IAAI,MAAM,GAAG,CAAC,CAAC;gBAEf,IAAI,GAAG,GAAG,KAAK,EAAE;oBACf,KAAK,GAAG,GAAG,CAAC;iBACb;gBAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,EAAE,EAAE;oBAC/B,IAAI,GAAG,GAAG,SAAS,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;oBAC7B,IAAI,GAAG,IAAI,IAAI,EAAE;wBACf,OAAO,EAAE,CAAC;wBACV,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC;wBACnB,IAAI,GAAG,GAAG,CAAC,EAAE;4BACX,MAAM,EAAE,CAAC;yBACV;qBACF;iBACF;gBAED,IAAI,OAAO,GAAG,CAAC,EAAE;oBACf,IAAI,WAAW,IAAI,CAAC,EAAE;wBACpB,GAAG,GAAG,MAAM,CAAC;qBACd;yBAAM;wBACL,GAAG,GAAG,CAAC,GAAG,GAAG,OAAO,IAAI,WAAW,IAAI,CAAC,CAAC;qBAC1C;oBACD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;iBAC5B;aACF;SACF;QACD,OAAO,MAAM,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;aAEe,KAAK,CAAC,MAAa,EAAE,QAAgB,EAAE,SAAiB;QACtE,MAAM,GAAG,CAAC,MAAM,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAEjC,IAAI,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,GAAG,SAAS,EAAE;YAC9C,OAAO,gEAAgE,CAAC;SACzE;aAAM;YACL,OAAO,SAAS,CAAC;SAClB;IACH,CAAC;aAEe,YAAY,CAAC,GAAW,EAAE,GAAY;QACpD,GAAG,GAAG,GAAG,IAAI,SAAS,CAAC;QACvB,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACjC,CAAC;aAEe,UAAU,CAAC,IAAiB,EAAE,GAAY;QACxD,GAAG,GAAG,GAAG,IAAI,YAAY,CAAC;QAC1B,OAAO,SAAS,CAAC,MAAM,CAAC,OAAO,IAAI,KAAK,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,EAAE,GAAG,CAAC,CAAC;IACxF,CAAC;aAEe,QAAQ,CAAC,IAAU,EAAE,GAAY;QAC/C,GAAG,GAAG,GAAG,IAAI,IAAI,CAAC;QAClB,IAAM,EAAE,GAAG,SAAS,CAAC;QACrB,OAAO,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IAChE,CAAC;aAEe,aAAa,CAAC,MAAW,EAAE,IAAa;QACtD,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC;QACjB,IAAI,MAAM,IAAI,IAAI,EAAE;YAClB,OAAO,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAC9B;aAAM;YACL,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;SACrC;IACH,CAAC;IAED;;;;aAIgB,UAAU,CAAC,KAAa,EAAE,UAA2B;QAA3B,2BAAA,EAAA,mBAA2B;QACnE,KAAK,GAAG,CAAC,KAAK,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,UAAU,KAAK,MAAM,EAAE;YACzB,OAAO,KAAK,CAAC,MAAM,CAAC;SACrB;QACD,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;YACtB,OAAO,CAAC,CAAC;SACV;QACD,IAAM,kBAAkB,GAAG,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACrD,IAAI,kBAAkB,EAAE;YACtB,IAAI,OAAK,GAAG,CAAC,CAAC;YAEd,KAAK,CAAC,OAAO,CAAC,UAAA,CAAC;wCACJ,CAAC;oBACR,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,QAAQ,CAAC,OAAK,CAAG,CAAC,GAAA,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;;qBAEtE;oBACD,IAAI,kBAAkB,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,EAAE,OAAK,CAAG,CAAC,CAAC,EAAE,CAAC,EAAE;wBAC7D,OAAK,EAAE,CAAC;qBACT;;gBANH,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,QAAQ,EAAE,CAAC,EAAE;0CAAzB,CAAC;;;iBAOT;aACF,CAAC,CAAC;YAEH,OAAO,OAAK,CAAC;SAEd;aAAM;YACL,OAAO,KAAK,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,kBAAkB,CAAC,UAAU,EAAE,CAAC,CAAC,GAAA,CAAC,CAAC,MAAM,CAAC;SACtE;IACH,CAAC;IAED;;;;aAIgB,iBAAiB,CAAC,KAAa,EAAE,SAAiB,EAAE,UAAmB;QACrF,KAAK,GAAG,CAAC,KAAK,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAM,MAAM,GAAoB,EAAE,CAAC;QAEnC,IAAI,UAAU,IAAI,IAAI,EAAE;YACtB,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,kBAAkB,CAAC,UAAoB,EAAE,CAAC,CAAC,GAAA,CAAC,CAAC;SACxE;QAED,KAAK,CAAC,OAAO,CAAC,UAAA,CAAC;YACb,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC;SAC/C,CAAC,CAAC;QAEH,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC;IAC5C,CAAC;IAED;;;;aAIgB,GAAG,CAAC,KAAa,EAAE,UAAkB,EAAE,SAAkB;QACvE,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,KAAK,GAAG,CAAC,KAAK,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAE/B,IAAI,UAAU,IAAI,IAAI,EAAE;YACtB,OAAO,CAAC,CAAC;SACV;QACD,IAAI,SAAS,IAAI,IAAI,EAAE;YACrB,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,kBAAkB,CAAC,SAAS,EAAE,CAAC,CAAC,GAAA,CAAC,CAAC;SAC/D;QACD,IAAM,kBAAkB,GAAG,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACrD,IAAI,kBAAkB,EAAE;YACtB,KAAK,CAAC,OAAO,CAAC,UAAA,CAAC;wCACJ,CAAC;oBACR,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,QAAQ,CAAC,OAAK,CAAG,CAAC,GAAA,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;;qBAEtE;oBACD,IAAM,mBAAmB,GAAG,kBAAkB,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,EAAE,OAAK,CAAG,CAAC,EAAE,CAAC,CAAC,CAAC;oBACtF,IAAI,MAAM,CAAC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;wBACvC,GAAG,IAAI,mBAAmB,CAAC;qBAC5B;;gBAPH,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,QAAQ,EAAE,CAAC,EAAE;0CAAzB,CAAC;;;iBAQT;aACF,CAAC,CAAC;SACJ;aAAM;YACL,KAAK,CAAC,OAAO,CAAC,UAAC,CAAC,IAAK,OAAA,GAAG,IAAI,kBAAkB,CAAC,UAAU,EAAE,CAAC,CAAC,GAAA,CAAC,CAAC;SAChE;QAED,OAAO,GAAG,CAAC;IACb,CAAC;IAED;;;;aAIgB,IAAI,CAAC,KAAa,EAAE,UAAkB;QACpD,KAAK,GAAG,CAAC,KAAK,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAC/B,UAAU,IAAI,UAAU,IAAI,EAAE,CAAC,CAAC;QAChC,IAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;QAC5B,IAAI,MAAM,KAAK,CAAC,EAAE;YAChB,OAAO,CAAC,CAAC;SACV;QACD,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,KAAK,CAAC,OAAO,CAAC,UAAC,CAAC;YACd,GAAG,IAAI,kBAAkB,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;SAC1C,CAAC,CAAC;QACH,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC;IAClC,CAAC;IAED;;;aAGgB,OAAO,CAAC,MAAc,EAAE,MAAc;QACpD,IAAM,GAAG,GAAG,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC;QAE9B,OAAO,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAM,GAAG,MAAG,GAAG,KAAK,CAAC;IAClD,CAAC;IAED;;;aAGgB,IAAI,CAAC,KAAa,EAAE,UAAkB,EAAE,IAAiB;QAAjB,qBAAA,EAAA,iBAAiB;QACvE,KAAK,GAAG,CAAC,KAAK,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC;YACvC,IAAM,KAAK,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CAAW,CAAC,CAAC,OAAO,EAAE,CAAC;YACpD,IAAM,KAAK,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CAAW,CAAC,CAAC,OAAO,EAAE,CAAC;YACpD,OAAO,KAAK,GAAG,KAAK,CAAC;SACtB,CAAC,CAAC;QACH,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,UAAU,IAAI,IAAI,EAAE;YAC1C,IAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;YAC/C,OAAO,kBAAkB,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;SACjD;QACD,OAAO,CAAC,CAAC;IACX,CAAC;IAED;;;aAGgB,GAAG,CAAC,KAAa,EAAE,SAAiB;QAClD,KAAK,GAAG,CAAC,KAAK,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,KAAK,CAAC,OAAO,CAAC,UAAA,IAAI;YAChB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAW,CAAC;gBAC3D,IAAI,CAAC,SAAS,CAAY,GAAG,GAAG,EAAE;gBACrC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAW,CAAC;aACjC;SACF,CAAC,CAAC;QACH,OAAO,GAAG,CAAC;IACb,CAAC;IAED;;;aAGgB,MAAM,CAAC,KAAa,EAAE,SAAiB;QACrD,KAAK,GAAG,CAAC,KAAK,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAM,OAAO,GACT,KAAK,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,SAAS,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAW,CAAC,GAAA,CAAC;aACpE,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,SAAS,CAAW,GAAA,CAAC;aAChC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,GAAG,CAAC,GAAA,CAAC;aACrB,MAAM,CAAC,UAAC,IAAI,EAAE,GAAG,EAAE,IAAI,IAAK,OAAA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,GAAA,CAAC,CAAC;QAEhE,OAAO,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;YACvC,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;YAC3B,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,MAAG,OAAO,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,CAAE,CAAC,GAAG,CAAC,CAAC;gBACnD,OAAO,CAAC,CAAC,QAAQ,CAAC,MAAG,OAAO,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,CAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBACpD,CAAC,CAAC;IACZ,CAAC;IAED;;;aAGgB,IAAI,CAAC,KAAa,EAAE,SAAiB;QACnD,KAAK,GAAG,CAAC,KAAK,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,QAAQ,GAAG,CAAC,CAAC;QACjB,IAAM,GAAG,GAA4B,EAAE,CAAC;QACxC,KAAK,CAAC,OAAO,CAAC,UAAA,CAAC;YACb,IAAM,KAAK,GAAG,CAAC,CAAC,SAAS,CAAW,CAAC;YACrC,IAAI,KAAK,IAAI,IAAI,EAAE;gBACjB,GAAG,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;aACtD;YACD,IAAI,GAAG,CAAC,KAAK,CAAC,GAAG,QAAQ,EAAE;gBACzB,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;aACvB;SACF,CAAC,CAAC;QACH,OAAO,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,QAAQ,GAAA,CAAC,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,GAAA,CAAC,CAAC;IACzE;;ICnvBA;;;;;;;;;;;;;;;;;;;;;aA0BgB,gBAAgB,CAAC,OAAoB;QACnD,IAAI,IAAI,GAAG,kBAAkB,CAAC,cAAc,CAAC;QAC7C,IAAI,OAAO,YAAY,KAAK,EAAE;YAC5B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAI,GAAM,IAAI,YAAO,OAAO,CAAC,CAAC,CAAC,aAAU,CAAC;aAC3C;SACF;aAAM,IAAI,OAAO,IAAI,IAAI,EAAE;YAC1B,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,UAAA,CAAC;gBAC5B,IAAI,GAAG,GAAQ,OAAO,CAAC,CAAC,CAAC,CAAC;gBAC1B,IAAI,GAAG,IAAI,IAAI,IAAI,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,KAAK,EAAE,IAAI,GAAG,YAAY,KAAK,EAAE;oBAC3E,IAAI,GAAG,YAAY,KAAK,EAAE;wBACxB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;4BACnC,GAAG,CAAC,CAAC,CAAC;gCACF,CAAC,GAAG,IAAI,IAAI,IAAI,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;yBACzF;qBACF;oBACD,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;iBAC3B;qBAAM;oBACL,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;iBACnB;gBACD,IAAI,GAAM,IAAI,YAAO,CAAC,WAAM,GAAG,OAAI,CAAC;aACrC,CAAC,CAAC;SACJ;QACD,OAAO,IAAI,CAAC;IACd;;IClDA;;;;;;;;;;;;;;;;;;;;;IAyBA;;;aAGgB,cAAc;QAC5B,OAAO,eAAe,CAAC,EAAC,SAAS,EAAE,OAAO,EAAC,CAAC,CAAC;IAC/C;;IC9BA;;;;;;;;;;;;;;;;;;;;;aAwBgB,mBAAmB,CAC/B,OAAe,EAAE,cAAwC,EAAE,MAAgB;QAC7E,IAAM,oBAAoB,GAAG,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACzD,IAAM,MAAM,GAAGA,gBAAQ,CAAC,OAAO,CAAC;aACZ,MAAM,CAAC,UAAC,KAAU,IAAK,OAAA,KAAK,CAAC,IAAI,IAAI,YAAY,IAAI,KAAK,CAAC,KAAK,IAAI,QAAQ,GAAA,CAAC;aAC7E,GAAG,CAAC,UAAC,KAAU,IAAK,OAAA,KAAK,CAAC,KAAK,GAAA,CAAC,CAAC;QACrD,MAAM,CAAC,OAAO,CAAC,UAAC,CAAM;YACpB,IAAI,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;gBACxC,OAAO,GAAG,OAAO,CAAC,OAAO,CACrB,IAAI,MAAM,CAAC,QAAM,CAAC,QAAK,EAAE,GAAG,CAAC,EAAK,CAAC,UAAK,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAG,CAAC,CAAC;aAC3F;SACF,CAAC,CAAC;QACH,OAAO,OAAO,CAAC;IACjB;;ICrCA;;;;;;;;;;;;;;;;;;;;;IA0BA,IAAI,aAAa,GAAQ,EAAE,CAAC;IAC5B,IAAI,mBAAmB,GAAG,IAAI,CAAC;aAEf,kBAAkB,CAAC,GAAW,EAAE,OAAoB;QAClE,IAAI,OAAO,KAAK,aAAa,EAAE;YAC7B,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;SAC1B;aAAM;YACL,aAAa,GAAG,OAAO,CAAC;YACxB,mBAAmB,GAAG,gBAAgB,CAAC,OAAO,CAAC,CAAC;SACjD;QACD,IAAI,GAAG,GAAG,mBAAmB,CAAC;QAC9B,IAAI;YACF,IAAI,CAAC,GAAG,IAAI,QAAQ,CAAC,KAAG,GAAG,GAAG,GAAK,CAAC,CAAC;YACrC,CAAC,EAAE,CAAC;YACJ,CAAC,GAAQ,IAAI,CAAC;YACd,OAAO,IAAI,CAAC;SACb;QAAC,OAAO,CAAC,EAAE;YACV,OAAO,KAAK,CAAC;SACd;IACH;;IC7CA;;;;;;;;;;;;;;;;;;;;;;ICAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}