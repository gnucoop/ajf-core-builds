{"version":3,"file":"core-page-slider.umd.js","sources":["../../src/core/page-slider/page-slider-module.ts","../../src/core/page-slider/page-slider.ts","../../src/core/page-slider/page-slider-item.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {NgModule} from '@angular/core';\n\nimport {AjfPageSliderItem} from './page-slider-item';\n\n@NgModule({\n  declarations: [\n    AjfPageSliderItem,\n  ],\n  exports: [\n    AjfPageSliderItem,\n  ]\n})\nexport class AjfPageSliderModule { }\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {animate, AnimationBuilder, style} from '@angular/animations';\nimport {\n  AfterContentInit, ChangeDetectorRef, ElementRef, EventEmitter, OnDestroy, QueryList, Renderer2\n} from '@angular/core';\n\nimport {Observable, Subscription} from 'rxjs';\nimport {filter, map, scan, throttleTime} from 'rxjs/operators';\n\nimport {coerceBooleanProperty} from '@ajf/core/utils';\n\nimport {AjfPageSliderItem} from './page-slider-item';\nimport {AjfPageSliderSlideOptions} from './page-slider-slide-options';\n\nexport type AjfPageSliderOrientation = 'horizontal' | 'vertical';\n\ninterface Point {\n  x: number;\n  y: number;\n  time: number;\n}\n\ninterface Movement {\n  velocityX: number;\n  velocityY: number;\n  deltaX: number;\n  deltaY: number;\n  deltaTime: number;\n}\n\ninterface MousheWheelMove {\n  dir: 'x' | 'y';\n  amount: number;\n}\n\nexport class AjfPageSlider implements AfterContentInit, OnDestroy {\n  body: ElementRef;\n  pages: QueryList<AjfPageSliderItem>;\n\n  private _pageScrollFinish: EventEmitter<void> = new EventEmitter<void>();\n  readonly pageScrollFinish: Observable<void> = this._pageScrollFinish.asObservable();\n\n  private _orientationChange: EventEmitter<AjfPageSliderOrientation>\n    = new EventEmitter<AjfPageSliderOrientation>();\n  readonly orientationChange: Observable<AjfPageSliderOrientation> =\n    this._orientationChange.asObservable();\n\n  duration = 300;\n\n  private _orientation: AjfPageSliderOrientation = 'horizontal';\n  get orientation(): AjfPageSliderOrientation { return this._orientation; }\n  set orientation(orientation: AjfPageSliderOrientation) {\n    if (this._orientation !== orientation) {\n      this._orientation = orientation;\n      this._cdr.markForCheck();\n      this._updateSize();\n      this._restoreCurrentPage();\n      this._orientationChange.emit(this._orientation);\n    }\n  }\n\n  private _fixedOrientation = false;\n  get fixedOrientation(): boolean { return this._fixedOrientation; }\n  set fixedOrientation(fixedOrientation: boolean) {\n    this._fixedOrientation = coerceBooleanProperty(fixedOrientation);\n    this._cdr.markForCheck();\n  }\n\n  private _currentPage = -1;\n  get currentPage(): number { return this._currentPage; }\n  set currentPage(currentPage: number) {\n    if (this.pages == null || currentPage < 0 || currentPage >= this.pages.length) { return; }\n    this._currentPage = currentPage;\n    this._doSlide();\n  }\n\n  private _hideNavigationButtons: boolean;\n  get hideNavigationButtons(): boolean { return this._hideNavigationButtons; }\n  set hideNavigationButtons(hnb: boolean) {\n    this._hideNavigationButtons = coerceBooleanProperty(hnb);\n    this._cdr.markForCheck();\n  }\n\n  private _animating = false;\n  private _pagesSub: Subscription = Subscription.EMPTY;\n\n  private _currentOrigin: Point | null;\n  private _mouseWheelEvt: EventEmitter<MousheWheelMove> = new EventEmitter<MousheWheelMove>();\n  private _mouseWheelSub: Subscription = Subscription.EMPTY;\n\n  constructor(\n    private _animationBuilder: AnimationBuilder,\n    private _cdr: ChangeDetectorRef,\n    private _renderer: Renderer2\n  ) {\n    this._mouseWheelSub = this._mouseWheelEvt.pipe(\n      map(evt => {\n        const page = this._getCurrentPage();\n        if (page == null) { return null; }\n        return {evt, res: page.setScroll(evt.dir, evt.amount, 0)};\n      }),\n      filter(r => r != null\n        && r.res === false\n        && (\n          (r.evt.dir === 'x' && this.orientation === 'horizontal')\n          || (r.evt.dir === 'y' && this.orientation === 'vertical')\n        )\n      ),\n      map(r => r!.evt.amount),\n      scan((acc, val) => {\n        if (acc === 0) { return val; }\n        if (acc / Math.abs(acc) !== val / Math.abs(val)) {return 0; }\n        return acc + val;\n      }, 0),\n      filter(val => !this._animating && Math.abs(val) > 150),\n      throttleTime(1500),\n    ).subscribe(val => {\n      this._mouseWheelEvt.emit({dir: 'x', amount: val > 0 ? -1 : + 1});\n      this.slide({dir: val > 0 ? 'back' : 'forward'});\n    });\n  }\n\n  ngAfterContentInit(): void {\n    this._onSlidesChange();\n    this._pagesSub = this.pages.changes.subscribe(() => this._onSlidesChange());\n  }\n\n  ngOnDestroy(): void {\n    this._pagesSub.unsubscribe();\n    this._mouseWheelEvt.complete();\n    this._mouseWheelSub.unsubscribe();\n    this._orientationChange.complete();\n  }\n\n  switchOrientation(): void {\n    if (this._orientation === 'horizontal') {\n      this.orientation = 'vertical';\n    } else {\n      this.orientation = 'horizontal';\n    }\n  }\n\n  slide(opts: AjfPageSliderSlideOptions): void {\n    if (this.pages == null) { return; }\n    if (opts.dir) {\n      if (opts.dir === 'back' || opts.dir === 'up' || opts.dir === 'left') {\n        this._slideBack();\n      } else if (opts.dir === 'forward' || opts.dir === 'down' || opts.dir === 'right') {\n        this._slideForward();\n      }\n    } else if (opts.to) {\n      this._slideTo(opts.to);\n    }\n  }\n\n  onMouseWheel(evt: WheelEvent): void {\n    const absDeltaX = Math.abs(evt.deltaX);\n    const absDeltaY = Math.abs(evt.deltaY);\n    if (absDeltaX === 0 && absDeltaY === 0) { return; }\n    if (absDeltaX > absDeltaY) {\n      this._mouseWheelEvt.emit({dir: 'x', amount: -evt.deltaX});\n    } else {\n      this._mouseWheelEvt.emit({dir: 'y', amount: -evt.deltaY});\n    }\n  }\n\n  onTouchStart(evt: TouchEvent): void {\n    if (evt.touches == null || evt.touches.length === 0 || this._animating) { return; }\n    this._currentOrigin = {\n      x: evt.touches[0].clientX,\n      y: evt.touches[0].clientY,\n      time: + new Date()\n    };\n  }\n\n  onTouchMove(evt: TouchEvent): void {\n    if (\n      evt.touches == null || evt.touches.length === 0\n      || this._currentOrigin == null || this._animating\n    ) { return; }\n    const point: Point = {\n      x: evt.touches[0].clientX,\n      y: evt.touches[0].clientY,\n      time: + new Date()\n    };\n    const movement = this._calculateMovement(point);\n    this._currentOrigin = point;\n\n    if (movement.velocityX === 0 && movement.velocityY === 0) { return; }\n    const absVelocityX = Math.abs(movement.velocityX);\n    const absVelocityY = Math.abs(movement.velocityY);\n    if (absVelocityX > absVelocityY) {\n      if (\n        this.orientation === 'horizontal' && absVelocityX > 1.5 && Math.abs(movement.deltaX) > 50\n      ) {\n        this._resetCurrentOrigin();\n        this.slide({dir: movement.velocityX < 0 ? 'forward' : 'back'});\n      } else {\n        const page = this._getCurrentPage();\n        if (page != null) {\n          page.setScroll('x', movement.deltaX, movement.deltaTime);\n        }\n      }\n    } else {\n      if (\n        this.orientation === 'vertical' && absVelocityY > 1.5 && Math.abs(movement.deltaY) > 50\n      ) {\n        this._resetCurrentOrigin();\n        this.slide({dir: movement.velocityY < 0 ? 'forward' : 'back'});\n      } else {\n        const page = this._getCurrentPage();\n        if (page != null) {\n          page.setScroll('y', movement.deltaY, movement.deltaTime);\n        }\n      }\n    }\n  }\n\n  onTouchEnd(): void {\n    this._resetCurrentOrigin();\n  }\n\n  isCurrentPageLong(): boolean {\n    const curPage = this._getCurrentPage();\n    if (curPage == null) { return false; }\n    return curPage.wrapper.nativeElement.clientHeight > curPage.content.nativeElement.clientHeight;\n  }\n\n  private _resetCurrentOrigin(): void {\n    this._currentOrigin = null;\n  }\n\n  private _getCurrentPage(): AjfPageSliderItem | null {\n    if (this.pages == null || this.currentPage < 0 || this.currentPage >= this.pages.length) {\n      return null;\n    }\n    return this.pages.toArray()[this.currentPage];\n  }\n\n  private _calculateMovement(point: Point): Movement {\n    const deltaX = point.x - this._currentOrigin!.x;\n    const deltaY = point.y - this._currentOrigin!.y;\n    const deltaTime = point.time - this._currentOrigin!.time;\n    return {\n      velocityX: deltaX / deltaTime,\n      deltaX,\n      velocityY: deltaY / deltaTime,\n      deltaY,\n      deltaTime,\n    };\n  }\n\n  private _slideBack(): void {\n    if (this._currentPage <= 0) { return; }\n    this.currentPage = this._currentPage - 1;\n  }\n\n  private _slideForward(): void {\n    if (this._currentPage >= this.pages.length) { return; }\n    this.currentPage = this._currentPage + 1;\n  }\n\n  private _slideTo(page: number): void {\n    if (page >= 0 && page < this.pages.length) {\n      this.currentPage = page;\n    }\n  }\n\n  private _doSlide(immediate = false): void {\n    if (this.body == null || this.pages == null || this._animating) { return; }\n    this._animating = true;\n    const animation = this._animationBuilder.build(animate(\n      immediate ? 0 : this.duration,\n      style({transform: this._getCurrentTranslation()})\n    ));\n\n    const player = animation.create(this.body.nativeElement);\n    player.onDone(() => {\n      this._animating = false;\n      this._pageScrollFinish.emit();\n    });\n    player.play();\n  }\n\n  private _getCurrentTranslation(): string {\n    const slideSize = 100 / this.pages.length;\n    const position = this._currentPage === -1 ? 0 : this._currentPage * slideSize;\n    const translation = this._orientation === 'vertical' ? 'Y' : 'X';\n    return `translate${translation}(-${position}%)`;\n  }\n\n  private _getProps(): {prop: string, removeProp: string} {\n    if (this._orientation === 'vertical') {\n      return {prop: 'height', removeProp: 'width'};\n    }\n    return {prop: 'width', removeProp: 'height'};\n  }\n\n  private _onSlidesChange(): void {\n    this._updateSize();\n  }\n\n  private _updateSize(): void {\n    if (this.body == null || this.pages == null) { return; }\n    const {prop, removeProp} = this._getProps();\n    this._renderer.setStyle(this.body.nativeElement, prop, `${this.pages.length * 100}%`);\n    this._renderer.setStyle(this.body.nativeElement, removeProp, null);\n    let curPage: number;\n    if (this.pages.length === 0) {\n      curPage = -1;\n    } else if (this._currentPage === -1) {\n      curPage = 0;\n    } else if (this._currentPage >= this.pages.length) {\n      curPage = this.pages.length - 1;\n    } else {\n      curPage = this._currentPage;\n    }\n    this._currentPage = curPage;\n    this._restoreCurrentPage();\n  }\n\n  private _restoreCurrentPage(): void {\n    this._doSlide(true);\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  ChangeDetectionStrategy, Component, ElementRef, EventEmitter,\n  OnDestroy, Output, Renderer2, ViewChild, ViewEncapsulation\n} from '@angular/core';\nimport {ResizeSensor} from 'css-element-queries';\nimport {Observable, Subscription} from 'rxjs';\nimport {debounceTime} from 'rxjs/operators';\n\nimport {AjfPageSliderItemScrollDirection} from './page-slider-item-scroll-direction';\n\n@Component({\n  moduleId: module.id,\n  selector: 'ajf-page-slider-item',\n  templateUrl: 'page-slider-item.html',\n  styleUrls: ['page-slider-item.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n})\nexport class AjfPageSliderItem implements OnDestroy {\n  @ViewChild('wrapper', {static: true}) wrapper: ElementRef;\n  @ViewChild('content', {static: true}) content: ElementRef;\n\n  private _scrollEvt = new EventEmitter<{x: number, y: number}>();\n  @Output()\n  readonly scroll: Observable<{x: number, y: number}> = this._scrollEvt.asObservable();\n\n  private _scrollX = 0;\n  private _scrollY = 0;\n  private _resizeSensor: ResizeSensor;\n  private _resizeEvent: EventEmitter<void> = new EventEmitter<void>();\n  private _resizeSub: Subscription = Subscription.EMPTY;\n\n  constructor(\n    private _el: ElementRef,\n    private _renderer: Renderer2,\n  ) {\n    this._resizeSensor = new ResizeSensor(_el.nativeElement, () => this._onResize());\n\n    this._resizeSub = this._resizeEvent.pipe(\n      debounceTime(300),\n    ).subscribe(() => this._fixScrollOnResize());\n  }\n\n  ngOnDestroy(): void {\n    if (this._resizeSensor) { this._resizeSensor.detach(); }\n    this._resizeSub.unsubscribe();\n    this._resizeEvent.complete();\n  }\n\n  setScroll(dir: AjfPageSliderItemScrollDirection,  amount: number, _duration: number): boolean {\n    if (this._el == null || this.wrapper == null || amount === 0) { return false; }\n    const el = this._el.nativeElement;\n    const wrapper = this.wrapper.nativeElement;\n    let containerSize, wrapperSize, currentScroll;\n    if (dir === 'x') {\n      containerSize = el.clientWidth;\n      wrapperSize = wrapper.clientWidth;\n      currentScroll = this._scrollX;\n    } else {\n      containerSize = el.clientHeight;\n      wrapperSize = wrapper.clientHeight;\n      currentScroll = this._scrollY;\n    }\n    const maxScroll = containerSize - wrapperSize;\n    if (\n      wrapperSize <= containerSize\n      || (currentScroll === maxScroll && amount < 0)\n      || (currentScroll === 0 && amount > 0)\n    ) { return false; }\n    if (amount < 0) {\n      if (dir === 'x') {\n        this._scrollX = Math.max(maxScroll, this._scrollX + amount);\n      } else {\n        this._scrollY = Math.max(maxScroll, this._scrollY + amount);\n      }\n    } else {\n      if (dir === 'x') {\n        this._scrollX = Math.min(0, this._scrollX + amount);\n      } else {\n        this._scrollY = Math.min(0, this._scrollY + amount);\n      }\n    }\n    this._renderer.setStyle(\n      wrapper, 'transform', `translate(${this._scrollX}px, ${this._scrollY}px)`\n    );\n    this._scrollEvt.emit({x: this._scrollX, y: this._scrollY});\n    return true;\n  }\n\n  private _onResize(): void {\n    this._resizeEvent.emit();\n  }\n\n  private _fixScrollOnResize(): void {\n    if (this.content == null || this.wrapper == null) { return; }\n    const content = this.content.nativeElement;\n    const wrapper = this.wrapper.nativeElement;\n    const maxScrollX = Math.min(0, content.clientWidth - wrapper.clientWidth);\n    const maxScrollY = Math.min(0, content.clientHeight - wrapper.clientHeight);\n    if (\n      maxScrollX !== 0 || maxScrollY !== 0\n      || (maxScrollX === 0 && this._scrollX !== 0)\n      || (maxScrollY === 0 && this._scrollY !== 0)\n    ) {\n      this._scrollX = Math.max(\n        maxScrollX, this._scrollX - (content.scrollLeft != null ? content.scrollLeft : 0));\n      this._scrollY = Math.max(\n        maxScrollY, this._scrollY - (content.scrollTop != null ? content.scrollTop : 0));\n      content.scrollTop = content.scrollLeft = 0;\n      this._renderer.setStyle(\n        wrapper, 'transform', `translate(${this._scrollX}px, ${this._scrollY}px)`\n      );\n      this._scrollEvt.emit({x: this._scrollX, y: this._scrollY});\n    }\n  }\n}\n"],"names":["NgModule","animate","style","coerceBooleanProperty","throttleTime","filter","scan","map","Subscription","EventEmitter","Output","ViewEncapsulation","ChangeDetectionStrategy","Component","debounceTime","ResizeSensor"],"mappings":"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"}