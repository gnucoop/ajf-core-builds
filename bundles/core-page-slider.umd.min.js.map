{"version":3,"sources":["src/core/core-page-slider.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ajf","core","pageSlider","ng","rxjs","operators","animations","cdk","coercion","this","AjfPageSliderItem","_el","_renderer","_this","_scrollEvt","EventEmitter","scroll","_scrollX","_scrollY","_resizeObserver","_resizeEvent","_resizeSub","Subscription","EMPTY","ResizeObserver","_onResize","observe","nativeElement","pipe","debounceTime","subscribe","_fixScrollOnResize","prototype","ngOnDestroy","unobserve","complete","unsubscribe","setScroll","dir","amount","_duration","wrapper","containerSize","wrapperSize","currentScroll","el","clientWidth","clientHeight","maxScroll","Math","max","min","setStyle","emit","x","y","content","maxScrollX","maxScrollY","scrollLeft","scrollTop","decorators","type","Component","args","selector","template","changeDetection","ChangeDetectionStrategy","OnPush","encapsulation","ViewEncapsulation","None","styles","ctorParameters","ElementRef","Renderer2","propDecorators","ViewChild","static","Output","AjfPageSliderModule","AjfPageSlider","_animationBuilder","_cdr","_pageScrollFinish","pageScrollFinish","_orientationChange","orientationChange","duration","_orientation","_fixedOrientation","_currentPage","_animating","_pagesSub","_mouseWheelEvt","_mouseWheelSub","map","evt","page","_getCurrentPage","res","filter","r","orientation","scan","acc","val","abs","throttleTime","slide","Object","defineProperty","get","set","markForCheck","_updateSize","_restoreCurrentPage","enumerable","configurable","fixedOrientation","coerceBooleanProperty","currentPage","pages","length","_doSlide","_hideNavigationButtons","hnb","ngAfterContentInit","_onSlidesChange","changes","switchOrientation","opts","_slideBack","_slideForward","to","_slideTo","onMouseWheel","event","deltaX","deltaY","absDeltaX","absDeltaY","onTouchStart","touches","_currentOrigin","clientX","clientY","time","Date","onTouchMove","point","movement","_calculateMovement","velocityX","velocityY","absVelocityX","absVelocityY","_resetCurrentOrigin","deltaTime","onTouchEnd","isCurrentPageLong","curPage","toArray","immediate","body","player","build","animate","style","transform","_getCurrentTranslation","create","onDone","play","_getProps","prop","removeProp","_a","Directive","AnimationBuilder","ChangeDetectorRef","ContentChildren","descendants","Input","hideNavigationButtons","NgModule","declarations","value"],"mappings":"CAAC,SAAUA,EAAQC,GACI,iBAAZC,SAA0C,oBAAXC,OAAyBF,EAAQC,QAASE,QAAQ,iBAAkBA,QAAQ,QAASA,QAAQ,kBAAmBA,QAAQ,uBAAwBA,QAAQ,0BAC5K,mBAAXC,QAAyBA,OAAOC,IAAMD,OAAO,wBAAyB,CAAC,UAAW,gBAAiB,OAAQ,iBAAkB,sBAAuB,yBAA0BJ,GAC3JA,IAAzBD,EAASA,GAAUO,MAAsBC,IAAMR,EAAOQ,KAAO,GAAIR,EAAOQ,IAAIC,KAAOT,EAAOQ,IAAIC,MAAQ,GAAIT,EAAOQ,IAAIC,KAAKC,WAAa,IAAKV,EAAOW,GAAGF,KAAMT,EAAOY,KAAMZ,EAAOY,KAAKC,UAAWb,EAAOW,GAAGG,WAAYd,EAAOW,GAAGI,IAAIC,UAHzO,CAIEC,MAAM,SAAWf,EAASO,EAAMG,EAAMC,EAAWC,EAAYE,GAAY;;;;;;;;;;;;;;;;;;;;;OAuBvE,IAAIE,EAAmC,WACnC,SAASA,EAAkBC,EAAKC,GAC5B,IAAIC,EAAQJ,KACZA,KAAKE,IAAMA,EACXF,KAAKG,UAAYA,EACjBH,KAAKK,WAAa,IAAIb,EAAKc,aAC3BN,KAAKO,OAASP,KAAKK,WACnBL,KAAKQ,SAAW,EAChBR,KAAKS,SAAW,EAChBT,KAAKU,gBAAkB,KACvBV,KAAKW,aAAe,IAAInB,EAAKc,aAC7BN,KAAKY,WAAajB,EAAKkB,aAAaC,MACN,oBAAnBC,iBACPf,KAAKU,gBAAkB,IAAIK,gBAAe,WAAc,OAAOX,EAAMY,eACrEhB,KAAKU,gBAAgBO,QAAQjB,KAAKE,IAAIgB,gBAE1ClB,KAAKY,WAAaZ,KAAKW,aAClBQ,KAAKvB,EAAUwB,aAAa,MAC5BC,WAAU,WAAc,OAAOjB,EAAMkB,wBAwE9C,OAtEArB,EAAkBsB,UAAUC,YAAc,WAClCxB,KAAKU,iBACLV,KAAKU,gBAAgBe,UAAUzB,KAAKE,IAAIgB,eAE5ClB,KAAKW,aAAae,WAClB1B,KAAKY,WAAWe,eAEpB1B,EAAkBsB,UAAUK,UAAY,SAAUC,EAAKC,EAAQC,GAC3D,GAAgB,MAAZ/B,KAAKE,KAA+B,MAAhBF,KAAKgC,SAA8B,IAAXF,EAC5C,OAAO,EAEX,IAEIG,EAAeC,EAAaC,EAF5BC,EAAKpC,KAAKE,IAAIgB,cACdc,EAAUhC,KAAKgC,QAAQd,cAEf,MAARW,GACAI,EAAgBG,EAAGC,YACnBH,EAAcF,EAAQK,YACtBF,EAAgBnC,KAAKQ,WAGrByB,EAAgBG,EAAGE,aACnBJ,EAAcF,EAAQM,aACtBH,EAAgBnC,KAAKS,UAEzB,IAAI8B,EAAYN,EAAgBC,EAChC,QAAIA,GAAeD,GAAkBE,IAAkBI,GAAaT,EAAS,GACtD,IAAlBK,GAAuBL,EAAS,IAGjCA,EAAS,EACG,MAARD,EACA7B,KAAKQ,SAAWgC,KAAKC,IAAIF,EAAWvC,KAAKQ,SAAWsB,GAGpD9B,KAAKS,SAAW+B,KAAKC,IAAIF,EAAWvC,KAAKS,SAAWqB,GAI5C,MAARD,EACA7B,KAAKQ,SAAWgC,KAAKE,IAAI,EAAG1C,KAAKQ,SAAWsB,GAG5C9B,KAAKS,SAAW+B,KAAKE,IAAI,EAAG1C,KAAKS,SAAWqB,GAGpD9B,KAAKG,UAAUwC,SAASX,EAAS,YAAa,aAAehC,KAAKQ,SAAW,OAASR,KAAKS,SAAW,OACtGT,KAAKK,WAAWuC,KAAK,CAAEC,EAAG7C,KAAKQ,SAAUsC,EAAG9C,KAAKS,WAC1C,KAEXR,EAAkBsB,UAAUP,UAAY,WACpChB,KAAKW,aAAaiC,QAEtB3C,EAAkBsB,UAAUD,mBAAqB,WAC7C,GAAoB,MAAhBtB,KAAK+C,SAAmC,MAAhB/C,KAAKgC,QAAjC,CAGA,IAAIe,EAAU/C,KAAK+C,QAAQ7B,cACvBc,EAAUhC,KAAKgC,QAAQd,cACvB8B,EAAaR,KAAKE,IAAI,EAAGK,EAAQV,YAAcL,EAAQK,aACvDY,EAAaT,KAAKE,IAAI,EAAGK,EAAQT,aAAeN,EAAQM,eACzC,IAAfU,GAAmC,IAAfC,GAAoC,IAAfD,GAAsC,IAAlBhD,KAAKQ,UAClD,IAAfyC,GAAsC,IAAlBjD,KAAKS,YAC1BT,KAAKQ,SAAWgC,KAAKC,IAAIO,EAAYhD,KAAKQ,UAAkC,MAAtBuC,EAAQG,WAAqBH,EAAQG,WAAa,IACxGlD,KAAKS,SACD+B,KAAKC,IAAIQ,EAAYjD,KAAKS,UAAiC,MAArBsC,EAAQI,UAAoBJ,EAAQI,UAAY,IAC1FJ,EAAQI,UAAYJ,EAAQG,WAAa,EACzClD,KAAKG,UAAUwC,SAASX,EAAS,YAAa,aAAehC,KAAKQ,SAAW,OAASR,KAAKS,SAAW,OACtGT,KAAKK,WAAWuC,KAAK,CAAEC,EAAG7C,KAAKQ,SAAUsC,EAAG9C,KAAKS,cAGlDR,EA1F2B,GA4FtCA,EAAkBmD,WAAa,CAC3B,CAAEC,KAAM7D,EAAK8D,UAAWC,KAAM,CAAC,CACnBC,SAAU,uBACVC,SAAU,wKACVC,gBAAiBlE,EAAKmE,wBAAwBC,OAC9CC,cAAerE,EAAKsE,kBAAkBC,KACtCC,OAAQ,CAAC,udAGzB/D,EAAkBgE,eAAiB,WAAc,MAAO,CACpD,CAAEZ,KAAM7D,EAAK0E,YACb,CAAEb,KAAM7D,EAAK2E,aAEjBlE,EAAkBmE,eAAiB,CAC/BpC,QAAS,CAAC,CAAEqB,KAAM7D,EAAK6E,UAAWd,KAAM,CAAC,UAAW,CAAEe,QAAQ,MAC9DvB,QAAS,CAAC,CAAEM,KAAM7D,EAAK6E,UAAWd,KAAM,CAAC,UAAW,CAAEe,QAAQ,MAC9D/D,OAAQ,CAAC,CAAE8C,KAAM7D,EAAK+E;;;;;;;;;;;;;;;;;;;;;;AAwB1B,IAkVIC,EAlVAC,EAA+B,WAC/B,SAASA,EAAcC,EAAmBC,EAAMxE,GAC5C,IAAIC,EAAQJ,KACZA,KAAK0E,kBAAoBA,EACzB1E,KAAK2E,KAAOA,EACZ3E,KAAKG,UAAYA,EACjBH,KAAK4E,kBAAoB,IAAIpF,EAAKc,aAClCN,KAAK6E,iBAAmB7E,KAAK4E,kBAC7B5E,KAAK8E,mBAAqB,IAAItF,EAAKc,aACnCN,KAAK+E,kBAAoB/E,KAAK8E,mBAC9B9E,KAAKgF,SAAW,IAChBhF,KAAKiF,aAAe,aACpBjF,KAAKkF,mBAAoB,EACzBlF,KAAKmF,cAAgB,EACrBnF,KAAKoF,YAAa,EAClBpF,KAAKqF,UAAY1F,EAAKkB,aAAaC,MACnCd,KAAKsF,eAAiB,IAAI9F,EAAKc,aAC/BN,KAAKuF,eAAiB5F,EAAKkB,aAAaC,MACxCd,KAAKuF,eACDvF,KAAKsF,eACAnE,KAAKvB,EAAU4F,KAAI,SAAUC,GAC9B,IAAIC,EAAOtF,EAAMuF,kBACjB,OAAY,MAARD,EACO,KAEJ,CAAED,IAAKA,EAAKG,IAAKF,EAAK9D,UAAU6D,EAAI5D,IAAK4D,EAAI3D,OAAQ,OAC5DlC,EAAUiG,QAAO,SAAUC,GAAK,OAAY,MAALA,IAAuB,IAAVA,EAAEF,MACtC,MAAdE,EAAEL,IAAI5D,KAAqC,eAAtBzB,EAAM2F,aACV,MAAdD,EAAEL,IAAI5D,KAAqC,aAAtBzB,EAAM2F,gBAAkCnG,EAAU4F,KAAI,SAAUM,GAAK,OAAOA,EAAEL,IAAI3D,UAAYlC,EAAUoG,MAAK,SAAUC,EAAKC,GACtJ,OAAY,IAARD,EACOC,EAEPD,EAAMzD,KAAK2D,IAAIF,IAASC,EAAM1D,KAAK2D,IAAID,GAChC,EAEJD,EAAMC,IACd,GAAItG,EAAUiG,QAAO,SAAUK,GAAO,OAAQ9F,EAAMgF,YAAc5C,KAAK2D,IAAID,GAAO,OAAStG,EAAUwG,aAAa,OAChH/E,WAAU,SAAU6E,GACrB9F,EAAMkF,eAAe1C,KAAK,CAAEf,IAAK,IAAKC,OAAQoE,EAAM,GAAK,EAAI,IAC7D9F,EAAMiG,MAAM,CAAExE,IAAKqE,EAAM,EAAI,OAAS,eAgQlD,OA7PAI,OAAOC,eAAe9B,EAAclD,UAAW,cAAe,CAC1DiF,IAAK,WACD,OAAOxG,KAAKiF,cAEhBwB,IAAK,SAAUV,GACP/F,KAAKiF,eAAiBc,IACtB/F,KAAKiF,aAAec,EACpB/F,KAAK2E,KAAK+B,eACV1G,KAAK2G,cACL3G,KAAK4G,sBACL5G,KAAK8E,mBAAmBlC,KAAK5C,KAAKiF,gBAG1C4B,YAAY,EACZC,cAAc,IAElBR,OAAOC,eAAe9B,EAAclD,UAAW,mBAAoB,CAC/DiF,IAAK,WACD,OAAOxG,KAAKkF,mBAEhBuB,IAAK,SAAUM,GACX/G,KAAKkF,kBAAoBnF,EAASiH,sBAAsBD,GACxD/G,KAAK2E,KAAK+B,gBAEdG,YAAY,EACZC,cAAc,IAElBR,OAAOC,eAAe9B,EAAclD,UAAW,cAAe,CAC1DiF,IAAK,WACD,OAAOxG,KAAKmF,cAEhBsB,IAAK,SAAUQ,GACO,MAAdjH,KAAKkH,OAAiBD,EAAc,GAAKA,GAAejH,KAAKkH,MAAMC,SAGvEnH,KAAKmF,aAAe8B,EACpBjH,KAAKoH,aAETP,YAAY,EACZC,cAAc,IAElBR,OAAOC,eAAe9B,EAAclD,UAAW,wBAAyB,CACpEiF,IAAK,WACD,OAAOxG,KAAKqH,wBAEhBZ,IAAK,SAAUa,GACXtH,KAAKqH,uBAAyBtH,EAASiH,sBAAsBM,GAC7DtH,KAAK2E,KAAK+B,gBAEdG,YAAY,EACZC,cAAc,IAElBrC,EAAclD,UAAUgG,mBAAqB,WACzC,IAAInH,EAAQJ,KACZA,KAAKwH,kBACLxH,KAAKqF,UAAYrF,KAAKkH,MAAMO,QAAQpG,WAAU,WAAc,OAAOjB,EAAMoH,sBAE7E/C,EAAclD,UAAUC,YAAc,WAClCxB,KAAKqF,UAAU1D,cACf3B,KAAKsF,eAAe5D,WACpB1B,KAAKuF,eAAe5D,cACpB3B,KAAK8E,mBAAmBpD,YAE5B+C,EAAclD,UAAUmG,kBAAoB,WAEpC1H,KAAK+F,YADiB,eAAtB/F,KAAKiF,aACc,WAGA,cAG3BR,EAAclD,UAAU8E,MAAQ,SAAUsB,GACpB,MAAd3H,KAAKkH,QAGLS,EAAK9F,IACY,SAAb8F,EAAK9F,KAA+B,OAAb8F,EAAK9F,KAA6B,SAAb8F,EAAK9F,IACjD7B,KAAK4H,aAEa,YAAbD,EAAK9F,KAAkC,SAAb8F,EAAK9F,KAA+B,UAAb8F,EAAK9F,KAC3D7B,KAAK6H,gBAGO,MAAXF,EAAKG,IACV9H,KAAK+H,SAASJ,EAAKG,MAG3BrD,EAAclD,UAAUyG,aAAe,SAAUC,GAC7C,IAAIxC,EAAMwC,EACV,GAAkB,MAAdxC,EAAIyC,QAAgC,MAAdzC,EAAI0C,OAA9B,CAGA,IAAIC,EAAY5F,KAAK2D,IAAIV,EAAIyC,QACzBG,EAAY7F,KAAK2D,IAAIV,EAAI0C,QACX,IAAdC,GAAiC,IAAdC,GAInBrI,KAAKsF,eAAe1C,KADpBwF,EAAYC,EACa,CAAExG,IAAK,IAAKC,QAAS2D,EAAIyC,QAGzB,CAAErG,IAAK,IAAKC,QAAS2D,EAAI0C,WAG1D1D,EAAclD,UAAU+G,aAAe,SAAU7C,GAC1B,MAAfA,EAAI8C,SAA0C,IAAvB9C,EAAI8C,QAAQpB,QAAgBnH,KAAKoF,aAG5DpF,KAAKwI,eAAiB,CAAE3F,EAAG4C,EAAI8C,QAAQ,GAAGE,QAAS3F,EAAG2C,EAAI8C,QAAQ,GAAGG,QAASC,MAAO,IAAIC,QAE7FnE,EAAclD,UAAUsH,YAAc,SAAUpD,GAC5C,GAAmB,MAAfA,EAAI8C,SAA0C,IAAvB9C,EAAI8C,QAAQpB,QAAuC,MAAvBnH,KAAKwI,iBACxDxI,KAAKoF,WADT,CAIA,IAAI0D,EAAQ,CAAEjG,EAAG4C,EAAI8C,QAAQ,GAAGE,QAAS3F,EAAG2C,EAAI8C,QAAQ,GAAGG,QAASC,MAAO,IAAIC,MAC3EG,EAAW/I,KAAKgJ,mBAAmBF,GAEvC,GADA9I,KAAKwI,eAAiBM,EACK,IAAvBC,EAASE,WAA0C,IAAvBF,EAASG,UAAzC,CAGA,IAqBYxD,EArBRyD,EAAe3G,KAAK2D,IAAI4C,EAASE,WACjCG,EAAe5G,KAAK2D,IAAI4C,EAASG,WACjCC,EAAeC,EACU,eAArBpJ,KAAK+F,aAAgCoD,EAAe,KACpD3G,KAAK2D,IAAI4C,EAASb,QAAU,IAC5BlI,KAAKqJ,sBACLrJ,KAAKqG,MAAM,CAAExE,IAAKkH,EAASE,UAAY,EAAI,UAAY,UAI3C,OADRvD,EAAO1F,KAAK2F,oBAEZD,EAAK9D,UAAU,IAAKmH,EAASb,OAAQa,EAASO,WAK7B,aAArBtJ,KAAK+F,aAA8BqD,EAAe,KAAO5G,KAAK2D,IAAI4C,EAASZ,QAAU,IACrFnI,KAAKqJ,sBACLrJ,KAAKqG,MAAM,CAAExE,IAAKkH,EAASG,UAAY,EAAI,UAAY,UAI3C,OADRxD,EAAO1F,KAAK2F,oBAEZD,EAAK9D,UAAU,IAAKmH,EAASZ,OAAQY,EAASO,cAK9D7E,EAAclD,UAAUgI,WAAa,WACjCvJ,KAAKqJ,uBAET5E,EAAclD,UAAUiI,kBAAoB,WACxC,IAAIC,EAAUzJ,KAAK2F,kBACnB,OAAe,MAAX8D,GAGGA,EAAQzH,QAAQd,cAAcoB,aAAemH,EAAQ1G,QAAQ7B,cAAcoB,cAEtFmC,EAAclD,UAAU8H,oBAAsB,WAC1CrJ,KAAKwI,eAAiB,MAE1B/D,EAAclD,UAAUoE,gBAAkB,WACtC,OAAkB,MAAd3F,KAAKkH,OAAiBlH,KAAKiH,YAAc,GAAKjH,KAAKiH,aAAejH,KAAKkH,MAAMC,OACtE,KAEJnH,KAAKkH,MAAMwC,UAAU1J,KAAKiH,cAErCxC,EAAclD,UAAUyH,mBAAqB,SAAUF,GACnD,IAAIZ,EAASY,EAAMjG,EAAI7C,KAAKwI,eAAe3F,EACvCsF,EAASW,EAAMhG,EAAI9C,KAAKwI,eAAe1F,EACvCwG,EAAYR,EAAMH,KAAO3I,KAAKwI,eAAeG,KACjD,MAAO,CACHM,UAAWf,EAASoB,EACpBpB,OAAQA,EACRgB,UAAWf,EAASmB,EACpBnB,OAAQA,EACRmB,UAAWA,IAGnB7E,EAAclD,UAAUqG,WAAa,WAC7B5H,KAAKmF,cAAgB,IAGzBnF,KAAKiH,YAAcjH,KAAKmF,aAAe,IAE3CV,EAAclD,UAAUsG,cAAgB,WAChC7H,KAAKmF,cAAgBnF,KAAKkH,MAAMC,SAGpCnH,KAAKiH,YAAcjH,KAAKmF,aAAe,IAE3CV,EAAclD,UAAUwG,SAAW,SAAUrC,GACrCA,GAAQ,GAAKA,EAAO1F,KAAKkH,MAAMC,SAC/BnH,KAAKiH,YAAcvB,IAG3BjB,EAAclD,UAAU6F,SAAW,SAAUuC,GACzC,IAAIvJ,EAAQJ,KAEZ,QADkB,IAAd2J,IAAwBA,GAAY,GACvB,MAAb3J,KAAK4J,MAA8B,MAAd5J,KAAKkH,QAAiBlH,KAAKoF,WAApD,CAGApF,KAAKoF,YAAa,EAClB,IACIyE,EADY7J,KAAK0E,kBAAkBoF,MAAMjK,EAAWkK,QAAQJ,EAAY,EAAI3J,KAAKgF,SAAUnF,EAAWmK,MAAM,CAAEC,UAAWjK,KAAKkK,6BAC3GC,OAAOnK,KAAK4J,KAAK1I,eACxC2I,EAAOO,QAAO,WACVhK,EAAMgF,YAAa,EACnBhF,EAAMwE,kBAAkBhC,UAE5BiH,EAAOQ,SAEX5F,EAAclD,UAAU2I,uBAAyB,WAI7C,MAAO,aADiC,aAAtBlK,KAAKiF,aAA8B,IAAM,KACxB,OAFG,IAAvBjF,KAAKmF,aAAsB,EAAInF,KAAKmF,cADnC,IAAMnF,KAAKkH,MAAMC,SAGoB,MAEzD1C,EAAclD,UAAU+I,UAAY,WAChC,MAA0B,aAAtBtK,KAAKiF,aACE,CAAEsF,KAAM,SAAUC,WAAY,SAElC,CAAED,KAAM,QAASC,WAAY,WAExC/F,EAAclD,UAAUiG,gBAAkB,WACtCxH,KAAK2G,eAETlC,EAAclD,UAAUoF,YAAc,WAClC,GAAiB,MAAb3G,KAAK4J,MAA8B,MAAd5J,KAAKkH,MAA9B,CAGA,IAAIuD,EAAKzK,KAAKsK,YAA6BE,EAAaC,EAAGD,WAC3DxK,KAAKG,UAAUwC,SAAS3C,KAAK4J,KAAK1I,cADAuJ,EAAGF,KACsC,IAApBvK,KAAKkH,MAAMC,OAAe,KACjFnH,KAAKG,UAAUwC,SAAS3C,KAAK4J,KAAK1I,cAAesJ,EAAY,MAc7DxK,KAAKmF,aAZqB,IAAtBnF,KAAKkH,MAAMC,QACA,GAEiB,IAAvBnH,KAAKmF,aACA,EAELnF,KAAKmF,cAAgBnF,KAAKkH,MAAMC,OAC3BnH,KAAKkH,MAAMC,OAAS,EAGpBnH,KAAKmF,aAGnBnF,KAAK4G,wBAETnC,EAAclD,UAAUqF,oBAAsB,WAC1C5G,KAAKoH,UAAS,IAEX3C,EAvSuB,GAySlCA,EAAcrB,WAAa,CACvB,CAAEC,KAAM7D,EAAKkL,YAEjBjG,EAAcR,eAAiB,WAAc,MAAO,CAChD,CAAEZ,KAAMxD,EAAW8K,kBACnB,CAAEtH,KAAM7D,EAAKoL,mBACb,CAAEvH,KAAM7D,EAAK2E,aAEjBM,EAAcL,eAAiB,CAC3BwF,KAAM,CAAC,CAAEvG,KAAM7D,EAAK6E,UAAWd,KAAM,CAAC,OAAQ,CAAEe,QAAQ,MACxD4C,MAAO,CAAC,CAAE7D,KAAM7D,EAAKqL,gBAAiBtH,KAAM,CAACtD,EAAmB,CAAE6K,aAAa,MAC/EjG,iBAAkB,CAAC,CAAExB,KAAM7D,EAAK+E,SAChCQ,kBAAmB,CAAC,CAAE1B,KAAM7D,EAAK+E,SACjCS,SAAU,CAAC,CAAE3B,KAAM7D,EAAKuL,QACxBhF,YAAa,CAAC,CAAE1C,KAAM7D,EAAKuL,QAC3BhE,iBAAkB,CAAC,CAAE1D,KAAM7D,EAAKuL,QAChC9D,YAAa,CAAC,CAAE5D,KAAM7D,EAAKuL,QAC3BC,sBAAuB,CAAC,CAAE3H,KAAM7D,EAAKuL,UAwBrCvG,EACA,SAASA,OAIOpB,WAAa,CAC7B,CAAEC,KAAM7D,EAAKyL,SAAU1H,KAAM,CAAC,CAClB2H,aAAc,CACVjL,GAEJhB,QAAS,CACLgB;;;;;;;;;;;;;;;;;;;;;;AA+BpBhB,EAAQwF,cAAgBA,EACxBxF,EAAQgB,kBAAoBA,EAC5BhB,EAAQuF,oBAAsBA,EAE9B8B,OAAOC,eAAetH,EAAS,aAAc,CAAEkM,OAAO","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs'), require('rxjs/operators'), require('@angular/animations'), require('@angular/cdk/coercion')) :\n    typeof define === 'function' && define.amd ? define('@ajf/core/page-slider', ['exports', '@angular/core', 'rxjs', 'rxjs/operators', '@angular/animations', '@angular/cdk/coercion'], factory) :\n    (global = global || self, factory((global.ajf = global.ajf || {}, global.ajf.core = global.ajf.core || {}, global.ajf.core.pageSlider = {}), global.ng.core, global.rxjs, global.rxjs.operators, global.ng.animations, global.ng.cdk.coercion));\n}(this, (function (exports, core, rxjs, operators, animations, coercion) { 'use strict';\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfPageSliderItem = /** @class */ (function () {\n        function AjfPageSliderItem(_el, _renderer) {\n            var _this = this;\n            this._el = _el;\n            this._renderer = _renderer;\n            this._scrollEvt = new core.EventEmitter();\n            this.scroll = this._scrollEvt;\n            this._scrollX = 0;\n            this._scrollY = 0;\n            this._resizeObserver = null;\n            this._resizeEvent = new core.EventEmitter();\n            this._resizeSub = rxjs.Subscription.EMPTY;\n            if (typeof ResizeObserver !== 'undefined') {\n                this._resizeObserver = new ResizeObserver(function () { return _this._onResize(); });\n                this._resizeObserver.observe(this._el.nativeElement);\n            }\n            this._resizeSub = this._resizeEvent\n                .pipe(operators.debounceTime(300))\n                .subscribe(function () { return _this._fixScrollOnResize(); });\n        }\n        AjfPageSliderItem.prototype.ngOnDestroy = function () {\n            if (this._resizeObserver) {\n                this._resizeObserver.unobserve(this._el.nativeElement);\n            }\n            this._resizeEvent.complete();\n            this._resizeSub.unsubscribe();\n        };\n        AjfPageSliderItem.prototype.setScroll = function (dir, amount, _duration) {\n            if (this._el == null || this.wrapper == null || amount === 0) {\n                return false;\n            }\n            var el = this._el.nativeElement;\n            var wrapper = this.wrapper.nativeElement;\n            var containerSize, wrapperSize, currentScroll;\n            if (dir === 'x') {\n                containerSize = el.clientWidth;\n                wrapperSize = wrapper.clientWidth;\n                currentScroll = this._scrollX;\n            }\n            else {\n                containerSize = el.clientHeight;\n                wrapperSize = wrapper.clientHeight;\n                currentScroll = this._scrollY;\n            }\n            var maxScroll = containerSize - wrapperSize;\n            if (wrapperSize <= containerSize || (currentScroll === maxScroll && amount < 0) ||\n                (currentScroll === 0 && amount > 0)) {\n                return false;\n            }\n            if (amount < 0) {\n                if (dir === 'x') {\n                    this._scrollX = Math.max(maxScroll, this._scrollX + amount);\n                }\n                else {\n                    this._scrollY = Math.max(maxScroll, this._scrollY + amount);\n                }\n            }\n            else {\n                if (dir === 'x') {\n                    this._scrollX = Math.min(0, this._scrollX + amount);\n                }\n                else {\n                    this._scrollY = Math.min(0, this._scrollY + amount);\n                }\n            }\n            this._renderer.setStyle(wrapper, 'transform', \"translate(\" + this._scrollX + \"px, \" + this._scrollY + \"px)\");\n            this._scrollEvt.emit({ x: this._scrollX, y: this._scrollY });\n            return true;\n        };\n        AjfPageSliderItem.prototype._onResize = function () {\n            this._resizeEvent.emit();\n        };\n        AjfPageSliderItem.prototype._fixScrollOnResize = function () {\n            if (this.content == null || this.wrapper == null) {\n                return;\n            }\n            var content = this.content.nativeElement;\n            var wrapper = this.wrapper.nativeElement;\n            var maxScrollX = Math.min(0, content.clientWidth - wrapper.clientWidth);\n            var maxScrollY = Math.min(0, content.clientHeight - wrapper.clientHeight);\n            if (maxScrollX !== 0 || maxScrollY !== 0 || (maxScrollX === 0 && this._scrollX !== 0) ||\n                (maxScrollY === 0 && this._scrollY !== 0)) {\n                this._scrollX = Math.max(maxScrollX, this._scrollX - (content.scrollLeft != null ? content.scrollLeft : 0));\n                this._scrollY =\n                    Math.max(maxScrollY, this._scrollY - (content.scrollTop != null ? content.scrollTop : 0));\n                content.scrollTop = content.scrollLeft = 0;\n                this._renderer.setStyle(wrapper, 'transform', \"translate(\" + this._scrollX + \"px, \" + this._scrollY + \"px)\");\n                this._scrollEvt.emit({ x: this._scrollX, y: this._scrollY });\n            }\n        };\n        return AjfPageSliderItem;\n    }());\n    AjfPageSliderItem.decorators = [\n        { type: core.Component, args: [{\n                    selector: 'ajf-page-slider-item',\n                    template: \"<div #content class=\\\"ajf-page-slider-item-content\\\">\\n  <div #wrapper class=\\\"ajf-page-slider-item-content-wrapper\\\">\\n    <ng-content></ng-content>\\n  </div>\\n</div>\\n\",\n                    changeDetection: core.ChangeDetectionStrategy.OnPush,\n                    encapsulation: core.ViewEncapsulation.None,\n                    styles: [\"ajf-page-slider-item{display:block;position:relative}ajf-page-slider-item .ajf-page-slider-item-content{position:absolute;top:0;right:0;bottom:0;left:0;padding:0;margin:0;display:flex;align-items:flex-start;justify-content:flex-start;overflow:hidden;box-sizing:border-box}ajf-page-slider-item .ajf-page-slider-item-content .ajf-page-slider-item-content-wrapper{flex:1 1 auto;display:flex;align-items:center;justify-content:center;min-width:100%;min-height:100%}\\n\"]\n                },] }\n    ];\n    AjfPageSliderItem.ctorParameters = function () { return [\n        { type: core.ElementRef },\n        { type: core.Renderer2 }\n    ]; };\n    AjfPageSliderItem.propDecorators = {\n        wrapper: [{ type: core.ViewChild, args: ['wrapper', { static: true },] }],\n        content: [{ type: core.ViewChild, args: ['content', { static: true },] }],\n        scroll: [{ type: core.Output }]\n    };\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfPageSlider = /** @class */ (function () {\n        function AjfPageSlider(_animationBuilder, _cdr, _renderer) {\n            var _this = this;\n            this._animationBuilder = _animationBuilder;\n            this._cdr = _cdr;\n            this._renderer = _renderer;\n            this._pageScrollFinish = new core.EventEmitter();\n            this.pageScrollFinish = this._pageScrollFinish;\n            this._orientationChange = new core.EventEmitter();\n            this.orientationChange = this._orientationChange;\n            this.duration = 300;\n            this._orientation = 'horizontal';\n            this._fixedOrientation = false;\n            this._currentPage = -1;\n            this._animating = false;\n            this._pagesSub = rxjs.Subscription.EMPTY;\n            this._mouseWheelEvt = new core.EventEmitter();\n            this._mouseWheelSub = rxjs.Subscription.EMPTY;\n            this._mouseWheelSub =\n                this._mouseWheelEvt\n                    .pipe(operators.map(function (evt) {\n                    var page = _this._getCurrentPage();\n                    if (page == null) {\n                        return null;\n                    }\n                    return { evt: evt, res: page.setScroll(evt.dir, evt.amount, 0) };\n                }), operators.filter(function (r) { return r != null && r.res === false &&\n                    ((r.evt.dir === 'x' && _this.orientation === 'horizontal') ||\n                        (r.evt.dir === 'y' && _this.orientation === 'vertical')); }), operators.map(function (r) { return r.evt.amount; }), operators.scan(function (acc, val) {\n                    if (acc === 0) {\n                        return val;\n                    }\n                    if (acc / Math.abs(acc) !== val / Math.abs(val)) {\n                        return 0;\n                    }\n                    return acc + val;\n                }, 0), operators.filter(function (val) { return !_this._animating && Math.abs(val) > 150; }), operators.throttleTime(1500))\n                    .subscribe(function (val) {\n                    _this._mouseWheelEvt.emit({ dir: 'x', amount: val > 0 ? -1 : +1 });\n                    _this.slide({ dir: val > 0 ? 'back' : 'forward' });\n                });\n        }\n        Object.defineProperty(AjfPageSlider.prototype, \"orientation\", {\n            get: function () {\n                return this._orientation;\n            },\n            set: function (orientation) {\n                if (this._orientation !== orientation) {\n                    this._orientation = orientation;\n                    this._cdr.markForCheck();\n                    this._updateSize();\n                    this._restoreCurrentPage();\n                    this._orientationChange.emit(this._orientation);\n                }\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfPageSlider.prototype, \"fixedOrientation\", {\n            get: function () {\n                return this._fixedOrientation;\n            },\n            set: function (fixedOrientation) {\n                this._fixedOrientation = coercion.coerceBooleanProperty(fixedOrientation);\n                this._cdr.markForCheck();\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfPageSlider.prototype, \"currentPage\", {\n            get: function () {\n                return this._currentPage;\n            },\n            set: function (currentPage) {\n                if (this.pages == null || currentPage < 0 || currentPage >= this.pages.length) {\n                    return;\n                }\n                this._currentPage = currentPage;\n                this._doSlide();\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(AjfPageSlider.prototype, \"hideNavigationButtons\", {\n            get: function () {\n                return this._hideNavigationButtons;\n            },\n            set: function (hnb) {\n                this._hideNavigationButtons = coercion.coerceBooleanProperty(hnb);\n                this._cdr.markForCheck();\n            },\n            enumerable: false,\n            configurable: true\n        });\n        AjfPageSlider.prototype.ngAfterContentInit = function () {\n            var _this = this;\n            this._onSlidesChange();\n            this._pagesSub = this.pages.changes.subscribe(function () { return _this._onSlidesChange(); });\n        };\n        AjfPageSlider.prototype.ngOnDestroy = function () {\n            this._pagesSub.unsubscribe();\n            this._mouseWheelEvt.complete();\n            this._mouseWheelSub.unsubscribe();\n            this._orientationChange.complete();\n        };\n        AjfPageSlider.prototype.switchOrientation = function () {\n            if (this._orientation === 'horizontal') {\n                this.orientation = 'vertical';\n            }\n            else {\n                this.orientation = 'horizontal';\n            }\n        };\n        AjfPageSlider.prototype.slide = function (opts) {\n            if (this.pages == null) {\n                return;\n            }\n            if (opts.dir) {\n                if (opts.dir === 'back' || opts.dir === 'up' || opts.dir === 'left') {\n                    this._slideBack();\n                }\n                else if (opts.dir === 'forward' || opts.dir === 'down' || opts.dir === 'right') {\n                    this._slideForward();\n                }\n            }\n            else if (opts.to != null) {\n                this._slideTo(opts.to);\n            }\n        };\n        AjfPageSlider.prototype.onMouseWheel = function (event) {\n            var evt = event;\n            if (evt.deltaX == null || evt.deltaY == null) {\n                return;\n            }\n            var absDeltaX = Math.abs(evt.deltaX);\n            var absDeltaY = Math.abs(evt.deltaY);\n            if (absDeltaX === 0 && absDeltaY === 0) {\n                return;\n            }\n            if (absDeltaX > absDeltaY) {\n                this._mouseWheelEvt.emit({ dir: 'x', amount: -evt.deltaX });\n            }\n            else {\n                this._mouseWheelEvt.emit({ dir: 'y', amount: -evt.deltaY });\n            }\n        };\n        AjfPageSlider.prototype.onTouchStart = function (evt) {\n            if (evt.touches == null || evt.touches.length === 0 || this._animating) {\n                return;\n            }\n            this._currentOrigin = { x: evt.touches[0].clientX, y: evt.touches[0].clientY, time: +new Date() };\n        };\n        AjfPageSlider.prototype.onTouchMove = function (evt) {\n            if (evt.touches == null || evt.touches.length === 0 || this._currentOrigin == null ||\n                this._animating) {\n                return;\n            }\n            var point = { x: evt.touches[0].clientX, y: evt.touches[0].clientY, time: +new Date() };\n            var movement = this._calculateMovement(point);\n            this._currentOrigin = point;\n            if (movement.velocityX === 0 && movement.velocityY === 0) {\n                return;\n            }\n            var absVelocityX = Math.abs(movement.velocityX);\n            var absVelocityY = Math.abs(movement.velocityY);\n            if (absVelocityX > absVelocityY) {\n                if (this.orientation === 'horizontal' && absVelocityX > 1.5 &&\n                    Math.abs(movement.deltaX) > 50) {\n                    this._resetCurrentOrigin();\n                    this.slide({ dir: movement.velocityX < 0 ? 'forward' : 'back' });\n                }\n                else {\n                    var page = this._getCurrentPage();\n                    if (page != null) {\n                        page.setScroll('x', movement.deltaX, movement.deltaTime);\n                    }\n                }\n            }\n            else {\n                if (this.orientation === 'vertical' && absVelocityY > 1.5 && Math.abs(movement.deltaY) > 50) {\n                    this._resetCurrentOrigin();\n                    this.slide({ dir: movement.velocityY < 0 ? 'forward' : 'back' });\n                }\n                else {\n                    var page = this._getCurrentPage();\n                    if (page != null) {\n                        page.setScroll('y', movement.deltaY, movement.deltaTime);\n                    }\n                }\n            }\n        };\n        AjfPageSlider.prototype.onTouchEnd = function () {\n            this._resetCurrentOrigin();\n        };\n        AjfPageSlider.prototype.isCurrentPageLong = function () {\n            var curPage = this._getCurrentPage();\n            if (curPage == null) {\n                return false;\n            }\n            return curPage.wrapper.nativeElement.clientHeight > curPage.content.nativeElement.clientHeight;\n        };\n        AjfPageSlider.prototype._resetCurrentOrigin = function () {\n            this._currentOrigin = null;\n        };\n        AjfPageSlider.prototype._getCurrentPage = function () {\n            if (this.pages == null || this.currentPage < 0 || this.currentPage >= this.pages.length) {\n                return null;\n            }\n            return this.pages.toArray()[this.currentPage];\n        };\n        AjfPageSlider.prototype._calculateMovement = function (point) {\n            var deltaX = point.x - this._currentOrigin.x;\n            var deltaY = point.y - this._currentOrigin.y;\n            var deltaTime = point.time - this._currentOrigin.time;\n            return {\n                velocityX: deltaX / deltaTime,\n                deltaX: deltaX,\n                velocityY: deltaY / deltaTime,\n                deltaY: deltaY,\n                deltaTime: deltaTime,\n            };\n        };\n        AjfPageSlider.prototype._slideBack = function () {\n            if (this._currentPage <= 0) {\n                return;\n            }\n            this.currentPage = this._currentPage - 1;\n        };\n        AjfPageSlider.prototype._slideForward = function () {\n            if (this._currentPage >= this.pages.length) {\n                return;\n            }\n            this.currentPage = this._currentPage + 1;\n        };\n        AjfPageSlider.prototype._slideTo = function (page) {\n            if (page >= 0 && page < this.pages.length) {\n                this.currentPage = page;\n            }\n        };\n        AjfPageSlider.prototype._doSlide = function (immediate) {\n            var _this = this;\n            if (immediate === void 0) { immediate = false; }\n            if (this.body == null || this.pages == null || this._animating) {\n                return;\n            }\n            this._animating = true;\n            var animation = this._animationBuilder.build(animations.animate(immediate ? 0 : this.duration, animations.style({ transform: this._getCurrentTranslation() })));\n            var player = animation.create(this.body.nativeElement);\n            player.onDone(function () {\n                _this._animating = false;\n                _this._pageScrollFinish.emit();\n            });\n            player.play();\n        };\n        AjfPageSlider.prototype._getCurrentTranslation = function () {\n            var slideSize = 100 / this.pages.length;\n            var position = this._currentPage === -1 ? 0 : this._currentPage * slideSize;\n            var translation = this._orientation === 'vertical' ? 'Y' : 'X';\n            return \"translate\" + translation + \"(-\" + position + \"%)\";\n        };\n        AjfPageSlider.prototype._getProps = function () {\n            if (this._orientation === 'vertical') {\n                return { prop: 'height', removeProp: 'width' };\n            }\n            return { prop: 'width', removeProp: 'height' };\n        };\n        AjfPageSlider.prototype._onSlidesChange = function () {\n            this._updateSize();\n        };\n        AjfPageSlider.prototype._updateSize = function () {\n            if (this.body == null || this.pages == null) {\n                return;\n            }\n            var _a = this._getProps(), prop = _a.prop, removeProp = _a.removeProp;\n            this._renderer.setStyle(this.body.nativeElement, prop, this.pages.length * 100 + \"%\");\n            this._renderer.setStyle(this.body.nativeElement, removeProp, null);\n            var curPage;\n            if (this.pages.length === 0) {\n                curPage = -1;\n            }\n            else if (this._currentPage === -1) {\n                curPage = 0;\n            }\n            else if (this._currentPage >= this.pages.length) {\n                curPage = this.pages.length - 1;\n            }\n            else {\n                curPage = this._currentPage;\n            }\n            this._currentPage = curPage;\n            this._restoreCurrentPage();\n        };\n        AjfPageSlider.prototype._restoreCurrentPage = function () {\n            this._doSlide(true);\n        };\n        return AjfPageSlider;\n    }());\n    AjfPageSlider.decorators = [\n        { type: core.Directive }\n    ];\n    AjfPageSlider.ctorParameters = function () { return [\n        { type: animations.AnimationBuilder },\n        { type: core.ChangeDetectorRef },\n        { type: core.Renderer2 }\n    ]; };\n    AjfPageSlider.propDecorators = {\n        body: [{ type: core.ViewChild, args: ['body', { static: true },] }],\n        pages: [{ type: core.ContentChildren, args: [AjfPageSliderItem, { descendants: true },] }],\n        pageScrollFinish: [{ type: core.Output }],\n        orientationChange: [{ type: core.Output }],\n        duration: [{ type: core.Input }],\n        orientation: [{ type: core.Input }],\n        fixedOrientation: [{ type: core.Input }],\n        currentPage: [{ type: core.Input }],\n        hideNavigationButtons: [{ type: core.Input }]\n    };\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfPageSliderModule = /** @class */ (function () {\n        function AjfPageSliderModule() {\n        }\n        return AjfPageSliderModule;\n    }());\n    AjfPageSliderModule.decorators = [\n        { type: core.NgModule, args: [{\n                    declarations: [\n                        AjfPageSliderItem,\n                    ],\n                    exports: [\n                        AjfPageSliderItem,\n                    ]\n                },] }\n    ];\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.AjfPageSlider = AjfPageSlider;\n    exports.AjfPageSliderItem = AjfPageSliderItem;\n    exports.AjfPageSliderModule = AjfPageSliderModule;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=core-page-slider.umd.js.map\n"]}