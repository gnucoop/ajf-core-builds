{"version":3,"file":"core-time.umd.min.js","sources":["../../src/core/time/time-model.ts","../../src/core/time/time.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {EventEmitter} from '@angular/core';\nimport {Observable} from 'rxjs';\n\nexport class AjfTimeModel {\n  private _changed: EventEmitter<string> = new EventEmitter<string>();\n  readonly changed: Observable<string> = this._changed.asObservable();\n\n  private _hours = 0;\n  private _minutes = 0;\n\n  get minutes() {\n    return this._minutes;\n  }\n  set minutes(value: number) {\n    if (value > -1 && value < 61) {\n      this._minutes = value;\n      this._changed.emit(this.toString());\n    }\n  }\n\n  get hours() {\n    return this._hours;\n  }\n  set hours(value: number) {\n    if (value > -1 && value < 24) {\n      this._hours = value;\n      this._changed.emit(this.toString());\n    }\n  }\n\n  toString() {\n    let minutes = this.minutes.toString().length > 1 && this.minutes || `0${this.minutes}`;\n    let hours = this.hours.toString().length > 1 && this.hours || `0${this.hours}`;\n    return `${hours}:${minutes}`;\n  }\n\n  fromString(value: string) {\n    try {\n      let splitted = value.split(':');\n      if (splitted.length == 2) {\n        this.hours = parseInt(splitted[0]);\n        this.minutes = parseInt(splitted[1]);\n      }\n    } catch (e) {\n\n    }\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {OnDestroy} from '@angular/core';\nimport {ControlValueAccessor} from '@angular/forms';\nimport {Subscription} from 'rxjs';\n\nimport {AjfTimeModel} from './time-model';\n\nexport abstract class AjfTime implements ControlValueAccessor, OnDestroy {\n  readonly: boolean;\n\n  get time(): AjfTimeModel {\n    return this._value;\n  }\n\n  private _value: AjfTimeModel = new AjfTimeModel();\n  get value(): string {\n    return this._value.toString();\n  }\n\n  set value(value: string) {\n    if (value !== this._value.toString()) {\n        this._value.fromString(value);\n        this._onChangeCallback(value);\n    }\n  }\n\n  get hours(): number { return this._value.hours; }\n  set hours(hours: number) {\n    this._value.hours = hours;\n    this._onChangeCallback(this._value.toString());\n  }\n\n  get minutes(): number { return this._value.minutes; }\n  set minutes(minutes: number) {\n    this._value.minutes = minutes;\n    this._onChangeCallback(this._value.toString());\n  }\n\n  private _onChangeCallback: (_: any) => void = (_: any) => {};\n  private _onTouchedCallback: () => void = () => {};\n  private _valueChangeSub: Subscription = Subscription.EMPTY;\n\n  constructor() {\n    this._valueChangeSub = this._value.changed\n      .subscribe((x: string) => {\n        this._onChangeCallback(x);\n      });\n  }\n\n  ngOnDestroy(): void {\n    this._valueChangeSub.unsubscribe();\n  }\n\n  writeValue(value: string) {\n    this._value.fromString(value);\n  }\n\n  registerOnChange(fn: (value: any) => void) {\n    this._onChangeCallback = fn;\n  }\n\n  registerOnTouched(fn: any) {\n    this._onTouchedCallback = fn;\n  }\n\n  focusHandler(): void {\n    this._onTouchedCallback();\n  }\n}\n"],"names":["AjfTimeModel","Object","defineProperty","prototype","this","_minutes","value","_changed","emit","toString","_hours","minutes","length","hours","fromString","splitted","split","parseInt","e","EventEmitter","changed","asObservable","AjfTime","_value","_onChangeCallback","ngOnDestroy","_valueChangeSub","unsubscribe","writeValue","registerOnChange","fn","registerOnTouched","_onTouchedCallback","focusHandler","_this","_","Subscription","EMPTY","subscribe","x"],"mappings":";;;;;;;;;;;;;;;;;;;;;4VAyBA,IAAAA,GAOEC,OAAFC,eAAMF,EAANG,UAAA,UAAA,KAAE,WACE,OAAOC,KAAKC,cAEd,SAAYC,IACG,EAATA,GAAcA,EAAQ,KACxBF,KAAKC,SAAWC,EAChBF,KAAKG,SAASC,KAAKJ,KAAKK,8CAI5BR,OAAFC,eAAMF,EAANG,UAAA,QAAA,KAAE,WACE,OAAOC,KAAKM,YAEd,SAAUJ,IACK,EAATA,GAAcA,EAAQ,KACxBF,KAAKM,OAASJ,EACdF,KAAKG,SAASC,KAAKJ,KAAKK,8CAI5BT,EAAFG,UAAAM,SAAE,WACF,IAAQE,EAA2C,EAAjCP,KAAKO,QAAQF,WAAWG,QAAcR,KAAKO,SAAW,IAAIP,KAAKO,QAE7E,OAD2C,EAA/BP,KAAKS,MAAMJ,WAAWG,QAAcR,KAAKS,OAAS,IAAIT,KAAKS,OAC3E,IAAuBF,GAGrBX,EAAFG,UAAAW,WAAE,SAAWR,GACT,IACJ,IAAUS,EAAWT,EAAMU,MAAM,KACJ,GAAnBD,EAASH,SACXR,KAAKS,MAAQI,SAASF,EAAS,IAC/BX,KAAKO,QAAUM,SAASF,EAAS,KAEnC,MAAOG,MAIblB,GA5CA,SAAAA,IACUI,KAAVG,SAA2C,IAAIY,EAA/CA,aACWf,KAAXgB,QAAyChB,KAAKG,SAASc,eAE7CjB,KAAVM,OAAmB,EACTN,KAAVC,SAAqB,ECFrB,OAGEJ,OAAFC,eAAMoB,EAANnB,UAAA,OAAA,KAAE,WACE,OAAOC,KAAKmB,wCAIdtB,OAAFC,eAAMoB,EAANnB,UAAA,QAAA,KAAE,WACE,OAAOC,KAAKmB,OAAOd,gBAGrB,SAAUH,GACJA,IAAUF,KAAKmB,OAAOd,aACtBL,KAAKmB,OAAOT,WAAWR,GACvBF,KAAKoB,kBAAkBlB,qCAI7BL,OAAFC,eAAMoB,EAANnB,UAAA,QAAA,KAAE,WAAsB,OAAOC,KAAKmB,OAAOV,WACzC,SAAUA,GACRT,KAAKmB,OAAOV,MAAQA,EACpBT,KAAKoB,kBAAkBpB,KAAKmB,OAAOd,6CAGrCR,OAAFC,eAAMoB,EAANnB,UAAA,UAAA,KAAE,WAAwB,OAAOC,KAAKmB,OAAOZ,aAC3C,SAAYA,GACVP,KAAKmB,OAAOZ,QAAUA,EACtBP,KAAKoB,kBAAkBpB,KAAKmB,OAAOd,6CAcrCa,EAAFnB,UAAAsB,YAAE,WACErB,KAAKsB,gBAAgBC,eAGvBL,EAAFnB,UAAAyB,WAAE,SAAWtB,GACTF,KAAKmB,OAAOT,WAAWR,IAGzBgB,EAAFnB,UAAA0B,iBAAE,SAAiBC,GACf1B,KAAKoB,kBAAoBM,GAG3BR,EAAFnB,UAAA4B,kBAAE,SAAkBD,GAChB1B,KAAK4B,mBAAqBF,GAG5BR,EAAFnB,UAAA8B,aAAE,WACE7B,KAAK4B,sBAETV,GA1BE,SAAFA,IAAE,IAAFY,EAAA9B,KA5BUA,KAAVmB,OAAiC,IAAIvB,EAwB3BI,KAAVoB,kBAAA,SAAiDW,KACvC/B,KAAV4B,mBAAA,aACU5B,KAAVsB,gBAA0CU,EAA1CA,aAAuDC,MAGnDjC,KAAKsB,gBAAkBtB,KAAKmB,OAAOH,QAChCkB,UAAP,SAAkBC,GACVL,EAAKV,kBAAkBe"}