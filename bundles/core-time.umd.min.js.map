{"version":3,"sources":["src/core/core-time.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ajf","core","time","ng","rxjs","this","AjfTimeModel","_changed","EventEmitter","changed","asObservable","_hours","_minutes","Object","defineProperty","prototype","get","set","value","emit","toString","enumerable","configurable","minutes","length","hours","fromString","splitted","split","parseInt","e","AjfTime","_this","_value","_onChangeCallback","_","_onTouchedCallback","_valueChangeSub","Subscription","EMPTY","subscribe","x","ngOnDestroy","unsubscribe","writeValue","registerOnChange","fn","registerOnTouched","focusHandler","decorators","type","Directive","ctorParameters","propDecorators","readonly","Input"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs')) :\n    typeof define === 'function' && define.amd ? define('@ajf/core/time', ['exports', '@angular/core', 'rxjs'], factory) :\n    (global = global || self, factory((global.ajf = global.ajf || {}, global.ajf.core = global.ajf.core || {}, global.ajf.core.time = {}), global.ng.core, global.rxjs));\n}(this, (function (exports, core, rxjs) { 'use strict';\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfTimeModel = /** @class */ (function () {\n        function AjfTimeModel() {\n            this._changed = new core.EventEmitter();\n            this.changed = this._changed.asObservable();\n            this._hours = 0;\n            this._minutes = 0;\n        }\n        Object.defineProperty(AjfTimeModel.prototype, \"minutes\", {\n            get: function () {\n                return this._minutes;\n            },\n            set: function (value) {\n                if (value > -1 && value < 61) {\n                    this._minutes = value;\n                    this._changed.emit(this.toString());\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfTimeModel.prototype, \"hours\", {\n            get: function () {\n                return this._hours;\n            },\n            set: function (value) {\n                if (value > -1 && value < 24) {\n                    this._hours = value;\n                    this._changed.emit(this.toString());\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        AjfTimeModel.prototype.toString = function () {\n            var minutes = this.minutes.toString().length > 1 && this.minutes || \"0\" + this.minutes;\n            var hours = this.hours.toString().length > 1 && this.hours || \"0\" + this.hours;\n            return hours + \":\" + minutes;\n        };\n        AjfTimeModel.prototype.fromString = function (value) {\n            try {\n                var splitted = value.split(':');\n                if (splitted.length == 2) {\n                    this.hours = parseInt(splitted[0]);\n                    this.minutes = parseInt(splitted[1]);\n                }\n            }\n            catch (e) {\n            }\n        };\n        return AjfTimeModel;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n    var AjfTime = /** @class */ (function () {\n        function AjfTime() {\n            var _this = this;\n            this._value = new AjfTimeModel();\n            this._onChangeCallback = function (_) { };\n            this._onTouchedCallback = function () { };\n            this._valueChangeSub = rxjs.Subscription.EMPTY;\n            this._valueChangeSub = this._value.changed\n                .subscribe(function (x) {\n                _this._onChangeCallback(x);\n            });\n        }\n        Object.defineProperty(AjfTime.prototype, \"time\", {\n            get: function () {\n                return this._value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfTime.prototype, \"value\", {\n            get: function () {\n                return this._value.toString();\n            },\n            set: function (value) {\n                if (value !== this._value.toString()) {\n                    this._value.fromString(value);\n                    this._onChangeCallback(value);\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfTime.prototype, \"hours\", {\n            get: function () { return this._value.hours; },\n            set: function (hours) {\n                this._value.hours = hours;\n                this._onChangeCallback(this._value.toString());\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(AjfTime.prototype, \"minutes\", {\n            get: function () { return this._value.minutes; },\n            set: function (minutes) {\n                this._value.minutes = minutes;\n                this._onChangeCallback(this._value.toString());\n            },\n            enumerable: true,\n            configurable: true\n        });\n        AjfTime.prototype.ngOnDestroy = function () {\n            this._valueChangeSub.unsubscribe();\n        };\n        AjfTime.prototype.writeValue = function (value) {\n            this._value.fromString(value);\n        };\n        AjfTime.prototype.registerOnChange = function (fn) {\n            this._onChangeCallback = fn;\n        };\n        AjfTime.prototype.registerOnTouched = function (fn) {\n            this._onTouchedCallback = fn;\n        };\n        AjfTime.prototype.focusHandler = function () {\n            this._onTouchedCallback();\n        };\n        AjfTime.decorators = [\n            { type: core.Directive }\n        ];\n        /** @nocollapse */\n        AjfTime.ctorParameters = function () { return []; };\n        AjfTime.propDecorators = {\n            readonly: [{ type: core.Input }]\n        };\n        return AjfTime;\n    }());\n\n    /**\n     * @license\n     * Copyright (C) Gnucoop soc. coop.\n     *\n     * This file is part of the Advanced JSON forms (ajf).\n     *\n     * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n     * modify it under the terms of the GNU Affero General Public License as\n     * published by the Free Software Foundation, either version 3 of the License,\n     * or (at your option) any later version.\n     *\n     * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n     * General Public License for more details.\n     *\n     * You should have received a copy of the GNU Affero General Public License\n     * along with Advanced JSON forms (ajf).\n     * If not, see http://www.gnu.org/licenses/.\n     *\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.AjfTime = AjfTime;\n    exports.AjfTimeModel = AjfTimeModel;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=core-time.umd.js.map\n"]}