{"version":3,"file":"common.es5.js","sources":["../../../src/core/common/common-module.ts","../../../src/core/common/video.directive.ts","../../../src/core/common/translate-if-string.ts","../../../src/core/common/format-if-number.ts","../../../src/core/common/dnd.directive.ts","../../../src/core/common/auto-focus.directive.ts","../../../src/core/common/apply-styles-directive.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {NgModule} from '@angular/core';\n\nimport {ApplyStylesDirective} from './apply-styles-directive';\nimport {AutofocusDirective} from './auto-focus.directive';\nimport {AjfDndDirective} from './dnd.directive';\nimport {FormatIfNumber} from './format-if-number';\nimport {TranslateIfString} from './translate-if-string';\nimport {AjfVideoDirective} from './video.directive';\n\n@NgModule({\n  declarations: [\n    AjfDndDirective,\n    AjfVideoDirective,\n    ApplyStylesDirective,\n    AutofocusDirective,\n    FormatIfNumber,\n    TranslateIfString,\n  ],\n  exports: [\n    AjfDndDirective,\n    AjfVideoDirective,\n    ApplyStylesDirective,\n    AutofocusDirective,\n    FormatIfNumber,\n    TranslateIfString,\n  ],\n})\nexport class AjfCommonModule { }\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  Directive, Renderer2, ElementRef, Input,\n  AfterViewInit, Output, EventEmitter\n} from '@angular/core';\n\n@Directive({ selector: '[ajfVideoDirective]' })\nexport class AjfVideoDirective implements AfterViewInit {\n\n  private _source: HTMLVideoElement;\n  get source() { return this._source; }\n  @Input() set source(source: HTMLVideoElement) {\n    this._source = source;\n    this._initCam();\n  }\n\n  @Output() isInit: EventEmitter<any> = new EventEmitter<any>();\n\n  constructor(private _el: ElementRef, private _renderer: Renderer2) { }\n\n  private _initCam() {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia(<MediaStreamConstraints>{ video: true })\n        .then((stream: MediaStream) => {\n          (this._source as any).srcObject = stream;\n          (this._source as any).play();\n        })\n        .catch((err: MediaStreamError) => {\n          console.log(err);\n        });\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this._renderer.appendChild(this._el.nativeElement, this._source);\n    this.isInit.emit();\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Pipe} from '@angular/core';\nimport {TranslatePipe} from '@ngx-translate/core';\n\n\n@Pipe({name: 'ajfTranslateIfString'})\nexport class TranslateIfString extends TranslatePipe {\n    transform(query: string, ...args: any[]): any {\n        if (typeof query === 'string') {\n            return super.transform(query, ...args);\n        } else {\n            return query;\n        }\n    }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Pipe} from '@angular/core';\nimport {DecimalPipe} from '@angular/common';\n\n\n@Pipe({name: 'ajfFormatIfNumber'})\nexport class FormatIfNumber extends DecimalPipe {\n    transform(value: any, digitsInfo?: string, locale?: string) {\n        if (typeof value === 'number') {\n            return super.transform(value, digitsInfo, locale);\n        } else {\n            return value;\n        }\n    }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Directive, Output, EventEmitter} from '@angular/core';\n\n@Directive({\n  selector: '[ajfDnd]',\n  host: {\n    '[style.background]': 'background',\n    '(dragover)': 'onDragOver($event)',\n    '(dragleave)': 'onDragLeave($event)',\n    '(drop)': 'onDrop($event)',\n  }\n})\nexport class AjfDndDirective {\n  @Output() file: EventEmitter<any> = new EventEmitter<any>();\n\n  background = '#eee';\n\n  onDragOver(evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    this.background = '#999';\n  }\n\n  onDragLeave(evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    this.background = '#eee';\n  }\n\n  onDrop(evt: any) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    let files: FileList = evt.dataTransfer.files;\n    if (files.length > 0) {\n      this.background = '#eee';\n      this.file.emit(files);\n    }\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\nimport {AfterContentInit, Directive, ElementRef, Input} from '@angular/core';\n\n@Directive({selector: '[autoFocus]' })\nexport class AutofocusDirective implements AfterContentInit {\n\n    @Input()\n    appAutoFocus: boolean;\n\n    constructor(private _el: ElementRef) {\n    }\n\n    ngAfterContentInit() {\n        this._el.nativeElement.focus();\n    }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Input, Directive, ElementRef, Renderer2} from '@angular/core';\n\n\n@Directive({ selector: '[applyStyles]' })\nexport class ApplyStylesDirective {\n  private _cssStyles: { [style: string]: any; };\n  @Input()\n  set applyStyles(cssStyles: { [style: string]: any; }) {\n    if (this._cssStyles !== cssStyles) {\n      this._cssStyles = cssStyles;\n      this._updateStyles();\n    }\n  }\n\n  constructor(private _el: ElementRef, private _renderer: Renderer2) { }\n\n  private _updateStyles(): void {\n    if (this._cssStyles == null) {\n      return;\n    }\n\n    Object.keys(this._cssStyles).forEach((style: string) => {\n      try {\n        this._renderer.setStyle(\n          this._el.nativeElement,\n          style,\n          `${this._cssStyles[style]}`\n        );\n      } catch (e) { }\n    });\n  }\n}\n"],"names":["tslib_1.__extends"],"mappings":"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"}