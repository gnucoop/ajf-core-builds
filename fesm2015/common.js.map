{"version":3,"file":"common.js","sources":["../../../../../../src/core/common/apply-styles-directive.ts","../../../../../../src/core/common/auto-focus.directive.ts","../../../../../../src/core/common/dnd.directive.ts","../../../../../../src/core/common/format-if-number.ts","../../../../../../src/core/common/translate-if-string.ts","../../../../../../src/core/common/video.directive.ts","../../../../../../src/core/common/common-module.ts","../../../../../../src/core/common/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Directive, ElementRef, Input, Renderer2} from '@angular/core';\n\n\n@Directive({selector: '[applyStyles]'})\nexport class ApplyStylesDirective {\n  private _cssStyles: {[style: string]: any};\n  @Input()\n  set applyStyles(cssStyles: {[style: string]: any}|null) {\n    if (cssStyles != null && this._cssStyles !== cssStyles) {\n      this._cssStyles = cssStyles;\n      this._updateStyles();\n    }\n  }\n\n  constructor(private _el: ElementRef, private _renderer: Renderer2) {}\n\n  private _updateStyles(): void {\n    if (this._cssStyles == null) {\n      return;\n    }\n\n    Object.keys(this._cssStyles).forEach((style: string) => {\n      try {\n        this._renderer.setStyle(this._el.nativeElement, style, `${this._cssStyles[style]}`);\n      } catch (e) {\n      }\n    });\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\nimport {AfterContentInit, Directive, ElementRef, Input} from '@angular/core';\n\n@Directive({selector: '[autoFocus]'})\nexport class AutofocusDirective implements AfterContentInit {\n  @Input() appAutoFocus: boolean;\n\n  constructor(private _el: ElementRef) {}\n\n  ngAfterContentInit() {\n    this._el.nativeElement.focus();\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Directive, EventEmitter, Output} from '@angular/core';\n\n@Directive({\n  selector: '[ajfDnd]',\n  host: {\n    '[style.background]': 'background',\n    '(dragover)': 'onDragOver($event)',\n    '(dragleave)': 'onDragLeave($event)',\n    '(drop)': 'onDrop($event)',\n  }\n})\nexport class AjfDndDirective {\n  @Output() file: EventEmitter<any> = new EventEmitter<any>();\n\n  background = '#eee';\n\n  onDragOver(evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    this.background = '#999';\n  }\n\n  onDragLeave(evt: Event) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    this.background = '#eee';\n  }\n\n  onDrop(evt: any) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    let files: FileList = evt.dataTransfer.files;\n    if (files.length > 0) {\n      this.background = '#eee';\n      this.file.emit(files);\n    }\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {DecimalPipe} from '@angular/common';\nimport {Pipe} from '@angular/core';\n\n\n@Pipe({name: 'ajfFormatIfNumber'})\nexport class FormatIfNumber extends DecimalPipe {\n  transform(value: any, digitsInfo?: string, locale?: string) {\n    if (typeof value === 'number') {\n      return super.transform(value, digitsInfo, locale);\n    } else {\n      return value;\n    }\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Pipe} from '@angular/core';\nimport {TranslatePipe} from '@ngx-translate/core';\n\n\n@Pipe({name: 'ajfTranslateIfString'})\nexport class TranslateIfString extends TranslatePipe {\n  transform(query: any, ...args: any[]): any {\n    if (typeof query === 'string') {\n      return super.transform(query, ...args);\n    } else {\n      return query;\n    }\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Input,\n  Output,\n  Renderer2\n} from '@angular/core';\n\n@Directive({selector: '[ajfVideoDirective]'})\nexport class AjfVideoDirective implements AfterViewInit {\n  private _source: HTMLVideoElement;\n  get source() {\n    return this._source;\n  }\n  @Input()\n  set source(source: HTMLVideoElement) {\n    this._source = source;\n    this._initCam();\n  }\n\n  @Output() isInit: EventEmitter<any> = new EventEmitter<any>();\n\n  constructor(private _el: ElementRef, private _renderer: Renderer2) {}\n\n  private _initCam() {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia(<MediaStreamConstraints>{video: true})\n          .then((stream: MediaStream) => {\n            (this._source as any).srcObject = stream;\n            (this._source as any).play();\n          })\n          .catch((err: MediaStreamError) => {\n            console.log(err);\n          });\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this._renderer.appendChild(this._el.nativeElement, this._source);\n    this.isInit.emit();\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {NgModule} from '@angular/core';\n\nimport {ApplyStylesDirective} from './apply-styles-directive';\nimport {AutofocusDirective} from './auto-focus.directive';\nimport {AjfDndDirective} from './dnd.directive';\nimport {FormatIfNumber} from './format-if-number';\nimport {TranslateIfString} from './translate-if-string';\nimport {AjfVideoDirective} from './video.directive';\n\n@NgModule({\n  declarations: [\n    AjfDndDirective,\n    AjfVideoDirective,\n    ApplyStylesDirective,\n    AutofocusDirective,\n    FormatIfNumber,\n    TranslateIfString,\n  ],\n  exports: [\n    AjfDndDirective,\n    AjfVideoDirective,\n    ApplyStylesDirective,\n    AutofocusDirective,\n    FormatIfNumber,\n    TranslateIfString,\n  ],\n})\nexport class AjfCommonModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}