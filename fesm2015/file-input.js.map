{"version":3,"file":"file-input.js","sources":["../../../../../../src/core/file-input/file.ts","../../../../../../src/core/file-input/file-input.ts","../../../../../../src/core/file-input/file-input-module.ts","../../../../../../src/core/file-input/public-api.ts","../../../../../../src/core/file-input/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport interface AjfFile {\n  name: string;\n  size: number;\n  type: string;\n  content: string;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ContentChildren,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Input,\n  OnDestroy,\n  Output,\n  QueryList,\n  ViewChild,\n  ViewContainerRef,\n  ViewEncapsulation,\n} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\nimport {DomSanitizer, SafeResourceUrl} from '@angular/platform-browser';\nimport {Observable, Subscription} from 'rxjs';\nimport {filter} from 'rxjs/operators';\n\nimport {AjfFile} from './file';\n\n@Directive({selector: '[ajfDropMessage]'})\nexport class AjfDropMessage {\n}\n\n@Directive({\n  selector: '[ajfFilePreview]',\n  exportAs: 'ajfFilePreview',\n})\nexport class AjfFilePreview implements OnDestroy {\n  private _value: AjfFile;\n  get value(): AjfFile {\n    return this._value;\n  }\n\n  private _valueSub = Subscription.EMPTY;\n\n  constructor(vcr: ViewContainerRef) {\n    const input = vcr.parentInjector.get(AjfFileInput, null);\n    if (input) {\n      this._value = input.value;\n      this._valueSub = input.valueChange\n                           .pipe(\n                               filter(value => value != null),\n                               )\n                           .subscribe(value => {\n                             this._value = value as AjfFile;\n                           });\n    }\n  }\n\n  ngOnDestroy(): void {\n    this._valueSub.unsubscribe();\n  }\n}\n\n@Component({\n  selector: 'ajf-file-input',\n  templateUrl: './file-input.html',\n  styleUrls: ['./file-input.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class.ajf-file-input]': 'true',\n  },\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => AjfFileInput),\n    multi: true,\n  }],\n})\nexport class AjfFileInput implements ControlValueAccessor {\n  @ContentChildren(AjfDropMessage, {descendants: false})\n  _dropMessageChildren: QueryList<AjfDropMessage>;\n  @ContentChildren(AjfFilePreview, {descendants: false})\n  _filePreviewChildren: QueryList<AjfFilePreview>;\n  @ViewChild('nativeInput') _nativeInput: ElementRef<HTMLInputElement>;\n\n  readonly fileIcon: SafeResourceUrl;\n  readonly removeIcon: SafeResourceUrl;\n\n  @Input() accept: string;\n\n  private _value: any;\n  get value(): any {\n    return this._value;\n  }\n  @Input()\n  set value(value: any) {\n    if (value instanceof File) {\n      this._processFileUpload(value);\n    } else if (value instanceof FileList) {\n      if (value.length === 1) {\n        this._processFileUpload(value[0]);\n      }\n    } else if (\n        value == null ||\n        (isAjfFile(value) && isValidMimeType((value as AjfFile).type, this.accept))) {\n      this._value = value;\n      this._valueChange.emit(this._value);\n      this._cdr.detectChanges();\n    }\n  }\n\n  private _valueChange = new EventEmitter<AjfFile|undefined>();\n  @Output() readonly valueChange: Observable<AjfFile|undefined> = this._valueChange.asObservable();\n\n  /** The method to be called in order to update ngModel. */\n  _controlValueAccessorChangeFn: (value: any) => void = () => {};\n\n  /** onTouch function registered via registerOnTouch (ControlValueAccessor). */\n  _onTouched: () => any = () => {};\n\n  constructor(domSanitizer: DomSanitizer, private _cdr: ChangeDetectorRef) {\n    this.fileIcon = domSanitizer.bypassSecurityTrustResourceUrl(fileIcon);\n    this.removeIcon = domSanitizer.bypassSecurityTrustResourceUrl(trashIcon);\n  }\n\n  onFileDrop(files: FileList): void {\n    if (files.length !== 1) {\n      return;\n    }\n    const file = files[0];\n    this._processFileUpload(file);\n  }\n\n  onSelectFile(): void {\n    const files = this._nativeInput.nativeElement.files;\n    if (files == null) {\n      return;\n    }\n    const file = files.item(0);\n    if (file == null) {\n      return;\n    }\n    this._processFileUpload(files.item(0) as File);\n  }\n\n  registerOnChange(fn: any): void {\n    this._controlValueAccessorChangeFn = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this._onTouched = fn;\n  }\n\n  resetValue(): void {\n    this.value = null;\n    this._nativeInput.nativeElement.value = '';\n  }\n\n  triggerNativeInput(): void {\n    if (!this._nativeInput) {\n      return;\n    }\n    this._nativeInput.nativeElement.click();\n  }\n\n  writeValue(value: any) {\n    this.value = value;\n    this._cdr.markForCheck();\n  }\n\n  private _processFileUpload(file: File): void {\n    const reader = new FileReader();\n    const {name, size, type} = file;\n    if (!isValidMimeType(type, this.accept)) {\n      return;\n    }\n    reader.onload = (e: ProgressEvent<FileReader>) => {\n      const content = reader.result;\n      if (typeof content !== 'string') {\n        return;\n      }\n      this.value = {name, size, type, content};\n      if (this._controlValueAccessorChangeFn != null) {\n        this._controlValueAccessorChangeFn(this.value);\n      }\n    };\n    reader.readAsDataURL(file);\n  }\n}\n\nconst ajfFileKeys = JSON.stringify(['content', 'name', 'size', 'type']);\n\n/**\n * Test if a value is an AjfFile interface.\n */\nfunction isAjfFile(value: any): boolean {\n  if (typeof value !== 'object') {\n    return false;\n  }\n  const keys = Object.keys(value).sort((a, b) => a.localeCompare(b));\n  return JSON.stringify(keys) === ajfFileKeys;\n}\n\nfunction isValidMimeType(mimeType: string, accept: string): boolean {\n  if (accept == null) {\n    return true;\n  }\n  let terminate = true;\n  if (accept.endsWith('*')) {\n    accept = accept.slice(0, accept.length - 1);\n    terminate = false;\n  }\n  const regExStr = '^' + accept + (terminate ? '$' : '');\n  const regEx = new RegExp(regExStr);\n  return regEx.test(mimeType);\n}\n\nexport const fileIcon = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwM' +\n    'C9zdmciIHdpZHRoPSIxNzA2LjY2NyIgaGVpZ2h0PSIxNzA2LjY2NyIgdmlld0JveD0iMCAwIDEyODAgMTI4MCIgcHJl' +\n    'c2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCI+PHBhdGggZD0iTTI4MyAxMDNjLTE3LjcgMi40LTMzLjkgMTM' +\n    'uOC00Mi4yIDI5LjYtNy40IDE0LTYuOC0zMi41LTYuOCA0OTcuNHMtLjYgNDgzLjQgNi44IDQ5Ny40YzYuOCAxMy4xID' +\n    'E4LjYgMjIuNyAzMy43IDI3LjhsNyAyLjNoNzE3bDctMi4zYzE1LjEtNS4xIDI2LjktMTQuNyAzMy43LTI3LjggNy40L' +\n    'TE0IDYuOCAxOS4yIDYuOC0zNzYuNlYzOTQuMWwtMTExLjItLjMtMTExLjMtLjQtOC41LTIuM2MtMjMuOC02LjUtNDMt' +\n    'MjEuMy01Mi40LTQwLjUtNy41LTE1LjMtNy02LTcuMy0xMzMuOWwtLjQtMTE0LjctMjMzLjIuMS0yMzguNy45em01MTI' +\n    'gMTA5LjhjMCAxMjAuNS0uMyAxMTQuOSA2IDEyNC40IDMuNiA1LjUgMTEuNiAxMS4yIDE5LjcgMTQuMSA1LjggMi4yID' +\n    'YuNCAyLjIgMTE1LjggMi41bDExMCAuMy0xMjUtMTI1LjQtMTI1LjctMTI1LjVjLS41LS4xLS44IDQ5LjItLjggMTA5L' +\n    'jZ6Ii8+PC9zdmc+';\n\nconst trashIcon = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmc' +\n    'iIHZpZXdCb3g9IjAgLTI1NiAxNzkyIDE3OTIiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxwYXRoIGQ9Ik03MD' +\n    'kuNDI0IDQ1NS4wNXY1NzZxMCAxNC05IDIzLTkgOS0yMyA5aC02NHEtMTQgMC0yMy05LTktOS05LTIzdi01NzZxMC0xN' +\n    'CA5LTIzIDktOSAyMy05aDY0cTE0IDAgMjMgOSA5IDkgOSAyM3ptMjU2IDB2NTc2cTAgMTQtOSAyMy05IDktMjMgOWgt' +\n    'NjRxLTE0IDAtMjMtOS05LTktOS0yM3YtNTc2cTAtMTQgOS0yMyA5LTkgMjMtOWg2NHExNCAwIDIzIDkgOSA5IDkgMjN' +\n    '6bTI1NiAwdjU3NnEwIDE0LTkgMjMtOSA5LTIzIDloLTY0cS0xNCAwLTIzLTktOS05LTktMjN2LTU3NnEwLTE0IDktMj' +\n    'MgOS05IDIzLTloNjRxMTQgMCAyMyA5IDkgOSA5IDIzem0xMjggNzI0di05NDhoLTg5NnY5NDhxMCAyMiA3IDQwLjUgN' +\n    'yAxOC41IDE0LjUgMjcgNy41IDguNSAxMC41IDguNWg4MzJxMyAwIDEwLjUtOC41IDcuNS04LjUgMTQuNS0yNyA3LTE4' +\n    'LjUgNy00MC41em0tNjcyLTEwNzZoNDQ4bC00OC0xMTdxLTctOS0xNy0xMWgtMzE3cS0xMCAyLTE3IDExem05MjggMzJ' +\n    '2NjRxMCAxNC05IDIzLTkgOS0yMyA5aC05NnY5NDhxMCA4My00NyAxNDMuNS00NyA2MC41LTExMyA2MC41aC04MzJxLT' +\n    'Y2IDAtMTEzLTU4LjUtNDctNTguNS00Ny0xNDEuNXYtOTUyaC05NnEtMTQgMC0yMy05LTktOS05LTIzdi02NHEwLTE0I' +\n    'DktMjMgOS05IDIzLTloMzA5bDcwLTE2N3ExNS0zNyA1NC02MyAzOS0yNiA3OS0yNmgzMjBxNDAgMCA3OSAyNiAzOSAy' +\n    'NiA1NCA2M2w3MCAxNjdoMzA5cTE0IDAgMjMgOSA5IDkgOSAyM3oiLz48L3N2Zz4=';\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfCommonModule} from '@ajf/core/common';\nimport {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TranslateModule} from '@ngx-translate/core';\n\nimport {AjfDropMessage, AjfFileInput, AjfFilePreview} from './file-input';\n\n@NgModule({\n  declarations: [\n    AjfDropMessage,\n    AjfFileInput,\n    AjfFilePreview,\n  ],\n  exports: [\n    AjfDropMessage,\n    AjfFileInput,\n    AjfFilePreview,\n  ],\n  imports: [\n    AjfCommonModule,\n    CommonModule,\n    TranslateModule,\n  ],\n})\nexport class AjfFileInputModule {\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport * from './file';\nexport * from './file-input';\nexport * from './file-input-module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}