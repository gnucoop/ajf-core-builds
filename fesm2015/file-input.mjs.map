{"version":3,"file":"file-input.mjs","sources":["../../../../../../src/core/file-input/file-input.ts","../../../../../../src/core/file-input/file-input.html","../../../../../../src/core/file-input/file-input-module.ts","../../../../../../src/core/file-input/public-api.ts","../../../../../../src/core/file-input/index.ts","../../../../../../src/core/file-input/file-input_public_index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ContentChildren,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Input,\n  OnDestroy,\n  Output,\n  QueryList,\n  ViewChild,\n  ViewContainerRef,\n  ViewEncapsulation,\n} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\nimport {DomSanitizer, SafeResourceUrl} from '@angular/platform-browser';\nimport {Observable, Subscription} from 'rxjs';\nimport {filter} from 'rxjs/operators';\n\nimport {AjfFile} from './file';\n\n@Directive({selector: '[ajfDropMessage]'})\nexport class AjfDropMessage {}\n\n@Directive({\n  selector: '[ajfFilePreview]',\n  exportAs: 'ajfFilePreview',\n})\nexport class AjfFilePreview implements OnDestroy {\n  private _value: AjfFile;\n  get value(): AjfFile {\n    return this._value;\n  }\n\n  private _valueSub = Subscription.EMPTY;\n\n  constructor(vcr: ViewContainerRef) {\n    const input = vcr.parentInjector.get(AjfFileInput, null);\n    if (input) {\n      this._value = input.value;\n      this._valueSub = input.valueChange.pipe(filter(value => value != null)).subscribe(value => {\n        this._value = value as AjfFile;\n      });\n    }\n  }\n\n  ngOnDestroy(): void {\n    this._valueSub.unsubscribe();\n  }\n}\n\n@Component({\n  selector: 'ajf-file-input',\n  templateUrl: './file-input.html',\n  styleUrls: ['./file-input.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class.ajf-file-input]': 'true',\n  },\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => AjfFileInput),\n      multi: true,\n    },\n  ],\n})\nexport class AjfFileInput implements ControlValueAccessor {\n  @ContentChildren(AjfDropMessage, {descendants: false})\n  _dropMessageChildren: QueryList<AjfDropMessage>;\n  @ContentChildren(AjfFilePreview, {descendants: false})\n  _filePreviewChildren: QueryList<AjfFilePreview>;\n  @ViewChild('nativeInput') _nativeInput: ElementRef<HTMLInputElement>;\n\n  readonly fileIcon: SafeResourceUrl;\n  readonly removeIcon: SafeResourceUrl;\n\n  @Input() accept: string;\n\n  private _value: any;\n  get value(): any {\n    return this._value;\n  }\n  @Input()\n  set value(value: any) {\n    if (value instanceof File) {\n      this._processFileUpload(value);\n    } else if (value instanceof FileList) {\n      if (value.length === 1) {\n        this._processFileUpload(value[0]);\n      }\n    } else if (\n      value == null ||\n      (isAjfFile(value) && isValidMimeType((value as AjfFile).type, this.accept))\n    ) {\n      this._value = value;\n      this._valueChange.emit(this._value);\n      this._cdr.detectChanges();\n    }\n  }\n\n  private _valueChange = new EventEmitter<AjfFile | undefined>();\n  @Output()\n  readonly valueChange: Observable<AjfFile | undefined> = this._valueChange as Observable<\n    AjfFile | undefined\n  >;\n\n  /** The method to be called in order to update ngModel. */\n  _controlValueAccessorChangeFn: (value: any) => void = () => {};\n\n  /** onTouch function registered via registerOnTouch (ControlValueAccessor). */\n  _onTouched: () => any = () => {};\n\n  constructor(domSanitizer: DomSanitizer, private _cdr: ChangeDetectorRef) {\n    this.fileIcon = domSanitizer.bypassSecurityTrustResourceUrl(fileIcon);\n    this.removeIcon = domSanitizer.bypassSecurityTrustResourceUrl(trashIcon);\n  }\n\n  onFileDrop(files: FileList): void {\n    if (files.length !== 1) {\n      return;\n    }\n    const file = files[0];\n    this._processFileUpload(file);\n  }\n\n  onSelectFile(): void {\n    const files = this._nativeInput.nativeElement.files;\n    if (files == null) {\n      return;\n    }\n    const file = files.item(0);\n    if (file == null) {\n      return;\n    }\n    this._processFileUpload(files.item(0) as File);\n  }\n\n  registerOnChange(fn: any): void {\n    this._controlValueAccessorChangeFn = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this._onTouched = fn;\n  }\n\n  resetValue(): void {\n    this.value = null;\n    this._nativeInput.nativeElement.value = '';\n  }\n\n  triggerNativeInput(): void {\n    if (!this._nativeInput) {\n      return;\n    }\n    this._nativeInput.nativeElement.click();\n  }\n\n  writeValue(value: any) {\n    this.value = value;\n    this._cdr.markForCheck();\n  }\n\n  private _processFileUpload(file: File): void {\n    const reader = new FileReader();\n    const {name, size, type} = file;\n    if (!isValidMimeType(type, this.accept)) {\n      return;\n    }\n    reader.onload = (e: ProgressEvent<FileReader>) => {\n      const content = reader.result;\n      if (typeof content !== 'string') {\n        return;\n      }\n      this.value = {name, size, type, content};\n      if (this._controlValueAccessorChangeFn != null) {\n        this._controlValueAccessorChangeFn(this.value);\n      }\n    };\n    reader.readAsDataURL(file);\n  }\n}\n\nconst ajfFileKeys = JSON.stringify(['content', 'name', 'size', 'type']);\n\n/**\n * Test if a value is an AjfFile interface.\n */\nfunction isAjfFile(value: any): boolean {\n  if (typeof value !== 'object') {\n    return false;\n  }\n  const keys = Object.keys(value).sort((a, b) => a.localeCompare(b));\n  return JSON.stringify(keys) === ajfFileKeys;\n}\n\nfunction isValidMimeType(mimeType: string, accept: string): boolean {\n  if (accept == null) {\n    return true;\n  }\n  let terminate = true;\n  if (accept.endsWith('*')) {\n    accept = accept.slice(0, accept.length - 1);\n    terminate = false;\n  }\n  const regExStr = '^' + accept + (terminate ? '$' : '');\n  const regEx = new RegExp(regExStr);\n  return regEx.test(mimeType);\n}\n\nexport const fileIcon =\n  'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwM' +\n  'C9zdmciIHdpZHRoPSIxNzA2LjY2NyIgaGVpZ2h0PSIxNzA2LjY2NyIgdmlld0JveD0iMCAwIDEyODAgMTI4MCIgcHJl' +\n  'c2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCI+PHBhdGggZD0iTTI4MyAxMDNjLTE3LjcgMi40LTMzLjkgMTM' +\n  'uOC00Mi4yIDI5LjYtNy40IDE0LTYuOC0zMi41LTYuOCA0OTcuNHMtLjYgNDgzLjQgNi44IDQ5Ny40YzYuOCAxMy4xID' +\n  'E4LjYgMjIuNyAzMy43IDI3LjhsNyAyLjNoNzE3bDctMi4zYzE1LjEtNS4xIDI2LjktMTQuNyAzMy43LTI3LjggNy40L' +\n  'TE0IDYuOCAxOS4yIDYuOC0zNzYuNlYzOTQuMWwtMTExLjItLjMtMTExLjMtLjQtOC41LTIuM2MtMjMuOC02LjUtNDMt' +\n  'MjEuMy01Mi40LTQwLjUtNy41LTE1LjMtNy02LTcuMy0xMzMuOWwtLjQtMTE0LjctMjMzLjIuMS0yMzguNy45em01MTI' +\n  'gMTA5LjhjMCAxMjAuNS0uMyAxMTQuOSA2IDEyNC40IDMuNiA1LjUgMTEuNiAxMS4yIDE5LjcgMTQuMSA1LjggMi4yID' +\n  'YuNCAyLjIgMTE1LjggMi41bDExMCAuMy0xMjUtMTI1LjQtMTI1LjctMTI1LjVjLS41LS4xLS44IDQ5LjItLjggMTA5L' +\n  'jZ6Ii8+PC9zdmc+';\n\nconst trashIcon =\n  'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmc' +\n  'iIHZpZXdCb3g9IjAgLTI1NiAxNzkyIDE3OTIiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxwYXRoIGQ9Ik03MD' +\n  'kuNDI0IDQ1NS4wNXY1NzZxMCAxNC05IDIzLTkgOS0yMyA5aC02NHEtMTQgMC0yMy05LTktOS05LTIzdi01NzZxMC0xN' +\n  'CA5LTIzIDktOSAyMy05aDY0cTE0IDAgMjMgOSA5IDkgOSAyM3ptMjU2IDB2NTc2cTAgMTQtOSAyMy05IDktMjMgOWgt' +\n  'NjRxLTE0IDAtMjMtOS05LTktOS0yM3YtNTc2cTAtMTQgOS0yMyA5LTkgMjMtOWg2NHExNCAwIDIzIDkgOSA5IDkgMjN' +\n  '6bTI1NiAwdjU3NnEwIDE0LTkgMjMtOSA5LTIzIDloLTY0cS0xNCAwLTIzLTktOS05LTktMjN2LTU3NnEwLTE0IDktMj' +\n  'MgOS05IDIzLTloNjRxMTQgMCAyMyA5IDkgOSA5IDIzem0xMjggNzI0di05NDhoLTg5NnY5NDhxMCAyMiA3IDQwLjUgN' +\n  'yAxOC41IDE0LjUgMjcgNy41IDguNSAxMC41IDguNWg4MzJxMyAwIDEwLjUtOC41IDcuNS04LjUgMTQuNS0yNyA3LTE4' +\n  'LjUgNy00MC41em0tNjcyLTEwNzZoNDQ4bC00OC0xMTdxLTctOS0xNy0xMWgtMzE3cS0xMCAyLTE3IDExem05MjggMzJ' +\n  '2NjRxMCAxNC05IDIzLTkgOS0yMyA5aC05NnY5NDhxMCA4My00NyAxNDMuNS00NyA2MC41LTExMyA2MC41aC04MzJxLT' +\n  'Y2IDAtMTEzLTU4LjUtNDctNTguNS00Ny0xNDEuNXYtOTUyaC05NnEtMTQgMC0yMy05LTktOS05LTIzdi02NHEwLTE0I' +\n  'DktMjMgOS05IDIzLTloMzA5bDcwLTE2N3ExNS0zNyA1NC02MyAzOS0yNiA3OS0yNmgzMjBxNDAgMCA3OSAyNiAzOSAy' +\n  'NiA1NCA2M2w3MCAxNjdoMzA5cTE0IDAgMjMgOSA5IDkgOSAyM3oiLz48L3N2Zz4=';\n","<div ajfDnd (file)=\"onFileDrop($event)\" class=\"ajf-drop-zone\">\n  <div *ngIf=\"value == null; else fileInfo\" class=\"ajf-drop-message\" (click)=\"triggerNativeInput()\">\n    <ng-container *ngIf=\"_dropMessageChildren?.length; else defaultDropMessage\">\n      <ng-content select=\"[ajfDropMessage]\"></ng-content>\n    </ng-container>\n    <ng-template #defaultDropMessage>{{'Drop your file here or click to select'|transloco}}</ng-template>\n  </div>\n  <ng-template #fileInfo>\n    <button (click)=\"resetValue()\" class=\"ajf-remove-file\">\n      <img [src]=\"removeIcon\" alt=\"\">\n      <div class=\"ajf-screen-reader-only\">{{ 'Delete'|transloco }}</div>\n    </button>\n    <div class=\"ajf-file-info\">\n      <ng-container *ngIf=\"_filePreviewChildren?.length; else defaultFilePreview\">\n        <ng-content select=\"[ajfFilePreview]\"></ng-content>\n      </ng-container>\n      <ng-template #defaultFilePreview>\n        <div class=\"ajf-file-info-content\">\n          <img [src]=\"fileIcon\" alt=\"\">\n          <div>{{ value.name }}</div>\n        </div>\n      </ng-template>\n    </div>\n  </ng-template>\n</div>\n<input #nativeInput [accept]=\"accept\" name=\"\" aria-label=\"file input\" type=\"file\" (change)=\"onSelectFile()\">\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfCommonModule} from '@ajf/core/common';\nimport {AjfTranslocoModule} from '@ajf/core/transloco';\nimport {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\n\nimport {AjfDropMessage, AjfFileInput, AjfFilePreview} from './file-input';\n\n@NgModule({\n  declarations: [AjfDropMessage, AjfFileInput, AjfFilePreview],\n  exports: [AjfDropMessage, AjfFileInput, AjfFilePreview],\n  imports: [AjfCommonModule, CommonModule, AjfTranslocoModule],\n})\nexport class AjfFileInputModule {}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport * from './file';\nexport * from './file-input';\nexport * from './file-input-module';\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport * from './public-api';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}