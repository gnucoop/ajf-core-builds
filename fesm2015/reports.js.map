{"version":3,"file":"reports.js","sources":["../../../../../../src/core/reports/base-widget.ts","../../../../../../src/core/reports/interface/charts/chart-type.ts","../../../../../../src/core/reports/chart-utils.ts","../../../../../../src/core/reports/get-column-content.ts","../../../../../../src/core/reports/interface/aggregation/aggregation.ts","../../../../../../src/core/reports/interface/aggregation/aggregation-type.ts","../../../../../../src/core/reports/interface/dataset/chart-dataset.ts","../../../../../../src/core/reports/interface/dataset/chart-dataset-options.ts","../../../../../../src/core/reports/interface/dataset/dataset.ts","../../../../../../src/core/reports/interface/dataset/table-dataset.ts","../../../../../../src/core/reports/interface/reports/report.ts","../../../../../../src/core/reports/interface/reports/report-container.ts","../../../../../../src/core/reports/interface/reports/report-variable.ts","../../../../../../src/core/reports/interface/reports-instances/report-container-instance.ts","../../../../../../src/core/reports/interface/reports-instances/report-instance.ts","../../../../../../src/core/reports/interface/styles.ts","../../../../../../src/core/reports/interface/widgets/chart-widget.ts","../../../../../../src/core/reports/interface/widgets/custom-widget.ts","../../../../../../src/core/reports/interface/widgets/data-widget.ts","../../../../../../src/core/reports/interface/widgets/formula-widget.ts","../../../../../../src/core/reports/interface/widgets/image-container-widget.ts","../../../../../../src/core/reports/interface/widgets/image-widget.ts","../../../../../../src/core/reports/interface/widgets/layout-widget.ts","../../../../../../src/core/reports/interface/widgets/map-widget.ts","../../../../../../src/core/reports/interface/widgets/table-widget.ts","../../../../../../src/core/reports/interface/widgets/text-widget.ts","../../../../../../src/core/reports/interface/widgets/widget.ts","../../../../../../src/core/reports/interface/widgets/widget-type.ts","../../../../../../src/core/reports/interface/widgets/widget-with-content.ts","../../../../../../src/core/reports/interface/widgets-instances/chart-widget-instance.ts","../../../../../../src/core/reports/interface/widgets-instances/column-widget-instance.ts","../../../../../../src/core/reports/interface/widgets-instances/data-widget-instance.ts","../../../../../../src/core/reports/interface/widgets-instances/formula-widget-instance.ts","../../../../../../src/core/reports/interface/widgets-instances/image-container-widget-instance.ts","../../../../../../src/core/reports/interface/widgets-instances/image-widget-instance.ts","../../../../../../src/core/reports/interface/widgets-instances/layout-widget-instance.ts","../../../../../../src/core/reports/interface/widgets-instances/map-widget-instance.ts","../../../../../../src/core/reports/interface/widgets-instances/page-break-widget-instance.ts","../../../../../../src/core/reports/interface/widgets-instances/table-widget-instance.ts","../../../../../../src/core/reports/interface/widgets-instances/text-widget-instance.ts","../../../../../../src/core/reports/interface/widgets-instances/widget-instance.ts","../../../../../../src/core/reports/interface/widgets-instances/widget-with-content-instance.ts","../../../../../../src/core/reports/report.ts","../../../../../../src/core/reports/widget-host.ts","../../../../../../src/core/reports/reports-module.ts","../../../../../../src/core/reports/utils/aggregation/create-aggregation.ts","../../../../../../src/core/reports/serializers/aggregation-serializer.ts","../../../../../../src/core/reports/utils/dataset/create-dataset.ts","../../../../../../src/core/reports/serializers/dataset-serializer.ts","../../../../../../src/core/reports/utils/widgets/create-widget.ts","../../../../../../src/core/reports/serializers/widget-serializer.ts","../../../../../../src/core/reports/serializers/report-container-serializer.ts","../../../../../../src/core/reports/utils/reports/create-report.ts","../../../../../../src/core/reports/serializers/report-serializer.ts","../../../../../../src/core/reports/widget.ts","../../../../../../src/core/reports/widget-components-map.ts","../../../../../../src/core/reports/utils/aggregation/evaluate-aggregation.ts","../../../../../../src/core/reports/utils/widgets-instances/create-widget-instance.ts","../../../../../../src/core/reports/utils/widgets-instances/widget-instance-utils.ts","../../../../../../src/core/reports/utils/widgets-instances/widget-to-widget-instance.ts","../../../../../../src/core/reports/utils/reports-instances/create-report-container-instance.ts","../../../../../../src/core/reports/utils/reports-instances/create-report-instance.ts","../../../../../../src/core/reports/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {ChangeDetectorRef, ElementRef} from '@angular/core';\nimport {AjfWidgetInstance} from './interface/widgets-instances/widget-instance';\n\nexport abstract class AjfBaseWidgetComponent<T extends AjfWidgetInstance = AjfWidgetInstance> {\n  private _instance: T;\n  get instance(): T { return this._instance; }\n  set instance(instance: T) {\n    if (this._instance !== instance) {\n      this._instance = instance;\n      this._cdr.detectChanges();\n    }\n  }\n\n  constructor(private _cdr: ChangeDetectorRef, readonly el: ElementRef) { }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport enum AjfChartType {\n  Line,\n  Bar,\n  HorizontalBar,\n  Radar,\n  Scatter,\n  Doughnut,\n  Pie,\n  PolarArea,\n  Bubble,\n  LENGTH\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {ExtendedChartType} from '@ajf/core/chart';\nimport {AjfChartType} from './interface/charts/chart-type';\n\nexport function chartToChartJsType(chartType?: AjfChartType): ExtendedChartType {\n    switch (chartType) {\n      case AjfChartType.Line:\n      return 'line';\n      case AjfChartType.Bar:\n      return 'bar';\n      case AjfChartType.HorizontalBar:\n      return 'horizontalBar';\n      case AjfChartType.Radar:\n      return 'radar';\n      case AjfChartType.Scatter:\n      return 'scatter';\n      case AjfChartType.Doughnut:\n      return 'doughnut';\n      case AjfChartType.Pie:\n      return 'pie';\n      case AjfChartType.PolarArea:\n      return 'polarArea';\n      case AjfChartType.Bubble:\n      return 'bubble';\n      default:\n      return 'line';\n    }\n  }\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Pipe} from '@angular/core';\nimport {AjfLayoutWidgetInstance} from './interface/widgets-instances/layout-widget-instance';\nimport {AjfWidgetInstance} from './interface/widgets-instances/widget-instance';\n\n@Pipe({name: 'ajfGetColumnContent'})\nexport class AjfGetColumnContentPipe {\n  transform(instance: AjfLayoutWidgetInstance, column: number): AjfWidgetInstance|null {\n    return column >= 0 && column < instance.content.length ? instance.content[column] : null;\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfAggregationType} from './aggregation-type';\n\nexport interface AjfAggregation {\n  aggregation: AjfAggregationType;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport enum AjfAggregationType {\n  None,\n  Sum,\n  Average,\n  WeightedAverage,\n  LENGTH\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfFormula} from '@ajf/core/models';\nimport {AjfChartType} from '../charts/chart-type';\nimport {AjfChartDatasetOptions} from './chart-dataset-options';\nimport {AjfDataset} from './dataset';\n\nexport interface AjfChartDataset extends AjfDataset {\n  formula: AjfFormula[];\n  chartType?: AjfChartType;\n  options?: AjfChartDatasetOptions;\n  datalabels?: any;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {ChartColor} from 'chart.js';\n\nexport interface AjfChartDatasetOptions {\n  backgroundColor?: ChartColor|ChartColor[];\n  borderWidth?: number;\n  borderColor?: ChartColor;\n  borderCapStyle?: string;\n  borderDash?: number[];\n  borderDashOffset?: number;\n  borderJoinStyle?: string;\n  fill?: boolean;\n  label?: string;\n  lineTension?: number;\n  pointBorderColor?: ChartColor|ChartColor[];\n  pointBackgroundColor?: ChartColor|ChartColor[];\n  pointBorderWidth?: number|number[];\n  pointRadius?: number|number[];\n  pointHoverRadius?: number|number[];\n  pointHitRadius?: number|number[];\n  pointHoverBackgroundColor?: ChartColor|ChartColor[];\n  pointHoverBorderColor?: ChartColor|ChartColor[];\n  pointHoverBorderWidth?: number|number[];\n  pointStyle?: string|string[]|HTMLImageElement|HTMLImageElement[];\n  xAxisID?: string;\n  yAxisID?: string;\n  type?: string;\n  hidden?: boolean;\n  hideInLegendAndTooltip?: boolean;\n  stack?: string;\n  datalabels?: any;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfFormula} from '@ajf/core/models';\nimport {AjfAggregation} from '../aggregation/aggregation';\n\nexport interface AjfDataset {\n  formula?: AjfFormula|AjfFormula[];\n  aggregation: AjfAggregation;\n  label?: string;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfFormula} from '@ajf/core/models';\nimport {AjfDataset} from './dataset';\n\nexport interface AjfTableDataset extends AjfDataset {\n  formula: AjfFormula;\n  colspan: number;\n  rowspan: number;\n  style: any;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfForm} from '@ajf/core/forms';\nimport {AjfStyles} from '../styles';\nimport {AjfReportContainer} from './report-container';\nimport {AjfReportVariable} from './report-variable';\n\nexport interface AjfReport {\n  header?: AjfReportContainer;\n  content?: AjfReportContainer;\n  footer?: AjfReportContainer;\n  styles?: AjfStyles;\n  forms?: AjfForm[];\n  variables?: AjfReportVariable[];\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfStyles} from '../styles';\nimport {AjfWidget} from '../widgets/widget';\n\nexport interface AjfReportContainer {\n  content: AjfWidget[];\n  styles: AjfStyles;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfFormula} from '@ajf/core/models';\n\nexport interface AjfReportVariable {\n  name: string;\n  formula: AjfFormula;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfReportContainer} from '../reports/report-container';\nimport {AjfStyles} from '../styles';\nimport {AjfWidgetInstance} from '../widgets-instances/widget-instance';\n\nexport interface AjfReportContainerInstance {\n  container: AjfReportContainer;\n  content: AjfWidgetInstance[];\n  styles: AjfStyles;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfReport} from '../reports/report';\nimport {AjfStyles} from '../styles';\nimport {AjfReportContainerInstance} from './report-container-instance';\n\nexport interface AjfReportInstance {\n  report: AjfReport;\n  header?: AjfReportContainerInstance;\n  content?: AjfReportContainerInstance;\n  footer?: AjfReportContainerInstance;\n  styles: AjfStyles;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport interface AjfStyles {\n  [style: string]: any;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfFormula} from '@ajf/core/models';\nimport {ChartOptions} from 'chart.js';\n\nimport {AjfChartType} from '../charts/chart-type';\nimport {AjfChartDataset} from '../dataset/chart-dataset';\n\nimport {AjfDataWidget} from './data-widget';\n\nexport interface AjfChartWidget extends AjfDataWidget {\n  chartType: AjfChartType;\n  type?: AjfChartType;\n  labels: AjfFormula|AjfFormula[];\n  dataset: AjfChartDataset[];\n  options: ChartOptions;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport interface AjfCustomWidget {\n  json: string;\n  type: string;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfDataset} from '../dataset/dataset';\nimport {AjfWidget} from './widget';\n\nexport interface AjfDataWidget extends AjfWidget {\n  dataset: AjfDataset[]|AjfDataset[][];\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfFormula} from '@ajf/core/models';\nimport {AjfWidget} from './widget';\n\nexport interface AjfFormulaWidget extends AjfWidget {\n  formula: AjfFormula;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfImageType} from '@ajf/core/image';\nimport {AjfFormula} from '@ajf/core/models';\nimport {AjfWidget} from './widget';\n\nexport interface AjfImageContainerWidget extends AjfWidget {\n  imageType: AjfImageType;\n  icons?: AjfFormula|AjfFormula[];\n  flags?: AjfFormula|AjfFormula[];\n  urls?: AjfFormula|AjfFormula[];\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfImageType} from '@ajf/core/image';\nimport {AjfFormula} from '@ajf/core/models';\nimport {AjfWidget} from './widget';\n\nexport interface AjfImageWidget extends AjfWidget {\n  imageType: AjfImageType;\n  icon?: AjfFormula;\n  flag?: AjfFormula;\n  url?: AjfFormula;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfWidgetWithContent} from './widget-with-content';\n\nexport interface AjfLayoutWidget extends AjfWidgetWithContent {\n  columns: number[];\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfFormula} from '@ajf/core/models';\nimport {AjfDataWidget} from './data-widget';\n\nexport interface AjfMapWidget extends AjfDataWidget {\n  coordinate: AjfFormula;\n  tileLayer: string;\n  attribution: string;\n  disabled: boolean;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfTableDataset} from '../dataset/table-dataset';\nimport {AjfDataWidget} from './data-widget';\n\nexport interface AjfTableWidget extends AjfDataWidget {\n  cellStyles: any;\n  dataset: AjfTableDataset[][];\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfWidget} from './widget';\n\nexport interface AjfTextWidget extends AjfWidget {\n  htmlText: string;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfCondition, AjfFormula} from '@ajf/core/models';\nimport {AjfStyles} from '../styles';\nimport {AjfWidgetType} from './widget-type';\n\nexport interface AjfWidget {\n  widgetType: AjfWidgetType;\n  styles: AjfStyles;\n  visibility: AjfCondition;\n  repetitions?: AjfFormula;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport enum AjfWidgetType {\n  Layout,\n  PageBreak,\n  Image,\n  Text,\n  Chart,\n  Table,\n  Map,\n  Column,\n  Formula,\n  ImageContainer,\n  DynamicTable,\n  LENGTH\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfWidget} from './widget';\n\nexport interface AjfWidgetWithContent extends AjfWidget {\n  content: AjfWidget[];\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {ExtendedChartType} from '@ajf/core/chart';\nimport {ChartData, ChartDataSets} from 'chart.js';\n\nimport {AjfChartWidget} from '../widgets/chart-widget';\n\nimport {AjfDataWidgetInstance} from './data-widget-instance';\n\nexport interface AjfChartWidgetInstance extends AjfDataWidgetInstance {\n  widget: AjfChartWidget;\n  datasets: ChartDataSets[];\n  chartType: ExtendedChartType;\n  data: ChartData;\n  labels: string[];\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfColumnWidget} from '../widgets/column-widget';\nimport {AjfWidgetWithContentInstance} from './widget-with-content-instance';\n\nexport interface AjfColumnWidgetInstance extends AjfWidgetWithContentInstance {\n  widget: AjfColumnWidget;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfDataWidget} from '../widgets/data-widget';\nimport {AjfWidgetInstance} from './widget-instance';\n\nexport interface AjfDataWidgetInstance extends AjfWidgetInstance {\n  widget: AjfDataWidget;\n  dataset: any;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfFormulaWidget} from '../widgets/formula-widget';\nimport {AjfWidgetInstance} from './widget-instance';\n\nexport interface AjfFormulaWidgetInstance extends AjfWidgetInstance {\n  widget: AjfFormulaWidget;\n  formula: string;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfImageIcon} from '@ajf/core/image';\n\nimport {AjfImageContainerWidget} from '../widgets/image-container-widget';\nimport {AjfWidgetInstance} from './widget-instance';\n\nexport interface AjfImageContainerWidgetInstance extends AjfWidgetInstance {\n  widget: AjfImageContainerWidget;\n  icons: AjfImageIcon[];\n  flags: string[];\n  urls: string[];\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfImageIcon} from '@ajf/core/image';\n\nimport {AjfImageWidget} from '../widgets/image-widget';\nimport {AjfWidgetInstance} from './widget-instance';\n\nexport interface AjfImageWidgetInstance extends AjfWidgetInstance {\n  widget: AjfImageWidget;\n  icon: AjfImageIcon;\n  flag: string;\n  url: string;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfLayoutWidget} from '../widgets/layout-widget';\nimport {AjfWidgetWithContentInstance} from './widget-with-content-instance';\n\nexport interface AjfLayoutWidgetInstance extends AjfWidgetWithContentInstance {\n  widget: AjfLayoutWidget;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfMapWidget} from '../widgets/map-widget';\nimport {AjfWidgetInstance} from './widget-instance';\n\nexport interface AjfMapWidgetInstance extends AjfWidgetInstance {\n  widget: AjfMapWidget;\n  coordinate: number[];\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfPageBreakWidget} from '../widgets/page-break-widget';\nimport {AjfWidgetInstance} from './widget-instance';\n\nexport interface AjfPageBreakWidgetInstance extends AjfWidgetInstance {\n  widget: AjfPageBreakWidget;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfTableCell} from '@ajf/core/table';\nimport {Subject} from 'rxjs';\n\nimport {AjfTableWidget} from '../widgets/table-widget';\n\nimport {AjfDataWidgetInstance} from './data-widget-instance';\n\nexport interface AjfTableWidgetInstance extends AjfDataWidgetInstance {\n  widget: AjfTableWidget;\n  data: AjfTableCell[][];\n  recalcEvt: Subject<boolean>;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfTextWidget} from '../widgets/text-widget';\nimport {AjfWidgetInstance} from './widget-instance';\n\nexport interface AjfTextWidgetInstance extends AjfWidgetInstance {\n  widget: AjfTextWidget;\n  htmlText: string;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfStyles} from '../styles';\nimport {AjfWidget} from '../widgets/widget';\nimport {AjfWidgetType} from '../widgets/widget-type';\n\nexport interface AjfWidgetInstance {\n  widget: AjfWidget;\n  visible: boolean;\n  styles: AjfStyles;\n  widgetType: AjfWidgetType;\n  repetitions?: number;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfWidgetInstance} from './widget-instance';\n\nexport interface AjfWidgetWithContentInstance extends AjfWidgetInstance {\n  content: AjfWidgetInstance[];\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {ChangeDetectorRef, Directive, Input} from '@angular/core';\n\nimport {AjfReportInstance} from './interface/reports-instances/report-instance';\nimport {AjfReport} from './interface/reports/report';\n\n@Directive()\nexport abstract class AjfReportRenderer {\n  private _instance: AjfReportInstance;\n  get instance(): AjfReportInstance { return this._instance; }\n  @Input() set instance(instance: AjfReportInstance) {\n    this._instance = instance;\n    this._report = instance != null ? instance.report : null;\n    this._cdr.markForCheck();\n  }\n\n  private _report: AjfReport | null;\n  get report(): AjfReport | null {\n    return this._report;\n  }\n\n  constructor(private _cdr: ChangeDetectorRef) { }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Directive, ViewContainerRef} from '@angular/core';\n\n@Directive({selector: '[ajf-widget-host]'})\nexport class AjfWidgetHost {\n  constructor(readonly viewContainerRef: ViewContainerRef) { }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {NgModule} from '@angular/core';\n\nimport {AjfGetColumnContentPipe} from './get-column-content';\nimport {AjfWidgetHost} from './widget-host';\n\n@NgModule({\n  declarations: [\n    AjfGetColumnContentPipe,\n    AjfWidgetHost,\n  ],\n  exports: [\n    AjfGetColumnContentPipe,\n    AjfWidgetHost,\n  ],\n})\nexport class AjfReportsModule {\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfAggregation} from '../../interface/aggregation/aggregation';\nimport {AjfAggregationType} from '../../interface/aggregation/aggregation-type';\n\nexport type AjfAggregationCreate = Partial<AjfAggregation>;\n\nexport function createAggregation(aggregation: AjfAggregationCreate): AjfAggregation {\n  return {\n    ...aggregation,\n    aggregation: aggregation.aggregation || AjfAggregationType.None,\n  };\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfAggregation} from '../interface/aggregation/aggregation';\nimport {createAggregation} from '../utils/aggregation/create-aggregation';\n\nexport class AjfAggregationSerializer {\n  static fromJson(json: Partial<AjfAggregation>): AjfAggregation {\n    if (json.aggregation == null) {\n      throw new Error('Malformed aggregation');\n    }\n    return createAggregation({...json, aggregation: json.aggregation});\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfAggregationType} from '../../interface/aggregation/aggregation-type';\nimport {AjfDataset} from '../../interface/dataset/dataset';\nimport {createAggregation} from '../aggregation/create-aggregation';\n\nexport function createDataset(dataset: Partial<AjfDataset>): AjfDataset {\n  return {\n    ...dataset,\n    aggregation: dataset.aggregation || createAggregation({aggregation: AjfAggregationType.None}),\n  };\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfFormulaSerializer} from '@ajf/core/models';\n\nimport {AjfDataset} from '../interface/dataset/dataset';\nimport {createDataset} from '../utils/dataset/create-dataset';\n\nimport {AjfAggregationSerializer} from './aggregation-serializer';\n\nexport class AjfDatasetSerializer {\n  static fromJson(json: Partial<AjfDataset>): AjfDataset {\n    if (json.formula == null || json.aggregation == null || json.label == null) {\n      throw new Error('Malformed dataset');\n    }\n    json.formula = json.formula instanceof Array ?\n        json.formula = json.formula.map(f => AjfFormulaSerializer.fromJson(f)) :\n        AjfFormulaSerializer.fromJson(json.formula);\n    json.aggregation = AjfAggregationSerializer.fromJson(json.aggregation);\n    return createDataset(json);\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {alwaysCondition} from '@ajf/core/models';\nimport {AjfWidget} from '../../interface/widgets/widget';\n\nexport type AjfWidgetCreate = Pick<AjfWidget, 'widgetType'>&Partial<AjfWidget>;\n\nexport function createWidget(widget: AjfWidgetCreate): AjfWidget {\n  return {\n    ...widget,\n    styles: widget.styles || {},\n    visibility: widget.visibility || alwaysCondition(),\n  };\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfConditionSerializer, AjfFormulaSerializer, alwaysCondition} from '@ajf/core/models';\n\nimport {AjfChartDataset} from '../interface/dataset/chart-dataset';\nimport {AjfTableDataset} from '../interface/dataset/table-dataset';\nimport {AjfChartWidget} from '../interface/widgets/chart-widget';\nimport {AjfDataWidget} from '../interface/widgets/data-widget';\nimport {AjfMapWidget} from '../interface/widgets/map-widget';\nimport {AjfWidget} from '../interface/widgets/widget';\nimport {AjfWidgetType} from '../interface/widgets/widget-type';\nimport {AjfWidgetWithContent} from '../interface/widgets/widget-with-content';\nimport {createWidget} from '../utils/widgets/create-widget';\n\nimport {AjfDatasetSerializer} from './dataset-serializer';\n\nexport class AjfWidgetSerializer {\n  static fromJson(json: Partial<AjfWidget>): AjfWidget {\n    if (json.widgetType == null) {\n      throw new Error('Malformed widget');\n    }\n    json.visibility =\n        json.visibility ? AjfConditionSerializer.fromJson(json.visibility) : alwaysCondition();\n    json.styles = json.styles || {};\n    const obj = json as AjfWidget;\n    if (obj.widgetType === AjfWidgetType.Layout || obj.widgetType === AjfWidgetType.Column) {\n      return AjfWidgetSerializer._widgetWithContentFromJson(obj);\n    }\n    if (obj.widgetType === AjfWidgetType.Chart || obj.widgetType === AjfWidgetType.Table) {\n      const w = AjfWidgetSerializer._dataWidgetFromJson(obj);\n      if (obj.widgetType === AjfWidgetType.Chart) {\n        const cw = w as AjfChartWidget;\n        if (cw.labels instanceof Array) {\n          cw.labels.map(l => AjfFormulaSerializer.fromJson(l));\n        } else if (cw.labels != null) {\n          cw.labels = AjfFormulaSerializer.fromJson(cw.labels);\n        }\n      }\n      return w;\n    }\n    if (obj.widgetType === AjfWidgetType.Map) {\n      const mw = obj as AjfMapWidget;\n      mw.coordinate = AjfFormulaSerializer.fromJson(mw.coordinate);\n    }\n    return obj;\n  }\n\n  private static _dataWidgetFromJson(json: AjfWidget&Partial<AjfDataWidget>): AjfDataWidget {\n    const dataset = json.dataset ?\n        (json.widgetType === AjfWidgetType.Table ?\n             (json.dataset as AjfTableDataset[][])\n                 .map(row => row.map(cell => AjfDatasetSerializer.fromJson(cell))) :\n             (json.dataset as AjfChartDataset[]).map(d => AjfDatasetSerializer.fromJson(d))) :\n        [];\n    return {...createWidget(json), dataset};\n  }\n\n  private static _widgetWithContentFromJson(json: AjfWidget&\n                                           Partial<AjfWidgetWithContent>): AjfWidgetWithContent {\n    const content = (json.content || []).map(c => AjfWidgetSerializer.fromJson(c));\n    return {...createWidget(json), content};\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfReportContainer} from '../interface/reports/report-container';\nimport {AjfWidgetSerializer} from './widget-serializer';\n\nexport class AjfReportContainerSerializer {\n  static fromJson(json: Partial<AjfReportContainer>): AjfReportContainer {\n    json.content = (json.content || []).map(c => AjfWidgetSerializer.fromJson(c));\n    return {...json, content: json.content!, styles: json.styles || {}};\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfReport} from '../../interface/reports/report';\n\nexport type AjfReportCreate = Partial<AjfReport>;\n\nexport function createReport(report: AjfReportCreate): AjfReport {\n  return {...report};\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfReport} from '../interface/reports/report';\nimport {AjfReportContainer} from '../interface/reports/report-container';\nimport {createReport} from '../utils/reports/create-report';\nimport {AjfReportContainerSerializer} from './report-container-serializer';\n\nexport class AjfReportSerializer {\n  static fromJson(json: Partial<AjfReport>): AjfReport {\n    const containers: (keyof AjfReport)[] = ['header', 'footer', 'content'];\n    containers.forEach(c => {\n      if (json[c]) {\n        (json[c] as AjfReportContainer) =\n            AjfReportContainerSerializer.fromJson(json[c] as Partial<AjfReportContainer>);\n      }\n    });\n    return createReport(json);\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {ComponentFactoryResolver, Directive, Input, OnInit, Renderer2,\n  ViewChild} from '@angular/core';\n\nimport {AjfWidgetInstance} from './interface/widgets-instances/widget-instance';\nimport {AjfWidgetComponentsMap} from './widget-components-map';\nimport {AjfWidgetHost} from './widget-host';\n\n@Directive()\nexport abstract class AjfReportWidget implements OnInit {\n  @ViewChild(AjfWidgetHost, {static: true}) widgetHost: AjfWidgetHost;\n\n  private _instance: AjfWidgetInstance;\n  get instance(): AjfWidgetInstance { return this._instance; }\n  @Input() set instance(instance: AjfWidgetInstance) {\n    if (this._instance !== instance) {\n      this._instance = instance;\n      if (this._init) {\n        this._loadComponent();\n      }\n    }\n  }\n\n  protected abstract widgetsMap: AjfWidgetComponentsMap;\n\n  private _init = false;\n\n  constructor(private _cfr: ComponentFactoryResolver, private _renderer: Renderer2) { }\n\n  ngOnInit(): void {\n    this._init = true;\n    this._loadComponent();\n  }\n\n  private _loadComponent(): void {\n    if (\n      !this._init || this._instance == null\n      || this.widgetHost == null || !this.instance.visible) {\n      return;\n    }\n\n    const vcr = this.widgetHost.viewContainerRef;\n    vcr.clear();\n    const componentDef = this.widgetsMap[this._instance.widget.widgetType];\n    if (componentDef == null) { return; }\n    const component = componentDef.component;\n    try {\n      const componentFactory = this._cfr.resolveComponentFactory(component);\n      const componentRef = vcr.createComponent(componentFactory);\n      const componentInstance = componentRef.instance;\n\n      Object.keys(this._instance.widget.styles).forEach((style: string) => {\n        try {\n          this._renderer.setStyle(\n            componentInstance.el.nativeElement,\n            style,\n            `${this._instance.widget.styles[style]}`\n          );\n        } catch (e) { }\n      });\n\n      componentInstance.instance = this._instance;\n      if (componentDef.inputs) {\n        Object.keys(componentDef.inputs).forEach(key => {\n          if (key in componentInstance) {\n            (componentInstance as any)[key] = componentDef.inputs![key];\n          }\n        });\n      }\n    } catch (e) { }\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Type} from '@angular/core';\n\nimport {AjfBaseWidgetComponent} from './base-widget';\n\nexport interface AjfWidgetComponentsMap {\n  [key: number]: {\n    component: Type<AjfBaseWidgetComponent>,\n    inputs?: {[key: string]: any},\n  };\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfContext, AjfFormula, evaluateExpression} from '@ajf/core/models';\nimport {AjfAggregation} from '../../interface/aggregation/aggregation';\nimport {AjfAggregationType} from '../../interface/aggregation/aggregation-type';\n\nexport function evaluateAggregation(\n    aggregation: AjfAggregation, formulas: AjfFormula[], context: AjfContext): number[] {\n  const data: any[] = formulas.map(f => evaluateExpression(f.formula, context));\n  switch (aggregation.aggregation) {\n    case AjfAggregationType.None:\n      if (data.length !== 1) {\n        throw new Error('Invalid aggregation');\n      }\n      return data[0];\n    case AjfAggregationType.Sum:\n      return data.map((r: any) => r.reduce((s: any, d: any) => s + d, 0));\n    case AjfAggregationType.Average:\n    case AjfAggregationType.WeightedAverage:\n      return data.map((r: any) => {\n        const sum = r.reduce((s: any, d: any) => s + d, 0);\n        return sum / data.length;\n      });\n    default:\n      return [];\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfContext, evaluateExpression} from '@ajf/core/models';\nimport {TranslateService} from '@ngx-translate/core';\n\nimport {AjfWidgetInstance} from '../../interface/widgets-instances/widget-instance';\nimport {AjfWidget} from '../../interface/widgets/widget';\n\nexport function createWidgetInstance(\n    widget: AjfWidget, context: AjfContext, _ts: TranslateService): AjfWidgetInstance {\n  return {\n    widget,\n    widgetType: widget.widgetType,\n    visible: evaluateExpression(widget.visibility.condition, context),\n    styles: widget.styles || {},\n  };\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfContext, AjfFormula, evaluateExpression} from '@ajf/core/models';\nimport {TranslateService} from '@ngx-translate/core';\n\nexport function trFormula(f: AjfFormula, context: AjfContext, ts: TranslateService): any {\n  let formula = f.formula;\n  if (formula.substr(0, 1) === '\"') {\n    const ft = formula.slice(1, -1);\n    const transFt = ft != null && typeof ft === 'string' && ft.trim().length > 0\n      ? ts.instant(ft) : ft;\n    if (ft.length > 0) {\n      formula = `\"${transFt}\"`;\n    }\n  } else {\n    formula = formula != null && typeof formula === 'string' && formula.trim().length > 0\n      ? ts.instant(formula) : formula;\n  }\n  return evaluateExpression(formula, context);\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfContext, AjfFormula, createFormula, evaluateExpression} from '@ajf/core/models';\nimport {deepCopy} from '@ajf/core/utils';\nimport {TranslateService} from '@ngx-translate/core';\n\nimport {chartToChartJsType} from '../../chart-utils';\nimport {AjfChartWidgetInstance} from '../../interface/widgets-instances/chart-widget-instance';\nimport {AjfFormulaWidgetInstance} from '../../interface/widgets-instances/formula-widget-instance';\nimport {\n  AjfImageContainerWidgetInstance\n} from '../../interface/widgets-instances/image-container-widget-instance';\nimport {AjfImageWidgetInstance} from '../../interface/widgets-instances/image-widget-instance';\nimport {AjfMapWidgetInstance} from '../../interface/widgets-instances/map-widget-instance';\nimport {AjfTableWidgetInstance} from '../../interface/widgets-instances/table-widget-instance';\nimport {AjfTextWidgetInstance} from '../../interface/widgets-instances/text-widget-instance';\nimport {AjfWidgetInstance} from '../../interface/widgets-instances/widget-instance';\nimport {\n  AjfWidgetWithContentInstance\n} from '../../interface/widgets-instances/widget-with-content-instance';\nimport {AjfChartWidget} from '../../interface/widgets/chart-widget';\nimport {AjfDynamicTableWidget} from '../../interface/widgets/dynamic-table-widget';\nimport {AjfFormulaWidget} from '../../interface/widgets/formula-widget';\nimport {AjfImageContainerWidget} from '../../interface/widgets/image-container-widget';\nimport {AjfImageWidget} from '../../interface/widgets/image-widget';\nimport {AjfMapWidget} from '../../interface/widgets/map-widget';\nimport {AjfTableDataset} from '../../interface/dataset/table-dataset';\nimport {AjfTableWidget} from '../../interface/widgets/table-widget';\nimport {AjfTextWidget} from '../../interface/widgets/text-widget';\nimport {AjfWidget} from '../../interface/widgets/widget';\nimport {AjfWidgetType} from '../../interface/widgets/widget-type';\nimport {AjfWidgetWithContent} from '../../interface/widgets/widget-with-content';\nimport {evaluateAggregation} from '../aggregation/evaluate-aggregation';\n\nimport {createWidgetInstance} from './create-widget-instance';\nimport {trFormula} from './widget-instance-utils';\n\nexport function widgetToWidgetInstance(\n    widget: AjfWidget, context: AjfContext, ts: TranslateService): AjfWidgetInstance {\n  const wi = createWidgetInstance(widget, context, ts);\n\n  if (widget.widgetType === AjfWidgetType.Column || widget.widgetType === AjfWidgetType.Layout) {\n    const wwc = widget as AjfWidgetWithContent;\n    const wwci = wi as AjfWidgetWithContentInstance;\n    let content = [] as AjfWidgetInstance[];\n    wwc.content.forEach(c => {\n      if (wwc.repetitions != null) {\n        wwci.repetitions = evaluateExpression(wwc.repetitions.formula, context);\n        if (typeof wwci.repetitions === 'number' && wwci.repetitions > 0) {\n          for (let i = 0 ; i < wwci.repetitions ; i++) {\n            content.push(widgetToWidgetInstance(c, {...context, '$repetition': i}, ts));\n          }\n        }\n      } else {\n        content.push(widgetToWidgetInstance(c, context, ts));\n      }\n      wwci.content = content;\n    });\n  } else if (widget.widgetType === AjfWidgetType.Chart) {\n    const cw = widget as AjfChartWidget;\n    const cwi = wi as AjfChartWidgetInstance;\n    const labels = cw.labels instanceof Array ? cw.labels : [cw.labels];\n    const evLabels = labels.map(l => {\n      let evf = evaluateExpression(l.formula, context);\n      try {\n        if (evf instanceof Array) {\n          evf = evf.map(v => v != null && typeof v === 'string' && v.trim().length > 0\n            ? ts.instant(v) : v);\n        } else {\n          evf = evf != null && typeof evf === 'string' && evf.trim().length > 0\n            ? ts.instant(evf) : evf;\n        }\n      } catch (_e) {\n      }\n      return evf;\n    });\n    cwi.labels = cw.labels instanceof Array ? evLabels : evLabels[0];\n    cwi.datasets = cw.dataset.map(d => {\n      let ds: any = {\n        ...d.options || {},\n        data: evaluateAggregation(d.aggregation, d.formula, context),\n      };\n      if (d.chartType != null) {\n        const ct = chartToChartJsType(d.chartType);\n        ds = {...ds, chartType: ct, type: ct };\n      }\n      if (d.options != null) {\n        ds = {...ds, options: d.options};\n      }\n      if (d.label != null) {\n        ds = {...ds, label: d.label};\n      }\n      if (d.datalabels != null) {\n        ds.datalabels = deepCopy(d.datalabels);\n      }\n      return ds;\n    });\n    cwi.data = {labels: cwi.labels, datasets: cwi.datasets};\n    cwi.chartType = chartToChartJsType(cw.type || cw.chartType);\n    if (cw.options != null && cw.options.plugins != null) {\n      const plugins = cw.options.plugins;\n      const pluginNames = Object.keys(plugins);\n      pluginNames.forEach((pluginName) => {\n        const plugin = plugins[pluginName];\n        const pluginOptions = Object.keys(plugin);\n        pluginOptions.forEach((pluginOptionName: string) => {\n          const pluginOption = plugin[pluginOptionName];\n          if (\n            typeof pluginOption !== 'string' &&\n            pluginOption != null &&\n            pluginOption.formula != null\n          ) {\n            plugin[pluginOptionName] = evaluateExpression(pluginOption.formula, context);\n          }\n        });\n      });\n    }\n  } else if (widget.widgetType === AjfWidgetType.Table) {\n    const tw = widget as AjfTableWidget;\n    const twi = wi as AjfTableWidgetInstance;\n\n    twi.dataset = tw.dataset.map(row => row.map(cell => {\n      return cell.formula instanceof Array ?\n        cell.formula.map(f => trFormula(f as AjfFormula, context as AjfContext, ts)) :\n        trFormula(cell.formula!, context as AjfContext, ts);\n    }));\n\n    twi.data = (tw.dataset || [])\n      .map(row => row.map(cell => ({\n                                      value: evaluateExpression(cell.formula.formula, context),\n                                      style: {...tw.cellStyles, ...cell.style},\n                                      rowspan: cell.rowspan,\n                                      colspan: cell.colspan,\n                                    })));\n  } else if (widget.widgetType === AjfWidgetType.DynamicTable) {\n    const tdw = widget as AjfDynamicTableWidget;\n    const tdwi = wi as AjfTableWidgetInstance;\n\n    tdwi.dataset = tdw.dataset.map((cell: AjfTableDataset) => {\n      return cell.formula instanceof Array ?\n        cell.formula.map(f => trFormula(f as AjfFormula, context, ts)) :\n        trFormula(cell.formula!, context, ts);\n    });\n    const dataset = evaluateExpression(tdw.rowDefinition.formula, context) || [];\n\n    const header = (tdw.dataset || []).map(cell => ({\n      value: evaluateExpression(cell.formula.formula, context),\n      style: {...tdw.cellStyles, ...cell.style},\n      rowspan: cell.rowspan,\n      colspan: cell.colspan,\n    }));\n    tdwi.data = [[...header], ...dataset];\n  } else if (widget.widgetType === AjfWidgetType.Image) {\n    const iw = widget as AjfImageWidget;\n    const iwi = wi as AjfImageWidgetInstance;\n    if (iw.flag) {\n      iwi.flag = evaluateExpression(iw.flag.formula, context);\n    }\n    if (iw.icon) {\n      iwi.icon = evaluateExpression(iw.icon.formula, context);\n    }\n    if (iw.url) {\n      iwi.url = evaluateExpression(iw.url.formula, context);\n    }\n  } else if (widget.widgetType === AjfWidgetType.ImageContainer) {\n    const icw = widget as AjfImageContainerWidget;\n    const icwi = wi as AjfImageContainerWidgetInstance;\n    if (icw.flags) {\n      icwi.flags = icw.flags instanceof Array\n        ? icw.flags.map(f => evaluateExpression(f.formula, context))\n        : evaluateExpression(icw.flags.formula, context);\n    }\n    if (icw.icons) {\n      icwi.icons = icw.icons instanceof Array\n        ? icw.icons.map(f => evaluateExpression(f.formula, context))\n        : evaluateExpression(icw.icons.formula, context);\n    }\n    if (icw.urls) {\n      icwi.urls = icw.urls instanceof Array\n        ? icw.urls.map(f => evaluateExpression(f.formula, context))\n        : evaluateExpression(icw.urls.formula, context);\n    }\n  } else if (widget.widgetType === AjfWidgetType.Text) {\n    const tew = widget as AjfTextWidget;\n    const tewi = wi as AjfTextWidgetInstance;\n    const formulaRegEx: RegExp = /\\[{2}(.+?)\\]{2}/g;\n    const matches: {idx: number, len: number, formula: AjfFormula}[] = [];\n    let match: RegExpExecArray|null;\n    let htmlText = tew.htmlText;\n    while (match = formulaRegEx.exec(htmlText)) {\n      const idx = match.index;\n      const len = match[0].length;\n      const formula = createFormula({formula: match[1]});\n      matches.push({idx, len, formula});\n    }\n    matches.reverse().forEach((m) => {\n      let calcValue;\n      try {\n        calcValue = evaluateExpression(m.formula.formula, context);\n      } catch (e) {\n        calcValue = '';\n      }\n      htmlText = `${htmlText.substr(0, m.idx)}${calcValue}${htmlText.substr(m.idx + m.len)}`;\n    });\n    tewi.htmlText = htmlText != null && htmlText.length > 0 ? ts.instant(htmlText) : htmlText;\n  } else if (widget.widgetType === AjfWidgetType.Formula) {\n    const fw = widget as AjfFormulaWidget;\n    const fwi = wi as AjfFormulaWidgetInstance;\n    fwi.formula = evaluateExpression(fw.formula.formula, context);\n  } else if (widget.widgetType === AjfWidgetType.Map) {\n    const mw = widget as AjfMapWidget;\n    const mwi = wi as AjfMapWidgetInstance;\n    mwi.coordinate = evaluateExpression(mw.coordinate.formula, context);\n  }\n  return wi;\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfContext} from '@ajf/core/models';\nimport {TranslateService} from '@ngx-translate/core';\n\nimport {\n  AjfReportContainerInstance\n} from '../../interface/reports-instances/report-container-instance';\nimport {AjfReportContainer} from '../../interface/reports/report-container';\nimport {widgetToWidgetInstance} from '../widgets-instances/widget-to-widget-instance';\n\nexport function createReportContainerInstance(\n    container: AjfReportContainer, context: AjfContext,\n    ts: TranslateService): AjfReportContainerInstance {\n  const content = container.content.map(c => widgetToWidgetInstance(c, context, ts));\n  return {\n    container,\n    content,\n    styles: container.styles,\n  };\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {AjfContext, evaluateExpression} from '@ajf/core/models';\nimport {TranslateService} from '@ngx-translate/core';\n\nimport {AjfReportInstance} from '../../interface/reports-instances/report-instance';\nimport {AjfReport} from '../../interface/reports/report';\n\nimport {createReportContainerInstance} from './create-report-container-instance';\n\nexport function createReportInstance(\n    report: AjfReport, context: AjfContext, ts: TranslateService): AjfReportInstance {\n  (report.variables || []).forEach(variable => {\n    context[variable.name] = evaluateExpression(variable.formula.formula, context);\n  });\n  return {\n    report,\n    header: report.header ? createReportContainerInstance(report.header, context, ts) : undefined,\n    content: report.content ? createReportContainerInstance(report.content, context, ts) :\n                              undefined,\n    footer: report.footer ? createReportContainerInstance(report.footer, context, ts) : undefined,\n    styles: report.styles || {},\n  };\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}