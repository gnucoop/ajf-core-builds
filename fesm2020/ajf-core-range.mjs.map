{"version":3,"file":"ajf-core-range.mjs","sources":["../../../projects/core/range/src/range.ts","../../../projects/core/range/src/public_api.ts","../../../projects/core/range/src/ajf-core-range.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  AJF_WARNING_ALERT_SERVICE,\n  AjfBaseFieldComponent,\n  AjfFormRendererService,\n  AjfRangeFieldInstance,\n  AjfWarningAlertService,\n} from '@ajf/core/forms';\nimport {ChangeDetectorRef, Directive, Inject, Input, OnInit} from '@angular/core';\nimport {ControlValueAccessor} from '@angular/forms';\n\n@Directive()\nexport abstract class AjfRange\n  extends AjfBaseFieldComponent<AjfRangeFieldInstance>\n  implements ControlValueAccessor, OnInit\n{\n  private _end: number = 10;\n  private _name: string = '';\n  private _onChangeCallback: (value: any) => void = _ => {};\n\n  private _onTouchedCallback: () => void = () => {};\n\n  private _start: number = 1;\n  private _step: number = 1;\n  private _value: number = 1;\n\n  constructor(\n    public cdr: ChangeDetectorRef,\n    service: AjfFormRendererService,\n    @Inject(AJF_WARNING_ALERT_SERVICE) was: AjfWarningAlertService,\n  ) {\n    super(cdr, service, was);\n  }\n\n  get end(): number | undefined {\n    return this._end;\n  }\n  @Input()\n  set end(newEnd: number | undefined) {\n    if (newEnd != null && this._end != newEnd) {\n      this._end = newEnd as number;\n      this.cdr.detectChanges();\n    }\n  }\n\n  get name(): string | undefined {\n    return this._name;\n  }\n  @Input()\n  set name(newName: string | undefined) {\n    if (newName != null && this._name != newName) {\n      this._name = newName;\n      this.cdr.detectChanges();\n    }\n  }\n\n  get start(): number | undefined {\n    return this._start;\n  }\n  @Input()\n  set start(newStart: number | undefined) {\n    if (newStart != null && this._start != newStart) {\n      this._start = newStart;\n      this.cdr.detectChanges();\n    }\n  }\n\n  get step(): number | undefined {\n    return this._step;\n  }\n  @Input()\n  set step(newStep: number | undefined) {\n    if (newStep != null && this._step !== newStep) {\n      this._step = newStep;\n      this.cdr.detectChanges();\n    }\n  }\n\n  get value(): number {\n    return this._value;\n  }\n\n  set value(newValue: number) {\n    if (this._value !== newValue) {\n      this._value = newValue;\n      this._onChangeCallback(newValue);\n      this.cdr.detectChanges();\n    }\n  }\n\n  override ngOnInit(): void {\n    super.ngOnInit();\n    if (this.instance != null && this.instance.node != null) {\n      const node = this.instance.node;\n      if (node.end != null) {\n        this.end = node.end;\n      }\n      if (node.start != null) {\n        this.start = node.start;\n      }\n      if (node.step != null) {\n        this.step = node.step;\n      }\n      if (node.name != null) {\n        this.name = node.name;\n      }\n    }\n  }\n\n  registerOnChange(fn: (value: any) => void): void {\n    this._onChangeCallback = fn;\n  }\n\n  registerOnTouched(fn: () => void): void {\n    this._onTouchedCallback = fn;\n  }\n\n  reset(): void {\n    this.value = 0;\n    this._onTouchedCallback();\n  }\n\n  writeValue(value: number): void {\n    this.value = value;\n  }\n}\n","/**\n * @license\n * Copyright (C) Gnucoop soc. coop.\n *\n * This file is part of the Advanced JSON forms (ajf).\n *\n * Advanced JSON forms (ajf) is free software: you can redistribute it and/or\n * modify it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the License,\n * or (at your option) any later version.\n *\n * Advanced JSON forms (ajf) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero\n * General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with Advanced JSON forms (ajf).\n * If not, see http://www.gnu.org/licenses/.\n *\n */\n\nexport * from './range';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}